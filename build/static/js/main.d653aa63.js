/*! For license information please see main.d653aa63.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function B(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function j(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Ie(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function De(){}var Ae=!1;function Ne(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ee)&&(De(),Ie())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,Be={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Be,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,Et,St,Tt=!1,It=[],Ct=null,Dt=null,At=null,Nt=new Map,Rt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Dt&&Ut(Dt)&&(Dt=null),null!==At&&Ut(At)&&(At=null),Nt.forEach(Vt),Rt.forEach(Vt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function qt(e){function t(t){return jt(t,e)}if(0<It.length){jt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&jt(Ct,e),null!==Dt&&jt(Dt,e),null!==At&&jt(At,e),Nt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var zt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Dt=Mt(Dt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Mt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Nn),On=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Pn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function $n(e){if(W(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Gn(t,Wn,e,we(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Sr("animationend"),Ir=Sr("animationiteration"),Cr=Sr("animationstart"),Dr=Sr("transitionend"),Ar=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Or=0;Or<Nr.length;Or++){var Pr=Nr[Or];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Ir,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Dr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case Tr:case Ir:case Cr:s=mn;break;case Dr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Re(v,h))&&l.push(Gr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Wr(d))v++;for(d=0,p=h;p;p=Wr(p))d++;for(;0<v-d;)l=Wr(l),v--;for(;0<d-v;)h=Wr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Yn;else if(Kn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Pn&&Bn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ti(e,t){xi++,_i[xi]=e.current,e.current=t}var Ii={},Ci=Ei(Ii),Di=Ei(!1),Ai=Ii;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Di),Si(Ci)}function Pi(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Ti(Ci,t),Ti(Di,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ai=Ci.current,Ti(Ci,e),Ti(Di,Di.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Di),Si(Ci),Ti(Ci,e)):Si(Di),Ti(Di,n)}var Ui=null,Vi=!1,Bi=!1;function ji(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,qi),i}finally{kt=t,Bi=!1}}return null}var zi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){zi[Ki++]=Hi,zi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=Xi,Wi[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=zi[--Ki],zi[Ki]=null,Hi=zi[--Ki],zi[Ki]=null;for(;e===$i;)$i=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Si(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ds)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Da(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Da(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ri(t)?Ai:Ci.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,f=a,p=a=0,y=null;null!==f&&p<u.length;p++){f.index>p?(y=f,f=null):y=f.sibling;var m=d(i,f,u[p],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m,f=y}if(p===u.length)return n(i,f),ia&&Ji(i,p),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,p),c}for(f=r(i,f);p<u.length;p++)null!==(y=v(f,i,p,u[p],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,p),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,p=u,y=u=0,m=null,g=s.next();null!==p&&!g.done;y++,g=s.next()){p.index>y?(m=p,p=null):m=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=m);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,p=m}if(g.done)return n(i,p),ia&&Ji(i,y),l;if(null===p){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(p=r(i,p);!g.done;y++,g=s.next())null!==(g=v(p,i,y,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(L(o))return y(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ti(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,vo=0,po=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,vo=0,mo=yo=po=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?po.memoizedState=mo=e:mo=mo.next=e,mo}function Io(){if(null===yo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?po.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?po.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Do(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((vo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,po.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Ro(e,t){var n=po,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Po.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&vo)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Da(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Io().memoizedState}function jo(e,t,n,r){var i=To();po.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}po.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function zo(e,t){return jo(8390656,8,e,t)}function Ko(e,t){return qo(2048,8,e,t)}function Go(e,t){return qo(4,2,e,t)}function Ho(e,t){return qo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Wo.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&vo)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=As.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:Do,useRef:Bo,useState:function(){return Do(Co)},useDebugValue:$o,useDeferredValue:function(e){return Jo(Io(),yo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:Ao,useRef:Bo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=Io();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Hs=r),hu(0,t)},n}function pu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Iu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ps,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ps,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ps,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ps,Os),Os|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Ni(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),za(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ni(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Di.current||Aa?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Aa||qa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ni(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Di.current||Aa?("function"===typeof d&&(Ba(t,n,d,r),v=t.memoizedState),(c=Aa||qa(t,n,c,r,h,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Du(e,t,n,r,a,i)}function Du(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Nu(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Ou,Pu,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Bu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Bu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Bu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Da(e,i),rc(r,e,i,-1))}return yc(),Bu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=Xi,Wi[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bu(e,t,n,r){return null!==r&&va(r),Ya(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Wu(t),null;case 3:return r=t.stateNode,io(),Si(Di),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Ou(e,t),null===e&&qr(t.stateNode.containerInfo),Wu(t),null;case 10:return _a(t.type._context),Wu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>zs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Xe()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Di),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)vs(e,t,n),n=n.sibling}function vs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));vs(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Sc(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Xe())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,ys(t,e),Xu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(v=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==v?(v.return=d,Zu=v):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(y){Sc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Yu=u,Xu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ss=Math.ceil,Ts=b.ReactCurrentDispatcher,Is=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ds=0,As=null,Ns=null,Rs=0,Os=0,Ps=Ei(0),Ls=0,Ms=null,Fs=0,Us=0,Vs=0,Bs=null,js=null,qs=0,zs=1/0,Ks=null,Gs=!1,Hs=null,Ws=null,Qs=!1,$s=null,Ys=0,Xs=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ds)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ds)&&0!==Rs?Rs&-Rs:null!==pa.transition?(0===ec&&(ec=pt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Ds)&&e===As||(e===As&&(0===(2&Ds)&&(Us|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===Ds&&0===(1&t.mode)&&(zs=Xe()+500,Vi&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),oi((function(){0===(6&Ds)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ds))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Ds;Ds|=2;var o=pc();for(As===e&&Rs===t||(Ks=null,zs=Xe()+500,dc(e,t));;)try{kc();break}catch(s){vc(e,s)}wa(),Ts.current=o,Ds=i,null!==Ns?t=0:(As=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=vt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,js,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=qs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,js,Ks),t);break}_c(e,js,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,js,Ks),r);break}_c(e,js,Ks);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=js,js=n,null!==t&&uc(t)),e}function uc(e){null===js?js=e:js.push.apply(js,e)}function sc(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ds))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,js,Ks),ic(e,Xe()),null}function lc(e,t){var n=Ds;Ds|=1;try{return e(t)}finally{0===(Ds=n)&&(zs=Xe()+500,Vi&&qi())}}function fc(e){null!==$s&&0===$s.tag&&0===(6&Ds)&&xc();var t=Ds;Ds|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ds=t))&&qi()}}function hc(){Os=Ps.current,Si(Ps)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Si(Di),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Ns=e=Pc(e.current,null),Rs=Os=t,Ls=0,Ms=null,Vs=Us=Fs=0,js=Bs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function vc(e,t){for(;;){var n=Ns;try{if(wa(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,mo=yo=po=null,ko=!1,bo=0,Is.current=null,null===n||null===n.return){Ls=1,Ms=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=mu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&yu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Bs?Bs=[o]:Bs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function pc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&Us)||sc(As,Rs)}function mc(e,t){var n=Ds;Ds|=2;var r=pc();for(As===e&&Rs===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){vc(e,i)}if(wa(),Ds=n,Ts.current=r,null!==Ns)throw Error(a(261));return As=null,Rs=0,Ls}function gc(){for(;null!==Ns;)bc(Ns)}function kc(){for(;null!==Ns&&!$e();)bc(Ns)}function bc(e){var t=Es(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?wc(e):Ns=t,Is.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Os)))return void(Ns=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Ls=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==$s);if(0!==(6&Ds))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ns=As=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ds;Ds|=4,Is.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var y=p.memoizedProps,m=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}p=ns,ns=!1}(e,n),ms(n,e),vr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),Ds=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,$s=e,Ys=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Hs,Hs=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,qi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==$s){var e=bt(Ys),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Ys=0,0!==(6&Ds))throw Error(a(331));var i=Ds;for(Ds|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,v=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=v,Zu=d;break}Zu=v}}}var p=o.alternate;if(null!==p){var y=p.child;if(null!==y){p.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Sc(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ds=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Pa(e,t=vu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Pa(t,e=pu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Xe()-qs?dc(e,0):Vs|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Da(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Ac(e,t){return We(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Nc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Rc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case D:return(e=Rc(13,n,t,i)).elementType=D,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case I:u=9;break e;case C:u=11;break e;case N:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Bc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(a),e}function qc(e){if(!e)return Ii;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ni(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Na(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Du(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Nu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Nu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Di.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Ku(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),za(t,r,i),Ga(t,r,i,n),Du(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[vi]=o.current,qr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[vi]=s.current,qr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[vi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ds)&&(zs=Xe()+500,qi()))}break;case 13:fc((function(){var t=Da(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Da(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,De=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ie,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,p(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),D(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=D(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=D(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,v=!1,p=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!p)if(null!==r(c))p=!0,O(_);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function _(e,n){p=!1,y&&(y=!1,g(T),T=-1),v=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!D());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,T=-1,I=5,C=-1;function D(){return!(t.unstable_now()-C<I)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){m(A,0)};function O(e){S=e,E||(E=!0,x())}function P(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,P(w,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,O(_))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Dn},SDK_VERSION:function(){return Lr},_DEFAULT_ENTRY_NAME:function(){return _r},_addComponent:function(){return Tr},_addOrOverwriteComponent:function(){return Ir},_apps:function(){return Er},_clearComponents:function(){return Nr},_components:function(){return Sr},_getProvider:function(){return Dr},_registerComponent:function(){return Cr},_removeServiceInstance:function(){return Ar},deleteApp:function(){return Vr},getApp:function(){return Fr},getApps:function(){return Ur},initializeApp:function(){return Mr},onLog:function(){return qr},registerVersion:function(){return jr},setLogLevel:function(){return zr}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||s(e,t)||c()}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return u(e)}(e)||f(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function p(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){var t=w();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,n)}}function E(){E=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new I(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==t&&n.call(g,a)&&(y=g);var k=p.prototype=h.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==v(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return d.prototype=p,r(k,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function S(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){S(a,r,i,o,u,"next",e)}function u(e){S(a,r,i,o,u,"throw",e)}o(void 0)}))}}function I(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t,n){return C=w()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},C.apply(null,arguments)}function D(e){var t="function"===typeof Map?new Map:void 0;return D=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return C(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},D(e)}function A(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var R,O="popstate";function P(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function L(e,t){return{usr:e.state,key:e.key,idx:t}}function M(e,t,n,r){return void 0===n&&(n=null),N({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?U(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function F(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function U(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function V(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=t.Pop,h=null,d=v();function v(){return(l.state||{idx:null}).idx}function p(){f=t.Pop;var e=v(),n=null==e?null:e-d;d=e,h&&h({action:f,location:m.location,delta:n})}function y(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:F(e);return P(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(N({},l.state,{idx:d}),""));var m={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(O,p),h=e,function(){u.removeEventListener(O,p),h=null}},createHref:function(e){return n(u,e)},createURL:y,encodeLocation:function(e){var t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=M(m.location,e,n);r&&r(i,e);var a=L(i,d=v()+1),o=m.createHref(i);try{l.pushState(a,"",o)}catch(s){u.location.assign(o)}c&&h&&h({action:f,location:m.location,delta:1})},replace:function(e,n){f=t.Replace;var i=M(m.location,e,n);r&&r(i,e);var a=L(i,d=v()),o=m.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:m.location,delta:0})},go:function(e){return l.go(e)}};return m}function B(e,t,n){return void 0===t&&(t=[]),void 0===n&&(n=new Set),e.map((function(e,r){var i=[].concat(h(t),[r]),a="string"===typeof e.id?e.id:i.join("-");return P(!0!==e.index||!e.children,"Cannot specify children on an index route"),P(!n.has(a),'Found a route id collision on id "'+a+"\".  Route id's must be globally unique within Data Router usages"),n.add(a),function(e){return!0===e.index}(e)?N({},e,{id:a}):N({},e,{id:a,children:e.children?B(e.children,i,n):void 0})}))}function j(e,t,n){void 0===n&&(n="/");var r=te(("string"===typeof t?U(t):t).pathname||"/",n);if(null==r)return null;var i=q(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=J(i[o],ee(r));return a}function q(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(P(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=oe([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(P(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),q(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:X(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=A(z(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function z(e){var t=e.split("/");if(0===t.length)return[];var n,r=o(n=t)||f(n)||s(n)||c(),i=r[0],a=r.slice(1),u=i.endsWith("?"),l=i.replace(/\?$/,"");if(0===a.length)return u?[l,""]:[l];var d=z(a.join("/")),v=[];return v.push.apply(v,h(d.map((function(e){return""===e?l:[l,e].join("/")})))),u&&v.push.apply(v,h(d)),v.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(R||(R={}));var K=/^:\w+$/,G=3,H=2,W=1,Q=10,$=-2,Y=function(e){return"*"===e};function X(e,t){var n=e.split("/"),r=n.length;return n.some(Y)&&(r+=$),t&&(r+=H),n.filter((function(e){return!Y(e)})).reduce((function(e,t){return e+(K.test(t)?G:""===t?W:Q)}),r)}function J(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Z({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:oe([i,l.pathname]),pathnameBase:ue(oe([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=oe([i,l.pathnameBase]))}return a}function Z(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);ne("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return ne(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function ee(e){try{return decodeURI(e)}catch(t){return ne(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function te(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ne(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function re(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ie(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function ae(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=U(e):(P(!(i=N({},e)).pathname||!i.pathname.includes("?"),re("?","pathname","search",i)),P(!i.pathname||!i.pathname.includes("#"),re("#","pathname","hash",i)),P(!i.search||!i.search.includes("#"),re("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?U(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:se(a),hash:ce(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var oe=function(e){return e.join("/").replace(/\/\/+/g,"/")},ue=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},se=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ce=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},le=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n)}(D(Error)),fe=function(){function e(t,n){var r,i=this;d(this,e),this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],P(t&&"object"===typeof t&&!Array.isArray(t),"defer() only accepts plain objects"),this.abortPromise=new Promise((function(e,t){return r=t})),this.controller=new AbortController;var a=function(){return r(new le("Deferred data aborted"))};this.unlistenAbortSignal=function(){return i.controller.signal.removeEventListener("abort",a)},this.controller.signal.addEventListener("abort",a),this.data=Object.entries(t).reduce((function(e,t){var n=l(t,2),r=n[0],a=n[1];return Object.assign(e,I({},r,i.trackPromise(r,a)))}),{}),this.done&&this.unlistenAbortSignal(),this.init=n}return m(e,[{key:"trackPromise",value:function(e,t){var n=this;if(!(t instanceof Promise))return t;this.deferredKeys.push(e),this.pendingKeysSet.add(e);var r=Promise.race([t,this.abortPromise]).then((function(t){return n.onSettle(r,e,null,t)}),(function(t){return n.onSettle(r,e,t)}));return r.catch((function(){})),Object.defineProperty(r,"_tracked",{get:function(){return!0}}),r}},{key:"onSettle",value:function(e,t,n,r){return this.controller.signal.aborted&&n instanceof le?(this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:function(){return n}}),Promise.reject(n)):(this.pendingKeysSet.delete(t),this.done&&this.unlistenAbortSignal(),n?(Object.defineProperty(e,"_error",{get:function(){return n}}),this.emit(!1,t),Promise.reject(n)):(Object.defineProperty(e,"_data",{get:function(){return r}}),this.emit(!1,t),r))}},{key:"emit",value:function(e,t){this.subscribers.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e){var t=this;return this.subscribers.add(e),function(){return t.subscribers.delete(e)}}},{key:"cancel",value:function(){var e=this;this.controller.abort(),this.pendingKeysSet.forEach((function(t,n){return e.pendingKeysSet.delete(n)})),this.emit(!0)}},{key:"resolveData",value:function(){var e=T(E().mark((function e(t){var n,r,i=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,this.done){e.next=7;break}return r=function(){return i.cancel()},t.addEventListener("abort",r),e.next=6,new Promise((function(e){i.subscribe((function(n){t.removeEventListener("abort",r),(n||i.done)&&e(n)}))}));case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"done",get:function(){return 0===this.pendingKeysSet.size}},{key:"unwrappedData",get:function(){return P(null!==this.data&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return Object.assign(e,I({},r,function(e){if(!function(e){return e instanceof Promise&&!0===e._tracked}(e))return e;if(e._error)throw e._error;return e._data}(i)))}),{})}},{key:"pendingKeys",get:function(){return Array.from(this.pendingKeysSet)}}]),e}();var he=m((function e(t,n,r,i){d(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function de(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ve=["post","put","patch","delete"],pe=new Set(ve),ye=["get"].concat(ve),me=new Set(ye),ge=new Set([301,302,303,307,308]),ke=new Set([307,308]),be={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},we={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},_e={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},xe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Se=!Ee;function Te(e){P(e.routes.length>0,"You must provide a non-empty routes array to createRouter");var n=B(e.routes),r=null,i=new Set,a=null,o=null,u=null,s=null!=e.hydrationData,c=j(n,e.history.location,e.basename),f=null;if(null==c){var d=je(404,{pathname:e.history.location.pathname}),v=Be(n);c=v.matches,f=I({},v.route.id,d)}var p,y,m=!c.some((function(e){return e.route.loader}))||null!=e.hydrationData,g={historyAction:e.history.action,location:e.history.location,matches:c,initialized:m,navigation:be,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||f,fetchers:new Map,blockers:new Map},k=t.Pop,b=!1,w=!1,_=!1,x=[],S=[],C=new Map,D=0,O=-1,L=new Map,F=new Set,U=new Map,V=new Map,q=new Map,z=!1;function K(e){g=N({},g,e),i.forEach((function(e){return e(g)}))}function G(n,r){var i,a,o,u=null!=g.actionData&&null!=g.navigation.formMethod&&Ye(g.navigation.formMethod)&&"loading"===g.navigation.state&&!0!==(null==(i=n.state)?void 0:i._isRedirect);o=r.actionData?Object.keys(r.actionData).length>0?r.actionData:null:u?g.actionData:null;var s,c=r.loaderData?Ue(g.loaderData,r.loaderData,r.matches||[],r.errors):g.loaderData,f=A(q);try{for(f.s();!(s=f.n()).done;){pe(l(s.value,1)[0])}}catch(d){f.e(d)}finally{f.f()}var h=!0===b||null!=g.navigation.formMethod&&Ye(g.navigation.formMethod)&&!0!==(null==(a=n.state)?void 0:a._isRedirect);K(N({},r,{actionData:o,loaderData:c,historyAction:k,location:n,initialized:!0,navigation:be,revalidation:"idle",restoreScrollPosition:Ce(n,r.matches||g.matches),preventScrollReset:h,blockers:new Map(g.blockers)})),w||k===t.Pop||(k===t.Push?e.history.push(n,n.state):k===t.Replace&&e.history.replace(n,n.state)),k=t.Pop,b=!1,w=!1,_=!1,x=[],S=[]}function H(e,t){return W.apply(this,arguments)}function W(){return W=T(E().mark((function n(r,i){var a,o,u,s,c,l,f,h,d,v;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("number"!==typeof r){n.next=3;break}return e.history.go(r),n.abrupt("return");case 3:if(a=Ie(r,i),o=a.path,u=a.submission,s=a.error,c=g.location,l=N({},l=M(g.location,o,i&&i.state),e.history.encodeLocation(l)),f=i&&null!=i.replace?i.replace:void 0,h=t.Push,!0===f?h=t.Replace:!1===f||null!=u&&Ye(u.formMethod)&&u.formAction===g.location.pathname+g.location.search&&(h=t.Replace),d=i&&"preventScrollReset"in i?!0===i.preventScrollReset:void 0,!(v=me({currentLocation:c,nextLocation:l,historyAction:h}))){n.next=15;break}return ye(v,{state:"blocked",location:l,proceed:function(){ye(v,{state:"proceeding",proceed:void 0,reset:void 0,location:l}),H(r,i)},reset:function(){pe(v),K({blockers:new Map(g.blockers)})}}),n.abrupt("return");case 15:return n.next=17,Q(h,l,{submission:u,pendingError:s,preventScrollReset:d,replace:i&&i.replace});case 17:return n.abrupt("return",n.sent);case 18:case"end":return n.stop()}}),n)}))),W.apply(this,arguments)}function Q(e,t,n){return $.apply(this,arguments)}function $(){return $=T(E().mark((function t(r,i,a){var o,u,s,c,l,f,h,d,v,p,m,_,x,S,T;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y&&y.abort(),y=null,k=r,w=!0===(a&&a.startUninterruptedRevalidation),Te(g.location,g.matches),b=!0===(a&&a.preventScrollReset),o=a&&a.overrideNavigation,u=j(n,i,e.basename)){t.next=14;break}return s=je(404,{pathname:i.pathname}),c=Be(n),l=c.matches,f=c.route,ge(),G(i,{matches:l,loaderData:{},errors:I({},f.id,s)}),t.abrupt("return");case 14:if(!Ke(g.location,i)||a&&a.submission&&Ye(a.submission.formMethod)){t.next=17;break}return G(i,{matches:u}),t.abrupt("return");case 17:if(y=new AbortController,h=Pe(e.history,i,y.signal,a&&a.submission),!a||!a.pendingError){t.next=23;break}v=I({},Ve(u).route.id,a.pendingError),t.next=34;break;case 23:if(!(a&&a.submission&&Ye(a.submission.formMethod))){t.next=34;break}return t.next=26,Y(h,i,a.submission,u,{replace:a.replace});case 26:if(!(p=t.sent).shortCircuited){t.next=29;break}return t.abrupt("return");case 29:d=p.pendingActionData,v=p.pendingActionError,m=N({state:"loading",location:i},a.submission),o=m,h=new Request(h.url,{signal:h.signal});case 34:return t.next=36,J(h,i,u,o,a&&a.submission,a&&a.replace,d,v);case 36:if(_=t.sent,x=_.shortCircuited,S=_.loaderData,T=_.errors,!x){t.next=42;break}return t.abrupt("return");case 42:y=null,G(i,N({matches:u},d?{actionData:d}:{},{loaderData:S,errors:T}));case 44:case"end":return t.stop()}}),t)}))),$.apply(this,arguments)}function Y(e,t,n,r,i){return X.apply(this,arguments)}function X(){return X=T(E().mark((function e(n,r,i,a,o){var u,s,c,l;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se(),K({navigation:N({state:"submitting",location:r},i)}),(s=rt(a,r)).route.action){e.next=8;break}u={type:R.error,error:je(405,{method:n.method,pathname:r.pathname,routeId:s.route.id})},e.next=13;break;case 8:return e.next=10,Re("action",n,s,a,p.basename);case 10:if(u=e.sent,!n.signal.aborted){e.next=13;break}return e.abrupt("return",{shortCircuited:!0});case 13:if(!We(u)){e.next=18;break}return c=o&&null!=o.replace?o.replace:u.location===g.location.pathname+g.location.search,e.next=17,ie(g,u,{submission:i,replace:c});case 17:return e.abrupt("return",{shortCircuited:!0});case 18:if(!He(u)){e.next=22;break}return l=Ve(a,s.route.id),!0!==(o&&o.replace)&&(k=t.Push),e.abrupt("return",{pendingActionData:{},pendingActionError:I({},l.route.id,u.error)});case 22:if(!Ge(u)){e.next=24;break}throw je(400,{type:"defer-action"});case 24:return e.abrupt("return",{pendingActionData:I({},s.route.id,u.data)});case 25:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function J(e,t,n,r,i,a,o,u){return Z.apply(this,arguments)}function Z(){return Z=T(E().mark((function t(n,r,i,a,o,u,s,c){var f,h,d,v,p,m,k,b,T,I,A,R,P,L,M,F,B;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((f=a)||(h=N({state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},o),f=h),d=o||(f.formMethod&&f.formAction&&f.formData&&f.formEncType?{formMethod:f.formMethod,formAction:f.formAction,formData:f.formData,formEncType:f.formEncType}:void 0),v=De(e.history,g,i,d,r,_,x,S,s,c,U),p=l(v,2),m=p[0],k=p[1],ge((function(e){return!(i&&i.some((function(t){return t.route.id===e})))||m&&m.some((function(t){return t.route.id===e}))})),0!==m.length||0!==k.length){t.next=8;break}return G(r,N({matches:i,loaderData:{},errors:c||null},s?{actionData:s}:{})),t.abrupt("return",{shortCircuited:!0});case 8:return w||(k.forEach((function(e){var t=g.fetchers.get(e.key),n={state:"loading",data:t&&t.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};g.fetchers.set(e.key,n)})),b=s||g.actionData,K(N({navigation:f},b?0===Object.keys(b).length?{actionData:null}:{actionData:b}:{},k.length>0?{fetchers:new Map(g.fetchers)}:{}))),O=++D,k.forEach((function(e){return C.set(e.key,y)})),t.next=13,oe(g.matches,i,m,k,n);case 13:if(T=t.sent,I=T.results,A=T.loaderResults,R=T.fetcherResults,!n.signal.aborted){t.next=19;break}return t.abrupt("return",{shortCircuited:!0});case 19:if(k.forEach((function(e){return C.delete(e.key)})),!(P=qe(I))){t.next=25;break}return t.next=24,ie(g,P,{replace:u});case 24:return t.abrupt("return",{shortCircuited:!0});case 25:return L=Fe(g,i,m,A,c,k,R,V),M=L.loaderData,F=L.errors,V.forEach((function(e,t){e.subscribe((function(n){(n||e.done)&&V.delete(t)}))})),de(),B=ve(O),t.abrupt("return",N({loaderData:M,errors:F},B||k.length>0?{fetchers:new Map(g.fetchers)}:{}));case 30:case"end":return t.stop()}}),t)}))),Z.apply(this,arguments)}function ee(e){return g.fetchers.get(e)||we}function te(){return te=T(E().mark((function t(r,i,a,o,u,s){var c,f,h,d,v,m,b,w,T,A,R,M,B,q,z,H,W,Q,$,Y,X,J,Z,ee,te,ne;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(se(),U.delete(r),o.route.action){t.next=6;break}return c=je(405,{method:s.formMethod,pathname:a,routeId:i}),ce(r,i,c),t.abrupt("return");case 6:return f=g.fetchers.get(r),h=N({state:"submitting"},s,{data:f&&f.data," _hasFetcherDoneAnything ":!0}),g.fetchers.set(r,h),K({fetchers:new Map(g.fetchers)}),d=new AbortController,v=Pe(e.history,a,d.signal,s),C.set(r,d),t.next=15,Re("action",v,o,u,p.basename);case 15:if(m=t.sent,!v.signal.aborted){t.next=19;break}return C.get(r)===d&&C.delete(r),t.abrupt("return");case 19:if(!We(m)){t.next=26;break}return C.delete(r),F.add(r),b=N({state:"loading"},s,{data:void 0," _hasFetcherDoneAnything ":!0}),g.fetchers.set(r,b),K({fetchers:new Map(g.fetchers)}),t.abrupt("return",ie(g,m,{isFetchActionRedirect:!0}));case 26:if(!He(m)){t.next=29;break}return ce(r,i,m.error),t.abrupt("return");case 29:if(!Ge(m)){t.next=31;break}throw je(400,{type:"defer-action"});case 31:return w=g.navigation.location||g.location,T=Pe(e.history,w,d.signal),P(A="idle"!==g.navigation.state?j(n,g.navigation.location,e.basename):g.matches,"Didn't find any matches after fetcher action"),R=++D,L.set(r,R),M=N({state:"loading",data:m.data},s,{" _hasFetcherDoneAnything ":!0}),g.fetchers.set(r,M),B=De(e.history,g,A,s,w,_,x,S,I({},o.route.id,m.data),void 0,U),q=l(B,2),z=q[0],(H=q[1]).filter((function(e){return e.key!==r})).forEach((function(e){var t=e.key,n=g.fetchers.get(t),r={state:"loading",data:n&&n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};g.fetchers.set(t,r),C.set(t,d)})),K({fetchers:new Map(g.fetchers)}),t.next=44,oe(g.matches,A,z,H,T);case 44:if(W=t.sent,Q=W.results,$=W.loaderResults,Y=W.fetcherResults,!d.signal.aborted){t.next=50;break}return t.abrupt("return");case 50:if(L.delete(r),C.delete(r),H.forEach((function(e){return C.delete(e.key)})),!(X=qe(Q))){t.next=56;break}return t.abrupt("return",ie(g,X));case 56:J=Fe(g,g.matches,z,$,void 0,H,Y,V),Z=J.loaderData,ee=J.errors,te={state:"idle",data:m.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0},g.fetchers.set(r,te),ne=ve(R),"loading"===g.navigation.state&&R>O?(P(k,"Expected pending action"),y&&y.abort(),G(g.navigation.location,{matches:A,loaderData:Z,errors:ee,fetchers:new Map(g.fetchers)})):(K(N({errors:ee,loaderData:Ue(g.loaderData,Z,A,ee)},ne?{fetchers:new Map(g.fetchers)}:{})),_=!1);case 61:case"end":return t.stop()}}),t)}))),te.apply(this,arguments)}function re(){return re=T(E().mark((function t(n,r,i,a,o,u){var s,c,l,f,h,d,v;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=g.fetchers.get(n),c=N({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},u,{data:s&&s.data," _hasFetcherDoneAnything ":!0}),g.fetchers.set(n,c),K({fetchers:new Map(g.fetchers)}),l=new AbortController,f=Pe(e.history,i,l.signal),C.set(n,l),t.next=9,Re("loader",f,a,o,p.basename);case 9:if(!Ge(h=t.sent)){t.next=17;break}return t.next=13,Ze(h,f.signal,!0);case 13:if(t.t0=t.sent,t.t0){t.next=16;break}t.t0=h;case 16:h=t.t0;case 17:if(C.get(n)===l&&C.delete(n),!f.signal.aborted){t.next=20;break}return t.abrupt("return");case 20:if(!We(h)){t.next=24;break}return t.next=23,ie(g,h);case 23:return t.abrupt("return");case 24:if(!He(h)){t.next=29;break}return d=Ve(g.matches,r),g.fetchers.delete(n),K({fetchers:new Map(g.fetchers),errors:I({},d.route.id,h.error)}),t.abrupt("return");case 29:P(!Ge(h),"Unhandled fetcher deferred data"),v={state:"idle",data:h.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0},g.fetchers.set(n,v),K({fetchers:new Map(g.fetchers)});case 33:case"end":return t.stop()}}),t)}))),re.apply(this,arguments)}function ie(e,t,n){return ae.apply(this,arguments)}function ae(){return ae=T(E().mark((function n(r,i,a){var o,u,s,c,l,f,h,d,v,p,m,g,k;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=(u=void 0===a?{}:a).submission,c=u.replace,l=u.isFetchActionRedirect,i.revalidate&&(_=!0),P(f=M(r.location,i.location,N({_isRedirect:!0},l?{_isFetchActionRedirect:!0}:{})),"Expected a location on the redirect navigation"),!xe.test(i.location)||!Ee||"undefined"===typeof(null==(o=window)?void 0:o.location)){n.next=9;break}if(h=e.history.createURL(i.location).origin,window.location.origin===h){n.next=9;break}return c?window.location.replace(i.location):window.location.assign(i.location),n.abrupt("return");case 9:if(y=null,d=!0===c?t.Replace:t.Push,v=r.navigation,p=v.formMethod,m=v.formAction,g=v.formEncType,k=v.formData,!s&&p&&m&&k&&g&&(s={formMethod:p,formAction:m,formEncType:g,formData:k}),!(ke.has(i.status)&&s&&Ye(s.formMethod))){n.next=18;break}return n.next=16,Q(d,f,{submission:N({},s,{formAction:i.location}),preventScrollReset:b});case 16:n.next=20;break;case 18:return n.next=20,Q(d,f,{overrideNavigation:{state:"loading",location:f,formMethod:s?s.formMethod:void 0,formAction:s?s.formAction:void 0,formEncType:s?s.formEncType:void 0,formData:s?s.formData:void 0},preventScrollReset:b});case 20:case"end":return n.stop()}}),n)}))),ae.apply(this,arguments)}function oe(e,t,n,r,i){return ue.apply(this,arguments)}function ue(){return ue=T(E().mark((function t(n,r,i,a,o){var u,s,c;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([].concat(h(i.map((function(e){return Re("loader",o,e,r,p.basename)}))),h(a.map((function(t){return Re("loader",Pe(e.history,t.path,o.signal),t.match,t.matches,p.basename)})))));case 2:return u=t.sent,s=u.slice(0,i.length),c=u.slice(i.length),t.next=7,Promise.all([Xe(n,i,s,o.signal,!1,g.loaderData),Xe(n,a.map((function(e){return e.match})),c,o.signal,!0)]);case 7:return t.abrupt("return",{results:u,loaderResults:s,fetcherResults:c});case 8:case"end":return t.stop()}}),t)}))),ue.apply(this,arguments)}function se(){var e;_=!0,(e=x).push.apply(e,h(ge())),U.forEach((function(e,t){C.has(t)&&(S.push(t),fe(t))}))}function ce(e,t,n){var r=Ve(g.matches,t);le(e),K({errors:I({},r.route.id,n),fetchers:new Map(g.fetchers)})}function le(e){C.has(e)&&fe(e),U.delete(e),L.delete(e),F.delete(e),g.fetchers.delete(e)}function fe(e){var t=C.get(e);P(t,"Expected fetch controller: "+e),t.abort(),C.delete(e)}function he(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i={state:"idle",data:ee(r).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};g.fetchers.set(r,i)}}catch(a){n.e(a)}finally{n.f()}}function de(){var e,t=[],n=A(F);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=g.fetchers.get(r);P(i,"Expected fetcher: "+r),"loading"===i.state&&(F.delete(r),t.push(r))}}catch(a){n.e(a)}finally{n.f()}he(t)}function ve(e){var t,n=[],r=A(L);try{for(r.s();!(t=r.n()).done;){var i=l(t.value,2),a=i[0];if(i[1]<e){var o=g.fetchers.get(a);P(o,"Expected fetcher: "+a),"loading"===o.state&&(fe(a),L.delete(a),n.push(a))}}}catch(u){r.e(u)}finally{r.f()}return he(n),n.length>0}function pe(e){g.blockers.delete(e),q.delete(e)}function ye(e,t){var n=g.blockers.get(e)||_e;P("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state),g.blockers.set(e,t),K({blockers:new Map(g.blockers)})}function me(e){var t=e.currentLocation,n=e.nextLocation,r=e.historyAction;if(0!==q.size){q.size>1&&ne(!1,"A router only supports one blocker at a time");var i=Array.from(q.entries()),a=l(i[i.length-1],2),o=a[0],u=a[1],s=g.blockers.get(o);if(!s||"proceeding"!==s.state)return u({currentLocation:t,nextLocation:n,historyAction:r})?o:void 0}}function ge(e){var t=[];return V.forEach((function(n,r){e&&!e(r)||(n.cancel(),t.push(r),V.delete(r))})),t}function Te(e,t){if(a&&o&&u){var n=t.map((function(e){return nt(e,g.loaderData)})),r=o(e,n)||e.key;a[r]=u()}}function Ce(e,t){if(a&&o&&u){var n=t.map((function(e){return nt(e,g.loaderData)})),r=o(e,n)||e.key,i=a[r];if("number"===typeof i)return i}return null}return p={get basename(){return e.basename},get state(){return g},get routes(){return n},initialize:function(){return r=e.history.listen((function(t){var n=t.action,r=t.location,i=t.delta;if(!z){ne(0===q.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");var a=me({currentLocation:g.location,nextLocation:r,historyAction:n});return a&&null!=i?(z=!0,e.history.go(-1*i),void ye(a,{state:"blocked",location:r,proceed:function(){ye(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(i)},reset:function(){pe(a),K({blockers:new Map(p.state.blockers)})}})):Q(n,r)}z=!1})),g.initialized||Q(t.Pop,g.location),p},subscribe:function(e){return i.add(e),function(){return i.delete(e)}},enableScrollRestoration:function(e,t,n){if(a=e,u=t,o=n||function(e){return e.key},!s&&g.navigation===be){s=!0;var r=Ce(g.location,g.matches);null!=r&&K({restoreScrollPosition:r})}return function(){a=null,u=null,o=null}},navigate:H,fetch:function(t,r,i,a){if(Se)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");C.has(t)&&fe(t);var o=j(n,i,e.basename);if(o){var u=Ie(i,a,!0),s=u.path,c=u.submission,l=rt(o,s);b=!0===(a&&a.preventScrollReset),c&&Ye(c.formMethod)?function(e,t,n,r,i,a){te.apply(this,arguments)}(t,r,s,l,o,c):(U.set(t,{routeId:r,path:s,match:l,matches:o}),function(e,t,n,r,i,a){re.apply(this,arguments)}(t,r,s,l,o,c))}else ce(t,r,je(404,{pathname:i}))},revalidate:function(){se(),K({revalidation:"loading"}),"submitting"!==g.navigation.state&&("idle"!==g.navigation.state?Q(k||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation}):Q(g.historyAction,g.location,{startUninterruptedRevalidation:!0}))},createHref:function(t){return e.history.createHref(t)},encodeLocation:function(t){return e.history.encodeLocation(t)},getFetcher:ee,deleteFetcher:le,dispose:function(){r&&r(),i.clear(),y&&y.abort(),g.fetchers.forEach((function(e,t){return le(t)})),g.blockers.forEach((function(e,t){return pe(t)}))},getBlocker:function(e,t){var n=g.blockers.get(e)||_e;return q.get(e)!==t&&q.set(e,t),n},deleteBlocker:pe,_internalFetchControllers:C,_internalActiveDeferreds:V},p}Symbol("deferred");function Ie(e,t,n){void 0===n&&(n=!1);var r,i="string"===typeof e?e:F(e);if(!t||!function(e){return null!=e&&"formData"in e}(t))return{path:i};if(t.formMethod&&!$e(t.formMethod))return{path:i,error:je(405,{method:t.formMethod})};if(t.formData&&Ye((r={formMethod:t.formMethod||"get",formAction:ze(i),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}).formMethod))return{path:i,submission:r};var a=U(i),o=Le(t.formData);return n&&a.search&&tt(a.search)&&o.append("index",""),a.search="?"+o,{path:F(a),submission:r}}function Ce(e,t){var n=e;if(t){var r=e.findIndex((function(e){return e.route.id===t}));r>=0&&(n=e.slice(0,r))}return n}function De(e,t,n,r,i,a,o,u,s,c,l){var f=c?Object.values(c)[0]:s?Object.values(s)[0]:void 0,h=e.createURL(t.location),d=e.createURL(i),v=a||h.toString()===d.toString()||h.search!==d.search,p=c?Object.keys(c)[0]:void 0,y=Ce(n,p).filter((function(e,n){if(null==e.route.loader)return!1;if(function(e,t,n){var r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||o.some((function(t){return t===e.route.id})))return!0;var i=t.matches[n],a=e;return Ne(e,N({currentUrl:h,currentParams:i.params,nextUrl:d,nextParams:a.params},r,{actionResult:f,defaultShouldRevalidate:v||Ae(i,a)}))})),m=[];return l&&l.forEach((function(e,i){n.some((function(t){return t.route.id===e.routeId}))&&((u.includes(i)||Ne(e.match,N({currentUrl:h,currentParams:t.matches[t.matches.length-1].params,nextUrl:d,nextParams:n[n.length-1].params},r,{actionResult:f,defaultShouldRevalidate:v})))&&m.push(N({key:i},e)))})),[y,m]}function Ae(e,t){var n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ne(e,t){if(e.route.shouldRevalidate){var n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}function Re(e,t,n,r,i,a,o,u){return Oe.apply(this,arguments)}function Oe(){return(Oe=T(E().mark((function e(t,n,r,i,a,o,u,s){var c,l,f,h,d,v,p,y,m,g,k,b,w,_,x,S;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a="/"),void 0===o&&(o=!1),void 0===u&&(u=!1),h=new Promise((function(e,t){return f=t})),d=function(){return f()},n.signal.addEventListener("abort",d),e.prev=6,P(v=r.route[t],"Could not find the "+t+' to run on the "'+r.route.id+'" route'),e.next=11,Promise.race([v({request:n,params:r.params,context:s}),h]);case 11:P(void 0!==(l=e.sent),"You defined "+("action"===t?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`."),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),c=R.error,l=e.t0;case 19:return e.prev=19,n.signal.removeEventListener("abort",d),e.finish(19);case 22:if(!Qe(l)){e.next=47;break}if(p=l.status,!ge.has(p)){e.next=32;break}if(P(y=l.headers.get("Location"),"Redirects returned/thrown from loaders/actions must have a Location header"),xe.test(y)?o||(w=new URL(n.url),(_=y.startsWith("//")?new URL(w.protocol+y):new URL(y)).origin===w.origin&&(y=_.pathname+_.search+_.hash)):(m=i.slice(0,i.indexOf(r)+1),g=ie(m).map((function(e){return e.pathnameBase})),P(F(k=ae(y,g,new URL(n.url).pathname)),"Unable to resolve redirect location: "+y),a&&(b=k.pathname,k.pathname="/"===b?a:oe([a,b])),y=F(k)),!o){e.next=31;break}throw l.headers.set("Location",y),l;case 31:return e.abrupt("return",{type:R.redirect,status:p,location:y,revalidate:null!==l.headers.get("X-Remix-Revalidate")});case 32:if(!u){e.next=34;break}throw{type:c||R.data,response:l};case 34:if(!(S=l.headers.get("Content-Type"))||!/\bapplication\/json\b/.test(S)){e.next=41;break}return e.next=38,l.json();case 38:x=e.sent,e.next=44;break;case 41:return e.next=43,l.text();case 43:x=e.sent;case 44:if(c!==R.error){e.next=46;break}return e.abrupt("return",{type:c,error:new he(p,l.statusText,x),headers:l.headers});case 46:return e.abrupt("return",{type:R.data,data:x,statusCode:l.status,headers:l.headers});case 47:if(c!==R.error){e.next=49;break}return e.abrupt("return",{type:c,error:l});case 49:if(!(l instanceof fe)){e.next=51;break}return e.abrupt("return",{type:R.deferred,deferredData:l});case 51:return e.abrupt("return",{type:R.data,data:l});case 52:case"end":return e.stop()}}),e,null,[[6,15,19,22]])})))).apply(this,arguments)}function Pe(e,t,n,r){var i=e.createURL(ze(t)).toString(),a={signal:n};if(r&&Ye(r.formMethod)){var o=r.formMethod,u=r.formEncType,s=r.formData;a.method=o.toUpperCase(),a.body="application/x-www-form-urlencoded"===u?Le(s):s}return new Request(i,a)}function Le(e){var t,n=new URLSearchParams,r=A(e.entries());try{for(r.s();!(t=r.n()).done;){var i=l(t.value,2),a=i[0],o=i[1];n.append(a,o instanceof File?o.name:o)}}catch(u){r.e(u)}finally{r.f()}return n}function Me(e,t,n,r,i){var a,o={},u=null,s=!1,c={};return n.forEach((function(n,l){var f=t[l].route.id;if(P(!We(n),"Cannot handle redirect results in processLoaderData"),He(n)){var h=Ve(e,f),d=n.error;r&&(d=Object.values(r)[0],r=void 0),null==(u=u||{})[h.route.id]&&(u[h.route.id]=d),o[f]=void 0,s||(s=!0,a=de(n.error)?n.error.status:500),n.headers&&(c[f]=n.headers)}else Ge(n)?(i.set(f,n.deferredData),o[f]=n.deferredData.data):o[f]=n.data,null==n.statusCode||200===n.statusCode||s||(a=n.statusCode),n.headers&&(c[f]=n.headers)})),r&&(u=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:u,statusCode:a||200,loaderHeaders:c}}function Fe(e,t,n,r,i,a,o,u){for(var s=Me(t,n,r,i,u),c=s.loaderData,l=s.errors,f=0;f<a.length;f++){var h=a[f],d=h.key,v=h.match;P(void 0!==o&&void 0!==o[f],"Did not find corresponding fetcher result");var p=o[f];if(He(p)){var y=Ve(e.matches,v.route.id);l&&l[y.route.id]||(l=N({},l,I({},y.route.id,p.error))),e.fetchers.delete(d)}else if(We(p))P(!1,"Unhandled fetcher revalidation redirect");else if(Ge(p))P(!1,"Unhandled fetcher deferred data");else{var m={state:"idle",data:p.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(d,m)}}return{loaderData:c,errors:l}}function Ue(e,t,n,r){var i,a=N({},t),o=A(n);try{for(o.s();!(i=o.n()).done;){var u=i.value.route.id;if(t.hasOwnProperty(u)?void 0!==t[u]&&(a[u]=t[u]):void 0!==e[u]&&(a[u]=e[u]),r&&r.hasOwnProperty(u))break}}catch(s){o.e(s)}finally{o.f()}return a}function Ve(e,t){return(t?e.slice(0,e.findIndex((function(e){return e.route.id===t}))+1):h(e)).reverse().find((function(e){return!0===e.route.hasErrorBoundary}))||e[0]}function Be(e){var t=e.find((function(e){return e.index||!e.path||"/"===e.path}))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function je(e,t){var n=void 0===t?{}:t,r=n.pathname,i=n.routeId,a=n.method,o=n.type,u="Unknown Server Error",s="Unknown @remix-run/router error";return 400===e?(u="Bad Request",a&&r&&i?s="You made a "+a+' request to "'+r+'" but did not provide a `loader` for route "'+i+'", so there is no way to handle the request.':"defer-action"===o&&(s="defer() is not supported in actions")):403===e?(u="Forbidden",s='Route "'+i+'" does not match URL "'+r+'"'):404===e?(u="Not Found",s='No route matches URL "'+r+'"'):405===e&&(u="Method Not Allowed",a&&r&&i?s="You made a "+a.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+i+'", so there is no way to handle the request.':a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new he(e||500,u,new Error(s),!0)}function qe(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(We(n))return n}}function ze(e){return F(N({},"string"===typeof e?U(e):e,{hash:""}))}function Ke(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function Ge(e){return e.type===R.deferred}function He(e){return e.type===R.error}function We(e){return(e&&e.type)===R.redirect}function Qe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function $e(e){return me.has(e)}function Ye(e){return pe.has(e)}function Xe(e,t,n,r,i,a){return Je.apply(this,arguments)}function Je(){return(Je=T(E().mark((function e(t,n,r,i,a,o){var u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=E().mark((function e(u){var s,c,l,f;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r[u],c=n[u],l=t.find((function(e){return e.route.id===c.route.id})),f=null!=l&&!Ae(l,c)&&void 0!==(o&&o[c.route.id]),!Ge(s)||!a&&!f){e.next=7;break}return e.next=7,Ze(s,i,a).then((function(e){e&&(r[u]=e||r[u])}));case 7:case"end":return e.stop()}}),e)})),s=0;case 2:if(!(s<r.length)){e.next=7;break}return e.delegateYield(u(s),"t0",4);case 4:s++,e.next=2;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t,n){return et.apply(this,arguments)}function et(){return et=T(E().mark((function e(t,n,r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,t.deferredData.resolveData(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:R.data,data:t.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:R.error,error:e.t0});case 14:return e.abrupt("return",{type:R.data,data:t.deferredData.data});case 15:case"end":return e.stop()}}),e,null,[[7,11]])}))),et.apply(this,arguments)}function tt(e){return new URLSearchParams(e).getAll("index").some((function(e){return""===e}))}function nt(e,t){var n=e.route,r=e.pathname,i=e.params;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function rt(e,t){var n="string"===typeof t?U(t).search:t.search;if(e[e.length-1].route.index&&tt(n||""))return e[e.length-1];var r=ie(e);return r[r.length-1]}function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},it.apply(this,arguments)}var at="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ot=r.useState,ut=r.useEffect,st=r.useLayoutEffect,ct=r.useDebugValue;function lt(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!at(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement;var ft=i.useSyncExternalStore,ht=r.createContext(null);var dt=r.createContext(null);var vt=r.createContext(null);var pt=r.createContext(null);var yt=r.createContext(null);var mt=r.createContext({outlet:null,matches:[]});var gt=r.createContext(null);function kt(){return null!=r.useContext(yt)}function bt(){return kt()||P(!1),r.useContext(yt).location}function wt(){kt()||P(!1);var e=r.useContext(pt),t=e.basename,n=e.navigator,i=r.useContext(mt).matches,a=bt().pathname,o=JSON.stringify(ie(i).map((function(e){return e.pathnameBase}))),u=r.useRef(!1);r.useEffect((function(){u.current=!0}));var s=r.useCallback((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=ae(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:oe([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return s}var _t=r.createContext(null);function xt(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(mt).matches,a=bt().pathname,o=JSON.stringify(ie(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return ae(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function Et(){var e=function(){var e,t=r.useContext(gt),n=At(Tt.UseRouteError),i=Nt(Tt.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=de(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var St,Tt,It=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return m(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(mt.Provider,{value:this.props.routeContext},r.createElement(gt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function Ct(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(ht);return a&&a.static&&a.staticContext&&n.route.errorElement&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(mt.Provider,{value:t},i)}function Dt(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||P(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=n?o.route.errorElement||r.createElement(Et,null):null,l=t.concat(i.slice(0,u+1)),f=function(){return r.createElement(Ct,{match:o,routeContext:{outlet:e,matches:l}},s?c:void 0!==o.route.element?o.route.element:e)};return n&&(o.route.errorElement||0===u)?r.createElement(It,{location:n.location,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function At(e){var t=r.useContext(dt);return t||P(!1),t}function Nt(e){var t=function(e){var t=r.useContext(mt);return t||P(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||P(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(St||(St={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Tt||(Tt={}));var Rt;function Ot(e){var t=e.fallbackElement,n=e.router,i=ft(n.subscribe,(function(){return n.state}),(function(){return n.state})),a=r.useMemo((function(){return{createHref:n.createHref,encodeLocation:n.encodeLocation,go:function(e){return n.navigate(e)},push:function(e,t,r){return n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})},replace:function(e,t,r){return n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})}}}),[n]),o=n.basename||"/";return r.createElement(r.Fragment,null,r.createElement(ht.Provider,{value:{router:n,navigator:a,static:!1,basename:o}},r.createElement(dt.Provider,{value:i},r.createElement(Mt,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:a},n.state.initialized?r.createElement(Ft,null):t))),null)}function Pt(e){return function(e){var t=r.useContext(mt).outlet;return t?r.createElement(_t.Provider,{value:e},t):t}(e.context)}function Lt(e){P(!1)}function Mt(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;kt()&&P(!1);var d=i.replace(/^\/*/,"/"),v=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=U(u));var p=u,y=p.pathname,m=void 0===y?"/":y,g=p.search,k=void 0===g?"":g,b=p.hash,w=void 0===b?"":b,_=p.state,x=void 0===_?null:_,E=p.key,S=void 0===E?"default":E,T=r.useMemo((function(){var e=te(m,d);return null==e?null:{pathname:e,search:k,hash:w,state:x,key:S}}),[d,m,k,w,x,S]);return null==T?null:r.createElement(pt.Provider,{value:v},r.createElement(yt.Provider,{children:o,value:{location:T,navigationType:c}}))}function Ft(e){var n=e.children,i=e.location,a=r.useContext(ht);return function(e,n){kt()||P(!1);var i,a=r.useContext(pt).navigator,o=r.useContext(dt),u=r.useContext(mt).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,bt());if(n){var h,d="string"===typeof n?U(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||P(!1),i=d}else i=f;var v=i.pathname||"/",p=j(e,{pathname:"/"===l?v:v.slice(l.length)||"/"}),y=Dt(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:oe([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:oe([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,o||void 0);return n&&y?r.createElement(yt.Provider,{value:{location:it({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:t.Pop}},y):y}(a&&!n?a.router.routes:Vt(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Rt||(Rt={}));var Ut=new Promise((function(){}));r.Component;function Vt(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e))if(e.type!==r.Fragment){e.type!==Lt&&P(!1),e.props.index&&e.props.children&&P(!1);var a=[].concat(h(t),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=Vt(e.props.children,a)),n.push(o)}else n.push.apply(n,Vt(e.props.children,t))})),n}function Bt(e){return e.map((function(e){var t=it({},e);return null==t.hasErrorBoundary&&(t.hasErrorBoundary=null!=t.errorElement),t.children&&(t.children=Bt(t.children)),t}))}function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jt.apply(this,arguments)}function qt(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var zt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Kt=["aria-current","caseSensitive","className","end","style","to","children"];function Gt(){var e,t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=jt({},t,{errors:Ht(t.errors)})),t}function Ht(e){if(!e)return null;for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i=l(r[n],2),a=i[0],o=i[1];if(o&&"RouteErrorResponse"===o.__type)t[a]=new he(o.status,o.statusText,o.data,!0===o.internal);else if(o&&"Error"===o.__type){var u=new Error(o.message);u.stack="",t[a]=u}else t[a]=o}return t}var Wt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Qt=r.forwardRef((function(e,t){var n,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=qt(e,zt),d=!1;if(Wt&&"string"===typeof l&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(l)){n=l;var v=new URL(window.location.href),p=l.startsWith("//")?new URL(v.protocol+l):new URL(l);p.origin===v.origin?l=p.pathname+p.search+p.hash:d=!0}var y=function(e,t){var n=(void 0===t?{}:t).relative;kt()||P(!1);var i=r.useContext(pt),a=i.basename,o=i.navigator,u=xt(e,{relative:n}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:oe([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),m=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=n.preventScrollReset,s=n.relative,c=wt(),l=bt(),f=xt(e,{relative:s});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:F(l)===F(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return r.createElement("a",jt({},h,{href:n||y,onClick:d||o?i:function(e){i&&i(e),e.defaultPrevented||m(e)},ref:t,target:c}))}));var $t=r.forwardRef((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,a=e.caseSensitive,o=void 0!==a&&a,u=e.className,s=void 0===u?"":u,c=e.end,l=void 0!==c&&c,f=e.style,h=e.to,d=e.children,v=qt(e,Kt),p=xt(h,{relative:v.relative}),y=bt(),m=r.useContext(dt),g=r.useContext(pt).navigator,k=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,b=y.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;o||(b=b.toLowerCase(),w=w?w.toLowerCase():null,k=k.toLowerCase());var _,x=b===k||!l&&b.startsWith(k)&&"/"===b.charAt(k.length),E=null!=w&&(w===k||!l&&w.startsWith(k)&&"/"===w.charAt(k.length)),S=x?i:void 0;_="function"===typeof s?s({isActive:x,isPending:E}):[s,x?"active":null,E?"pending":null].filter(Boolean).join(" ");var T="function"===typeof f?f({isActive:x,isPending:E}):f;return r.createElement(Qt,jt({},v,{"aria-current":S,className:_,ref:t,style:T,to:h}),"function"===typeof d?d({isActive:x,isPending:E}):d)}));var Yt,Xt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Yt||(Yt={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Xt||(Xt={}));var Jt={header:"MainNavigation_header__mGtIN",list:"MainNavigation_list__tXqey",active:"MainNavigation_active__cNJ3y"},Zt=n(184);var en=function(){return(0,Zt.jsx)("header",{className:Jt.header,children:(0,Zt.jsx)("nav",{children:(0,Zt.jsxs)("ul",{className:Jt.list,children:[(0,Zt.jsx)("li",{children:(0,Zt.jsx)($t,{to:"/",className:function(e){return e.isActive?Jt.active:void 0},end:!0,children:"SplashScreen"})}),(0,Zt.jsx)("li",{children:(0,Zt.jsx)($t,{to:"/authscreen",className:function(e){return e.isActive?Jt.active:void 0},children:"AuthScreen"})}),(0,Zt.jsx)("li",{children:(0,Zt.jsx)($t,{to:"/textscreen",className:function(e){return e.isActive?Jt.active:void 0},children:"TextScreen"})}),(0,Zt.jsx)("li",{children:(0,Zt.jsx)($t,{to:"/photoscreen",className:function(e){return e.isActive?Jt.active:void 0},children:"PhotoScreen"})})]})})})};var tn=function(){return(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)(en,{}),(0,Zt.jsxs)("main",{children:[(0,Zt.jsx)("h1",{children:"An error occured!"}),(0,Zt.jsx)("p",{children:"Could not find this page!"})]})]})},nn="Section_section__Q2bhl",rn=function(e){return(0,Zt.jsx)("section",{className:nn,children:e.children})},an="TaskItem_task__6-pMe",on=function(e){return(0,Zt.jsx)("li",{className:an,children:e.children})},un="Tasks_container__pCB6d",sn=function(e){var t=(0,Zt.jsx)("h2",{children:"No tasks found. Start adding some!"});e.items.length>0&&(t=(0,Zt.jsx)("ul",{children:e.items.map((function(e){return(0,Zt.jsx)(on,{children:e.text},e.id)}))}));var n=t;return e.error&&(n=(0,Zt.jsx)("button",{onClick:e.onFetch,children:"Try again"})),e.loading&&(n="Loading tasks..."),(0,Zt.jsx)(rn,{children:(0,Zt.jsx)("div",{className:un,children:n})})},cn="TaskForm_form__n18PZ",ln=function(e){var t=(0,r.useRef)();return(0,Zt.jsxs)("form",{className:cn,onSubmit:function(n){n.preventDefault();var r=t.current.value;r.trim().length>0&&e.onEnterTask(r)},children:[(0,Zt.jsx)("input",{type:"text",ref:t}),(0,Zt.jsx)("button",{children:e.loading?"Sending...":"Add Task"})]})},fn=function(e){var t=l((0,r.useState)(!1),2),n=t[0],i=t[1],a=l((0,r.useState)(null),2),o=a[0],u=a[1],s=function(){var t=T(E().mark((function t(n){var r,a,o,s;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),u(null),t.prev=2,t.next=5,fetch("https://nordstone-third-tab-default-rtdb.firebaseio.com/tasks.json",{method:"POST",body:JSON.stringify({text:n}),headers:{"Content-Type":"application/json"}});case 5:if((r=t.sent).ok){t.next=8;break}throw new Error("Request failed!");case 8:return t.next=10,r.json();case 10:a=t.sent,o=a.name,s={id:o,text:n},e.onAddTask(s),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),u(t.t0.message||"Something went wrong!");case 19:i(!1);case 20:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(e){return t.apply(this,arguments)}}();return(0,Zt.jsxs)(rn,{children:[(0,Zt.jsx)(ln,{onEnterTask:s,loading:n}),o&&(0,Zt.jsx)("p",{children:o})]})};var hn=function(){var e=l((0,r.useState)(!1),2),t=e[0],n=e[1],i=l((0,r.useState)(null),2),a=i[0],o=i[1],u=l((0,r.useState)([]),2),s=u[0],c=u[1],f=function(){var e=T(E().mark((function e(t){var r,i,a,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),o(null),e.prev=2,e.next=5,fetch("https://nordstone-third-tab-default-rtdb.firebaseio.com/tasks.json");case 5:if((r=e.sent).ok){e.next=8;break}throw new Error("Request failed!");case 8:return e.next=10,r.json();case 10:for(u in i=e.sent,a=[],i)a.push({id:u,text:i[u].text});c(a),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),o(e.t0.message||"Something went wrong!");case 19:n(!1);case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){f()}),[]),(0,Zt.jsxs)(r.Fragment,{children:[(0,Zt.jsx)(fn,{onAddTask:function(e){c((function(t){return t.concat(e)}))}}),(0,Zt.jsx)(sn,{items:s,loading:t,error:a,onFetch:f})]})};var dn=function(){return(0,Zt.jsx)(Zt.Fragment,{children:(0,Zt.jsx)("h1",{children:"My Home Page"})})};var vn=function(){return(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)(en,{}),(0,Zt.jsx)("main",{children:(0,Zt.jsx)(Pt,{})})]})},pn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},yn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},mn=function(e){return function(e){var t=pn(e);return yn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},gn=function(e){try{return yn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function kn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=kn(e[n],t[n]));return e}var bn=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},wn=function(){try{return bn()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&gn(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},_n=function(){var e;return null===(e=wn())||void 0===e?void 0:e.config},xn=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return m(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function En(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[mn(JSON.stringify({alg:"none",type:"JWT"})),mn(JSON.stringify(a)),""].join(".")}function Sn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Tn(){var e,t=null===(e=wn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function In(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Cn="FirebaseError",Dn=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name=Cn,Object.setPrototypeOf(_(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(_(a),An.prototype.create),a}return m(n)}(D(Error)),An=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return m(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Nn,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Dn(n,a,t)}}]),e}();var Nn=/\{\$([^}]+)}/g;function Rn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function On(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Pn(u)&&Pn(s)){if(!On(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Pn(e){return null!==e&&"object"===typeof e}function Ln(e,t){var n=new Mn(e,t);return n.subscribe.bind(n)}var Mn=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return m(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=A(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Fn),void 0===r.error&&(r.error=Fn),void 0===r.complete&&(r.complete=Fn);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Fn(){}function Un(e){return e&&e._delegate?e._delegate:e}var Vn=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return m(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Bn="[DEFAULT]",jn=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return m(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new xn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Bn})}catch(s){}var t,n=A(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=T(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=A(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Fg){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Bn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Fg){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn;return this.component?this.component.multipleInstances?e:Bn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var qn,zn,Kn=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return m(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new jn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Gn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(zn||(zn={}));var Hn={debug:zn.DEBUG,verbose:zn.VERBOSE,info:zn.INFO,warn:zn.WARN,error:zn.ERROR,silent:zn.SILENT},Wn=zn.INFO,Qn=(I(qn={},zn.DEBUG,"log"),I(qn,zn.VERBOSE,"log"),I(qn,zn.INFO,"info"),I(qn,zn.WARN,"warn"),I(qn,zn.ERROR,"error"),qn),$n=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Qn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Yn=function(){function e(t){d(this,e),this.name=t,this._logLevel=Wn,this._logHandler=$n,this._userLogHandler=null,Gn.push(this)}return m(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in zn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Hn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zn.DEBUG].concat(t)),this._logHandler.apply(this,[this,zn.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zn.VERBOSE].concat(t)),this._logHandler.apply(this,[this,zn.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zn.INFO].concat(t)),this._logHandler.apply(this,[this,zn.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zn.WARN].concat(t)),this._logHandler.apply(this,[this,zn.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,zn.ERROR].concat(t)),this._logHandler.apply(this,[this,zn.ERROR].concat(t))}}]),e}();function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zn,er,tr=function(e,t){return t.some((function(t){return e instanceof t}))};var nr=new WeakMap,rr=new WeakMap,ir=new WeakMap,ar=new WeakMap,or=new WeakMap;var ur={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return rr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ir.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function sr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(er||(er=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(fr(this),n),lr(nr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return lr(e.apply(fr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[fr(this),t].concat(r));return ir.set(a,t.sort?t.sort():[t]),lr(a)}}function cr(e){return"function"===typeof e?sr(e):(e instanceof IDBTransaction&&function(e){if(!rr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));rr.set(e,t)}}(e),tr(e,Zn||(Zn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ur):e)}function lr(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(lr(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&nr.set(t,e)})).catch((function(){})),or.set(t,e),t}(e);if(ar.has(e))return ar.get(e);var t=cr(e);return t!==e&&(ar.set(e,t),or.set(t,e)),t}var fr=function(e){return or.get(e)};var hr,dr,vr=["get","getKey","getAll","getAllKeys","count"],pr=["put","add","delete","clear"],yr=new Map;function mr(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(yr.get(t))return yr.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=pr.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||vr.includes(n))){var a=function(){var e=T(E().mark((function e(t){var a,o,u,s,c,l,f=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return yr.set(t,a),a}}}ur=function(e){return Jn(Jn({},e),{},{get:function(t,n,r){return mr(t,n)||e.get(t,n,r)},has:function(t,n){return!!mr(t,n)||e.has(t,n)}})}(ur);var gr=function(){function e(t){d(this,e),this.container=t}return m(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var kr="@firebase/app",br="0.9.3",wr=new Yn("@firebase/app"),_r="[DEFAULT]",xr=(I(hr={},kr,"fire-core"),I(hr,"@firebase/app-compat","fire-core-compat"),I(hr,"@firebase/analytics","fire-analytics"),I(hr,"@firebase/analytics-compat","fire-analytics-compat"),I(hr,"@firebase/app-check","fire-app-check"),I(hr,"@firebase/app-check-compat","fire-app-check-compat"),I(hr,"@firebase/auth","fire-auth"),I(hr,"@firebase/auth-compat","fire-auth-compat"),I(hr,"@firebase/database","fire-rtdb"),I(hr,"@firebase/database-compat","fire-rtdb-compat"),I(hr,"@firebase/functions","fire-fn"),I(hr,"@firebase/functions-compat","fire-fn-compat"),I(hr,"@firebase/installations","fire-iid"),I(hr,"@firebase/installations-compat","fire-iid-compat"),I(hr,"@firebase/messaging","fire-fcm"),I(hr,"@firebase/messaging-compat","fire-fcm-compat"),I(hr,"@firebase/performance","fire-perf"),I(hr,"@firebase/performance-compat","fire-perf-compat"),I(hr,"@firebase/remote-config","fire-rc"),I(hr,"@firebase/remote-config-compat","fire-rc-compat"),I(hr,"@firebase/storage","fire-gcs"),I(hr,"@firebase/storage-compat","fire-gcs-compat"),I(hr,"@firebase/firestore","fire-fst"),I(hr,"@firebase/firestore-compat","fire-fst-compat"),I(hr,"fire-js","fire-js"),I(hr,"firebase","fire-js-all"),hr),Er=new Map,Sr=new Map;function Tr(e,t){try{e.container.addComponent(t)}catch(n){wr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ir(e,t){e.container.addOrOverwriteComponent(t)}function Cr(e){var t=e.name;if(Sr.has(t))return wr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Sr.set(t,e);var n,r=A(Er.values());try{for(r.s();!(n=r.n()).done;){Tr(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Dr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ar(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_r;Dr(e,t).clearInstance(n)}function Nr(){Sr.clear()}var Rr=(I(dr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),I(dr,"bad-app-name","Illegal App name: '{$appName}"),I(dr,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),I(dr,"app-deleted","Firebase App named '{$appName}' already deleted"),I(dr,"no-options","Need to provide options, when not being deployed to hosting via source."),I(dr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),I(dr,"invalid-log-argument","First argument to `onLog` must be null or a function."),I(dr,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),I(dr,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),I(dr,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),I(dr,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),dr),Or=new An("app","Firebase",Rr),Pr=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vn("app",(function(){return i}),"PUBLIC"))}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}]),e}(),Lr="9.17.1";function Mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:_r,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Or.create("bad-app-name",{appName:String(i)});if(n||(n=_n()),!n)throw Or.create("no-options");var a=Er.get(i);if(a){if(On(n,a.options)&&On(r,a.config))return a;throw Or.create("duplicate-app",{appName:i})}var o,u=new Kn(i),s=A(Sr.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Pr(n,r,u);return Er.set(i,l),l}function Fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r,t=Er.get(e);if(!t&&e===_r)return Mr();if(!t)throw Or.create("no-app",{appName:e});return t}function Ur(){return Array.from(Er.values())}function Vr(e){return Br.apply(this,arguments)}function Br(){return(Br=T(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Er.has(n)){e.next=6;break}return Er.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jr(e,t,n){var r,i=null!==(r=xr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void wr.warn(u.join(" "))}Cr(new Vn("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function qr(e,t){if(null!==e&&"function"!==typeof e)throw Or.create("invalid-log-argument");!function(e,t){var n,r=A(Gn);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Hn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:zn[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function zr(e){var t;t=e,Gn.forEach((function(e){e.setLogLevel(t)}))}var Kr="firebase-heartbeat-database",Gr=1,Hr="firebase-heartbeat-store",Wr=null;function Qr(){return Wr||(Wr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=lr(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(lr(u.result),e.oldVersion,e.newVersion,lr(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(Kr,Gr,{upgrade:function(e,t){if(0===t)e.createObjectStore(Hr)}}).catch((function(e){throw Or.create("idb-open",{originalErrorMessage:e.message})}))),Wr}function $r(e){return Yr.apply(this,arguments)}function Yr(){return Yr=T(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qr();case 3:return n=e.sent,e.abrupt("return",n.transaction(Hr).objectStore(Hr).get(Zr(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Dn?wr.warn(e.t0.message):(r=Or.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),wr.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Yr.apply(this,arguments)}function Xr(e,t){return Jr.apply(this,arguments)}function Jr(){return Jr=T(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qr();case 3:return r=e.sent,i=r.transaction(Hr,"readwrite"),a=i.objectStore(Hr),e.next=8,a.put(n,Zr(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Dn?wr.warn(e.t0.message):(o=Or.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),wr.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Jr.apply(this,arguments)}function Zr(e){return"".concat(e.name,"!").concat(e.options.appId)}var ei=1024,ti=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new oi(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return m(e,[{key:"triggerHeartbeat",value:function(){var e=T(E().mark((function e(){var t,n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ni(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=T(E().mark((function e(){var t,n,r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ni(),n=ri(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=mn(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ni(){return(new Date).toISOString().substring(0,10)}function ri(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei,r=[],i=e.slice(),a=A(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ui(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ui(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ii,ai,oi=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return m(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(In()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=T(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,$r(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=T(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Xr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=T(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Xr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ui(e){return mn(JSON.stringify({version:2,heartbeats:e})).length}ii="",Cr(new Vn("platform-logger",(function(e){return new gr(e)}),"PRIVATE")),Cr(new Vn("heartbeat",(function(e){return new ti(e)}),"PRIVATE")),jr(kr,br,ii),jr(kr,br,"esm2017"),jr("fire-js","");var si=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,Tr(t,new Vn("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Vr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Tr(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ir(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ci=(I(ai={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),I(ai,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ai),li=new An("app-compat","Firebase",ci);var fi=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Mr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Rn(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:jr,setLogLevel:zr,onLog:qr,apps:null,SDK_VERSION:Lr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Cr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw li.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&kn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Rn(n,e=e||_r))throw li.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(si);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){kn(n,e)},createSubscribe:Ln,ErrorFactory:An,deepExtend:kn}),n}(),hi=new Yn("@firebase/app-compat"),di="@firebase/app-compat",vi="0.2.3";if("object"===typeof self&&self.self===self&&void 0!==self.firebase){hi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var pi=self.firebase.SDK_VERSION;pi&&pi.indexOf("LITE")>=0&&hi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var yi=fi;!function(e){jr(di,vi,e)}();function mi(){return mi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},mi.apply(this,arguments)}yi.registerVersion("firebase","9.17.1","app-compat");var gi,ki="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},bi={},wi=wi||{},_i=ki||self;function xi(){}function Ei(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Si(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ti="closure_uid_"+(1e9*Math.random()>>>0),Ii=0;function Ci(e,t,n){return e.call.apply(e.bind,arguments)}function Di(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ai(e,t,n){return(Ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ci:Di).apply(null,arguments)}function Ni(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ri(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Oi(){this.s=this.s,this.o=this.o}Oi.prototype.s=!1,Oi.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Ti)&&e[Ti]||(e[Ti]=++Ii))},Oi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Pi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Li(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Mi(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Ei(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Fi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Fi.prototype.h=function(){this.defaultPrevented=!0};var Ui=function(){if(!_i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{_i.addEventListener("test",xi,t),_i.removeEventListener("test",xi,t)}catch(n){}return e}();function Vi(e){return/^[\s\xa0]*$/.test(e)}var Bi=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ji(e,t){return e<t?-1:e>t?1:0}function qi(){var e=_i.navigator;return e&&(e=e.userAgent)?e:""}function zi(e){return-1!=qi().indexOf(e)}function Ki(e){return Ki[" "](e),e}Ki[" "]=xi;var Gi,Hi=zi("Opera"),Wi=zi("Trident")||zi("MSIE"),Qi=zi("Edge"),$i=Qi||Wi,Yi=zi("Gecko")&&!(-1!=qi().toLowerCase().indexOf("webkit")&&!zi("Edge"))&&!(zi("Trident")||zi("MSIE"))&&!zi("Edge"),Xi=-1!=qi().toLowerCase().indexOf("webkit")&&!zi("Edge");function Ji(){var e=_i.document;return e?e.documentMode:void 0}e:{var Zi="",ea=function(){var e=qi();return Yi?/rv:([^\);]+)(\)|;)/.exec(e):Qi?/Edge\/([\d\.]+)/.exec(e):Wi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Xi?/WebKit\/(\S+)/.exec(e):Hi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ea&&(Zi=ea?ea[1]:""),Wi){var ta=Ji();if(null!=ta&&ta>parseFloat(Zi)){Gi=String(ta);break e}}Gi=Zi}var na,ra={};function ia(){return function(e){var t=ra;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Bi(String(Gi)).split("."),n=Bi("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=ji(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||ji(0==a[2].length,0==o[2].length)||ji(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(_i.document&&Wi){var aa=Ji();na=aa||(parseInt(Gi,10)||void 0)}else na=void 0;var oa=na;function ua(e,t){if(Fi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Yi){e:{try{Ki(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:sa[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ua.X.h.call(this)}}Ri(ua,Fi);var sa={2:"touch",3:"pen",4:"mouse"};ua.prototype.h=function(){ua.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ca="closure_listenable_"+(1e6*Math.random()|0),la=0;function fa(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++la,this.ba=this.ea=!1}function ha(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function da(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function va(e){var t={};for(var n in e)t[n]=e[n];return t}var pa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ya(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<pa.length;a++)n=pa[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ma(e){this.src=e,this.g={},this.h=0}function ga(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Pi(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ha(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ka(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}ma.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ka(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new fa(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var ba="closure_lm_"+(1e6*Math.random()|0),wa={};function _a(e,t,n,r,i){if(r&&r.once)return Ea(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)_a(e,t[a],n,r,i);return null}return n=Na(n),e&&e[ca]?e.N(t,n,Si(r)?!!r.capture:!!r,i):xa(e,t,n,!1,r,i)}function xa(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Si(i)?!!i.capture:!!i,u=Da(e);if(u||(e[ba]=u=new ma(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ca;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ui||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ia(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ea(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ea(e,t[a],n,r,i);return null}return n=Na(n),e&&e[ca]?e.O(t,n,Si(r)?!!r.capture:!!r,i):xa(e,t,n,!0,r,i)}function Sa(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Sa(e,t[a],n,r,i);else r=Si(r)?!!r.capture:!!r,n=Na(n),e&&e[ca]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ka(a=e.g[t],n,r,i))&&(ha(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Da(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ka(t,n,r,i)),(n=-1<e?t[e]:null)&&Ta(n))}function Ta(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[ca])ga(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ia(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Da(t))?(ga(n,e),0==n.h&&(n.src=null,t[ba]=null)):ha(e)}}}function Ia(e){return e in wa?wa[e]:wa[e]="on"+e}function Ca(e,t){if(e.ba)e=!0;else{t=new ua(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Ta(e),e=n.call(r,t)}return e}function Da(e){return(e=e[ba])instanceof ma?e:null}var Aa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Na(e){return"function"===typeof e?e:(e[Aa]||(e[Aa]=function(t){return e.handleEvent(t)}),e[Aa])}function Ra(){Oi.call(this),this.i=new ma(this),this.P=this,this.I=null}function Oa(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Fi(t,e);else if(t instanceof Fi)t.target=t.target||e;else{var i=t;ya(t=new Fi(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Pa(o,r,!0,t)&&i}if(i=Pa(o=t.g=e,r,!0,t)&&i,i=Pa(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Pa(o=t.g=n[a],r,!1,t)&&i}function Pa(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&ga(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ri(Ra,Oi),Ra.prototype[ca]=!0,Ra.prototype.removeEventListener=function(e,t,n,r){Sa(this,e,t,n,r)},Ra.prototype.M=function(){if(Ra.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ha(n[r]);delete t.g[e],t.h--}}this.I=null},Ra.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ra.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var La=_i.JSON.stringify;function Ma(){var e=Ka,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Fa,Ua=function(){function e(){d(this,e),this.h=this.g=null}return m(e,[{key:"add",value:function(e,t){var n=Va.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Va=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return m(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Ba}),(function(e){return e.reset()})),Ba=function(){function e(){d(this,e),this.next=this.g=this.h=null}return m(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ja(e){_i.setTimeout((function(){throw e}),0)}function qa(e,t){Fa||function(){var e=_i.Promise.resolve(void 0);Fa=function(){e.then(Ga)}}(),za||(Fa(),za=!0),Ka.add(e,t)}var za=!1,Ka=new Ua;function Ga(){for(var e;e=Ma();){try{e.h.call(e.g)}catch(n){ja(n)}var t=Va;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}za=!1}function Ha(e,t){Ra.call(this),this.h=e||1,this.g=t||_i,this.j=Ai(this.lb,this),this.l=Date.now()}function Wa(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Qa(e,t,n){if("function"===typeof e)n&&(e=Ai(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ai(e.handleEvent,e)}return 2147483647<Number(t)?-1:_i.setTimeout(e,t||0)}function $a(e){e.g=Qa((function(){e.g=null,e.i&&(e.i=!1,$a(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ri(Ha,Ra),(gi=Ha.prototype).ca=!1,gi.R=null,gi.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Oa(this,"tick"),this.ca&&(Wa(this),this.start()))}},gi.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gi.M=function(){Ha.X.M.call(this),Wa(this),delete this.g};var Ya=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return m(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:$a(this)}},{key:"M",value:function(){mi(b(n.prototype),"M",this).call(this),this.g&&(_i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Oi);function Xa(e){Oi.call(this),this.h=e,this.g={}}Ri(Xa,Oi);var Ja=[];function Za(e,t,n,r){Array.isArray(n)||(n&&(Ja[0]=n.toString()),n=Ja);for(var i=0;i<n.length;i++){var a=_a(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function eo(e){da(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ta(e)}),e),e.g={}}function to(){this.g=!0}function no(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return La(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Xa.prototype.M=function(){Xa.X.M.call(this),eo(this)},Xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},to.prototype.Aa=function(){this.g=!1},to.prototype.info=function(){};var ro={},io=null;function ao(){return io=io||new Ra}function oo(e){Fi.call(this,ro.Pa,e)}function uo(e){var t=ao();Oa(t,new oo(t))}function so(e,t){Fi.call(this,ro.STAT_EVENT,e),this.stat=t}function co(e){var t=ao();Oa(t,new so(t,e))}function lo(e,t){Fi.call(this,ro.Qa,e),this.size=t}function fo(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return _i.setTimeout((function(){e()}),t)}ro.Pa="serverreachability",Ri(oo,Fi),ro.STAT_EVENT="statevent",Ri(so,Fi),ro.Qa="timingevent",Ri(lo,Fi);var ho={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},vo={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function po(){}function yo(e){return e.h||(e.h=e.i())}function mo(){}po.prototype.h=null;var go,ko={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function bo(){Fi.call(this,"d")}function wo(){Fi.call(this,"c")}function _o(){}function xo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Xa(this),this.O=So,e=$i?125:void 0,this.T=new Ha(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Eo}function Eo(){this.i=null,this.g="",this.h=!1}Ri(bo,Fi),Ri(wo,Fi),Ri(_o,po),_o.prototype.g=function(){return new XMLHttpRequest},_o.prototype.i=function(){return{}},go=new _o;var So=45e3,To={},Io={};function Co(e,t,n){e.K=1,e.v=Wo(qo(t)),e.s=n,e.P=!0,Do(e,null)}function Do(e,t){e.F=Date.now(),Oo(e),e.A=qo(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),ou(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Eo,e.g=us(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Ya(Ai(e.La,e,e.g),e.N)),Za(e.S,e.g,"readystatechange",e.ib),t=e.H?va(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),uo(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Ao(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function No(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ro(e,n))==Io){4==t&&(e.o=4,co(14),i=!1),no(e.j,e.m,null,"[Incomplete Response]");break}if(r==To){e.o=4,co(15),no(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}no(e.j,e.m,r,null),Uo(e,r)}Ao(e)&&r!=Io&&r!=To&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,co(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zu(t),t.K=!0,co(11))):(no(e.j,e.m,n,"[Invalid Chunked Response]"),Fo(e),Mo(e))}function Ro(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Io:(n=Number(t.substring(n,r)),isNaN(n)?To:(r+=1)+n>t.length?Io:(t=t.substr(r,n),e.C=r+n,t))}function Oo(e){e.V=Date.now()+e.O,Po(e,e.O)}function Po(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=fo(Ai(e.gb,e),t)}function Lo(e){e.B&&(_i.clearTimeout(e.B),e.B=null)}function Mo(e){0==e.l.G||e.I||ns(e.l,e)}function Fo(e){Lo(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Wa(e.T),eo(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Uo(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||vu(n.h,e)))if(!e.J&&vu(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ts(n),Gu(n)}Ju(n),co(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=fo(Ai(n.cb,n),6e3));if(1>=du(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else is(n,11)}else if((e.J||n.g==e)&&ts(n),!Vi(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(pu(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Ho(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=os(r,r.H?r.ka:null,r.V),d.J){yu(r.h,d);var v=d,p=r.J;p&&v.setTimeout(p),v.B&&(Lo(v),Oo(v)),r.g=d}else Xu(r);0<n.i.length&&Wu(n)}else"stop"!=a[0]&&"close"!=a[0]||is(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?is(n,7):Ku(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}uo()}catch(a){}}function Vo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ei(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Ei(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Ei(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(gi=xo.prototype).setTimeout=function(e){this.O=e},gi.ib=function(e){e=e.target;var t=this.L;t&&3==Uu(e)?t.l():this.La(e)},gi.La=function(e){try{if(e==this.g)e:{var t=Uu(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||$i||this.g&&(this.h.h||this.g.fa()||Vu(this.g)))){this.I||4!=t||7==n||uo(),Lo(this);var r=this.g.aa();this.Y=r;t:if(Ao(this)){var i=Vu(this.g);e="";var a=i.length,o=4==Uu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Fo(this),Mo(this);var u="";break t}this.h.i=new _i.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vi(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,co(12),Fo(this),Mo(this);break e}no(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Uo(this,r)}this.P?(No(this,t,u),$i&&this.i&&3==t&&(Za(this.S,this.T,"tick",this.hb),this.T.start())):(no(this.j,this.m,u,null),Uo(this,u)),4==t&&Fo(this),this.i&&!this.I&&(4==t?ns(this.l,this):(this.i=!1,Oo(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,co(12)):(this.o=0,co(13)),Fo(this),Mo(this)}}}catch(t){}},gi.hb=function(){if(this.g){var e=Uu(this.g),t=this.g.fa();this.C<t.length&&(Lo(this),No(this,e,t),this.i&&4!=e&&Oo(this))}},gi.cancel=function(){this.I=!0,Fo(this)},gi.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(uo(),co(17)),Fo(this),this.o=2,Mo(this)):Po(this,this.V-e)};var Bo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jo(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof jo){this.h=void 0!==t?t:e.h,zo(this,e.j),this.s=e.s,this.g=e.g,Ko(this,e.m),this.l=e.l,t=e.i;var n=new nu;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Go(this,n),this.o=e.o}else e&&(n=String(e).match(Bo))?(this.h=!!t,zo(this,n[1]||"",!0),this.s=Qo(n[2]||""),this.g=Qo(n[3]||"",!0),Ko(this,n[4]),this.l=Qo(n[5]||"",!0),Go(this,n[6]||"",!0),this.o=Qo(n[7]||"")):(this.h=!!t,this.i=new nu(null,this.h))}function qo(e){return new jo(e)}function zo(e,t,n){e.j=n?Qo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ko(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Go(e,t,n){t instanceof nu?(e.i=t,function(e,t){t&&!e.j&&(ru(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(iu(this,t),ou(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=$o(t,eu)),e.i=new nu(t,e.h))}function Ho(e,t,n){e.i.set(t,n)}function Wo(e){return Ho(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Qo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function $o(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Yo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Yo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}jo.prototype.toString=function(){var e=[],t=this.j;t&&e.push($o(t,Xo,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push($o(t,Xo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push($o(n,"/"==n.charAt(0)?Zo:Jo,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",$o(n,tu)),e.join("")};var Xo=/[#\/\?@]/g,Jo=/[#\?:]/g,Zo=/[#\?]/g,eu=/[#\?@]/g,tu=/#/g;function nu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ru(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function iu(e,t){ru(e),t=uu(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function au(e,t){return ru(e),t=uu(e,t),e.g.has(t)}function ou(e,t,n){iu(e,t),0<n.length&&(e.i=null,e.g.set(uu(e,t),Li(n)),e.h+=n.length)}function uu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(gi=nu.prototype).add=function(e,t){ru(this),this.i=null,e=uu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},gi.forEach=function(e,t){ru(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},gi.oa=function(){ru(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},gi.W=function(e){ru(this);var t=[];if("string"===typeof e)au(this,e)&&(t=t.concat(this.g.get(uu(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},gi.set=function(e,t){return ru(this),this.i=null,au(this,e=uu(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},gi.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},gi.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var su=m((function e(t,n){d(this,e),this.h=t,this.g=n}));function cu(e){this.l=e||fu,_i.PerformanceNavigationTiming?e=0<(e=_i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(_i.g&&_i.g.Ga&&_i.g.Ga()&&_i.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lu,fu=10;function hu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function du(e){return e.h?1:e.g?e.g.size:0}function vu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function pu(e,t){e.g?e.g.add(t):e.h=t}function yu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function mu(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=A(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Li(e.i)}function gu(){}function ku(){this.g=new gu}function bu(e,t,n){var r=n||"";try{Vo(e,(function(e,n){var i=e;Si(e)&&(i=La(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function wu(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function _u(e){this.l=e.ac||null,this.j=e.jb||!1}function xu(e,t){Ra.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Eu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cu.prototype.cancel=function(){if(this.i=mu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=A(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},gu.prototype.stringify=function(e){return _i.JSON.stringify(e,void 0)},gu.prototype.parse=function(e){return _i.JSON.parse(e,void 0)},Ri(_u,po),_u.prototype.g=function(){return new xu(this.l,this.j)},_u.prototype.i=(lu={},function(){return lu}),Ri(xu,Ra);var Eu=0;function Su(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Tu(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Iu(e)}function Iu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(gi=xu.prototype).open=function(e,t){if(this.readyState!=Eu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Iu(this)},gi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||_i).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},gi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tu(this)),this.readyState=Eu},gi.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Iu(this)),this.g&&(this.readyState=3,Iu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof _i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Su(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},gi.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tu(this):Iu(this),3==this.readyState&&Su(this)}},gi.Va=function(e){this.g&&(this.response=this.responseText=e,Tu(this))},gi.Ua=function(e){this.g&&(this.response=e,Tu(this))},gi.ga=function(){this.g&&Tu(this)},gi.setRequestHeader=function(e,t){this.v.append(e,t)},gi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},gi.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(xu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Cu=_i.JSON.parse;function Du(e){Ra.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Au,this.K=this.L=!1}Ri(Du,Ra);var Au="",Nu=/^https?$/i,Ru=["POST","PUT"];function Ou(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Pu(e),Mu(e)}function Pu(e){e.D||(e.D=!0,Oa(e,"complete"),Oa(e,"error"))}function Lu(e){if(e.h&&"undefined"!=typeof wi&&(!e.C[1]||4!=Uu(e)||2!=e.aa()))if(e.v&&4==Uu(e))Qa(e.Ha,0,e);else if(Oa(e,"readystatechange"),4==Uu(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Bo)[1]||null;if(!a&&_i.self&&_i.self.location){var o=_i.self.location.protocol;a=o.substr(0,o.length-1)}i=!Nu.test(a?a.toLowerCase():"")}t=i}if(t)Oa(e,"complete"),Oa(e,"success");else{e.m=6;try{var u=2<Uu(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Pu(e)}}finally{Mu(e)}}}function Mu(e,t){if(e.g){Fu(e);var n=e.g,r=e.C[0]?xi:null;e.g=null,e.C=null,t||Oa(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Fu(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(_i.clearTimeout(e.A),e.A=null)}function Uu(e){return e.g?e.g.readyState:0}function Vu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Au:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(xs){return null}}function Bu(e){var t="";return da(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ju(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Bu(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ho(e,t,n))}function qu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zu(e){this.Ca=0,this.i=[],this.j=new to,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=qu("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=qu("baseRetryDelayMs",5e3,e),this.bb=qu("retryDelaySeedMs",1e4,e),this.$a=qu("forwardChannelMaxRetries",2,e),this.ta=qu("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new cu(e&&e.concurrentRequestLimit),this.Fa=new ku,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ku(e){if(Hu(e),3==e.G){var t=e.U++,n=qo(e.F);Ho(n,"SID",e.I),Ho(n,"RID",t),Ho(n,"TYPE","terminate"),$u(e,n),(t=new xo(e,e.j,t,void 0)).K=2,t.v=Wo(qo(n)),n=!1,_i.navigator&&_i.navigator.sendBeacon&&(n=_i.navigator.sendBeacon(t.v.toString(),"")),!n&&_i.Image&&((new Image).src=t.v,n=!0),n||(t.g=us(t.l,null),t.g.da(t.v)),t.F=Date.now(),Oo(t)}as(e)}function Gu(e){e.g&&(Zu(e),e.g.cancel(),e.g=null)}function Hu(e){Gu(e),e.u&&(_i.clearTimeout(e.u),e.u=null),ts(e),e.h.cancel(),e.m&&("number"===typeof e.m&&_i.clearTimeout(e.m),e.m=null)}function Wu(e){hu(e.h)||e.m||(e.m=!0,qa(e.Ja,e),e.C=0)}function Qu(e,t){var n;n=t?t.m:e.U++;var r=qo(e.F);Ho(r,"SID",e.I),Ho(r,"RID",n),Ho(r,"AID",e.T),$u(e,r),e.o&&e.s&&ju(r,e.o,e.s),n=new xo(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Yu(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),pu(e.h,n),Co(n,r,t)}function $u(e,t){e.ia&&da(e.ia,(function(e,n){Ho(t,n,e)})),e.l&&Vo({},(function(e,n){Ho(t,n,e)}))}function Yu(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Ai(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{bu(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Xu(e){e.g||e.u||(e.Z=1,qa(e.Ia,e),e.A=0)}function Ju(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=fo(Ai(e.Ia,e),rs(e,e.A)),e.A++,!0)}function Zu(e){null!=e.B&&(_i.clearTimeout(e.B),e.B=null)}function es(e){e.g=new xo(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=qo(e.sa);Ho(t,"RID","rpc"),Ho(t,"SID",e.I),Ho(t,"CI",e.L?"0":"1"),Ho(t,"AID",e.T),Ho(t,"TYPE","xmlhttp"),$u(e,t),e.o&&e.s&&ju(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Wo(qo(t)),n.s=null,n.P=!0,Do(n,e)}function ts(e){null!=e.v&&(_i.clearTimeout(e.v),e.v=null)}function ns(e,t){var n=null;if(e.g==t){ts(e),Zu(e),e.g=null;var r=2}else{if(!vu(e.h,t))return;n=t.D,yu(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Oa(r=ao(),new lo(r,n)),Wu(e)}else Xu(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(du(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=fo(Ai(e.Ja,e,t),rs(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ju(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:is(e,5);break;case 4:is(e,10);break;case 3:is(e,6);break;default:is(e,2)}}function rs(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function is(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Ai(e.kb,e);n||(n=new jo("//www.google.com/images/cleardot.gif"),_i.location&&"http"==_i.location.protocol||zo(n,"https"),Wo(n)),function(e,t){var n=new to;if(_i.Image){var r=new Image;r.onload=Ni(wu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ni(wu,n,r,"TestLoadImage: error",!1,t),r.onabort=Ni(wu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ni(wu,n,r,"TestLoadImage: timeout",!1,t),_i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else co(2);e.G=0,e.l&&e.l.va(t),as(e),Hu(e)}function as(e){if(e.G=0,e.la=[],e.l){var t=mu(e.h);0==t.length&&0==e.i.length||(Mi(e.la,t),Mi(e.la,e.i),e.h.i.length=0,Li(e.i),e.i.length=0),e.l.ua()}}function os(e,t,n){var r=n instanceof jo?qo(n):new jo(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Ko(r,r.m);else{var i=_i.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new jo(null,void 0);r&&zo(a,r),t&&(a.g=t),i&&Ko(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Ho(r,n,t),Ho(r,"VER",e.ma),$u(e,r),r}function us(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Du(new _u({jb:!0})):new Du(e.ra)).Ka(e.H),t}function ss(){}function cs(){if(Wi&&!(10<=Number(oa)))throw Error("Environmental error: no available transport.")}function ls(e,t){Ra.call(this),this.g=new zu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Vi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Vi(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ds(this)}function fs(e){bo.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hs(){wo.call(this),this.status=1}function ds(e){this.g=e}(gi=Du.prototype).Ka=function(e){this.L=e},gi.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():go.g(),this.C=this.u?yo(this.u):yo(go),this.g.onreadystatechange=Ai(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Ou(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=A(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=_i.FormData&&e instanceof _i.FormData,!(0<=Pi(Ru,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=A(n);try{for(c.s();!(s=c.n()).done;){var f=l(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(v){c.e(v)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fu(this),0<this.B&&((this.K=function(e){return Wi&&ia()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ai(this.qa,this)):this.A=Qa(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Ou(this,u)}},gi.qa=function(){"undefined"!=typeof wi&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Oa(this,"timeout"),this.abort(8))},gi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Oa(this,"complete"),Oa(this,"abort"),Mu(this))},gi.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mu(this,!0)),Du.X.M.call(this)},gi.Ha=function(){this.s||(this.F||this.v||this.l?Lu(this):this.fb())},gi.fb=function(){Lu(this)},gi.aa=function(){try{return 2<Uu(this)?this.g.status:-1}catch(lu){return-1}},gi.fa=function(){try{return this.g?this.g.responseText:""}catch(lu){return""}},gi.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Cu(t)}},gi.Ea=function(){return this.m},gi.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(gi=zu.prototype).ma=8,gi.G=1,gi.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new xo(this,this.j,e,void 0),n=this.s;if(this.S&&(n?ya(n=va(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Yu(this,t,r),Ho(i=qo(this.F),"RID",e),Ho(i,"CVER",22),this.D&&Ho(i,"X-HTTP-Session-Id",this.D),$u(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Bu(n)))+"&"+r:this.o&&ju(i,this.o,n)),pu(this.h,t),this.Ya&&Ho(i,"TYPE","init"),this.O?(Ho(i,"$req",r),Ho(i,"SID","null"),t.Z=!0,Co(t,i,null)):Co(t,i,r),this.G=2}}else 3==this.G&&(e?Qu(this,e):0==this.i.length||hu(this.h)||Qu(this))},gi.Ia=function(){if(this.u=null,es(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=fo(Ai(this.eb,this),e)}},gi.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,co(10),Gu(this),es(this))},gi.cb=function(){null!=this.v&&(this.v=null,Gu(this),Ju(this),co(19))},gi.kb=function(e){e?(this.j.info("Successfully pinged google.com"),co(2)):(this.j.info("Failed to ping google.com"),co(1))},(gi=ss.prototype).xa=function(){},gi.wa=function(){},gi.va=function(){},gi.ua=function(){},gi.Ra=function(){},cs.prototype.g=function(e,t){return new ls(e,t)},Ri(ls,Ra),ls.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;co(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=os(e,null,e.V),Wu(e)},ls.prototype.close=function(){Ku(this.g)},ls.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=La(e),e=n);t.i.push(new su(t.ab++,e)),3==t.G&&Wu(t)},ls.prototype.M=function(){this.g.l=null,delete this.j,Ku(this.g),delete this.g,ls.X.M.call(this)},Ri(fs,bo),Ri(hs,wo),Ri(ds,ss),ds.prototype.xa=function(){Oa(this.g,"a")},ds.prototype.wa=function(e){Oa(this.g,new fs(e))},ds.prototype.va=function(e){Oa(this.g,new hs)},ds.prototype.ua=function(){Oa(this.g,"b")},cs.prototype.createWebChannel=cs.prototype.g,ls.prototype.send=ls.prototype.u,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,ho.NO_ERROR=0,ho.TIMEOUT=8,ho.HTTP_ERROR=6,vo.COMPLETE="complete",mo.EventType=ko,ko.OPEN="a",ko.CLOSE="b",ko.ERROR="c",ko.MESSAGE="d",Ra.prototype.listen=Ra.prototype.N,Du.prototype.listenOnce=Du.prototype.O,Du.prototype.getLastError=Du.prototype.Oa,Du.prototype.getLastErrorCode=Du.prototype.Ea,Du.prototype.getStatus=Du.prototype.aa,Du.prototype.getResponseJson=Du.prototype.Sa,Du.prototype.getResponseText=Du.prototype.fa,Du.prototype.send=Du.prototype.da,Du.prototype.setWithCredentials=Du.prototype.Ka;var vs=bi.createWebChannelTransport=function(){return new cs},ps=bi.getStatEventTarget=function(){return ao()},ys=bi.ErrorCode=ho,ms=bi.EventType=vo,gs=bi.Event=ro,ks=bi.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},bs=bi.FetchXmlHttpFactory=_u,ws=bi.WebChannel=mo,_s=bi.XhrIo=Du,xs="@firebase/firestore",Es=function(){function e(t){d(this,e),this.uid=t}return m(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Es.UNAUTHENTICATED=new Es(null),Es.GOOGLE_CREDENTIALS=new Es("google-credentials-uid"),Es.FIRST_PARTY=new Es("first-party-uid"),Es.MOCK_USER=new Es("mock-user");var Ss="9.17.1",Ts=new Yn("@firebase/firestore");function Is(){return Ts.logLevel}function Cs(e){if(Ts.logLevel<=zn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ns);Ts.debug.apply(Ts,["Firestore (".concat(Ss,"): ").concat(e)].concat(h(i)))}}function Ds(e){if(Ts.logLevel<=zn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ns);Ts.error.apply(Ts,["Firestore (".concat(Ss,"): ").concat(e)].concat(h(i)))}}function As(e){if(Ts.logLevel<=zn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ns);Ts.warn.apply(Ts,["Firestore (".concat(Ss,"): ").concat(e)].concat(h(i)))}}function Ns(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Rs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ss,") INTERNAL ASSERTION FAILED: ")+e;throw Ds(t),new Error(t)}function Os(e,t){e||Rs()}function Ps(e,t){return e}var Ls={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ms=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return m(n)}(Dn),Fs=m((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Us=m((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Vs=function(){function e(){d(this,e)}return m(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Es.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Bs=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return m(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),js=function(){function e(t){d(this,e),this.t=t,this.currentUser=Es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Fs;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Fs,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Cs("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Cs("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fs)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Cs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Os("string"==typeof n.accessToken),new Us(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Os(null===e||"string"==typeof e),new Es(e)}}]),e}(),qs=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Es.FIRST_PARTY,this.p=new Map}return m(e,[{key:"I",value:function(){return this.g?this.g():(Os(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),zs=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return m(e,[{key:"getToken",value:function(){return Promise.resolve(new qs(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Es.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ks=m((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Gs=function(){function e(t){d(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Cs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Cs("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Cs("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Cs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Os("string"==typeof t.token),e.A=t.token,new Ks(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Hs(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ws=function(){function e(){d(this,e)}return m(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Hs(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Qs(e,t){return e<t?-1:e>t?1:0}function $s(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ys(e){return e+"\0"}var Xs=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Ms(Ls.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ms(Ls.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ms(Ls.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ms(Ls.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return m(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Qs(this.nanoseconds,e.nanoseconds):Qs(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Js=function(){function e(t){d(this,e),this.timestamp=t}return m(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Xs(0,0))}},{key:"max",value:function(){return new e(new Xs(253402300799,999999999))}}]),e}(),Zs=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&Rs(),void 0===r?r=t.length-n:r>t.length-n&&Rs(),this.segments=t,this.offset=n,this.len=r}return m(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ec=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,h(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zs),tc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nc=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return tc.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Ms(Ls.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Ms(Ls.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Ms(Ls.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zs),rc=function(){function e(t){d(this,e),this.path=t}return m(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ec.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ec.fromString(t))}},{key:"fromName",value:function(t){return new e(ec.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ec.emptyPath())}},{key:"comparator",value:function(e,t){return ec.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ec(t.slice()))}}]),e}(),ic=m((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function ac(e){return e.fields.find((function(e){return 2===e.kind}))}function oc(e){return e.fields.filter((function(e){return 2!==e.kind}))}ic.UNKNOWN_ID=-1;var uc=m((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var sc=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return m(e,null,[{key:"empty",value:function(){return new e(0,fc.min())}}]),e}();function cc(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Js.fromTimestamp(1e9===r?new Xs(n+1,0):new Xs(n,r));return new fc(i,rc.empty(),t)}function lc(e){return new fc(e.readTime,e.key,-1)}var fc=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return m(e,null,[{key:"min",value:function(){return new e(Js.min(),rc.empty(),-1)}},{key:"max",value:function(){return new e(Js.max(),rc.empty(),-1)}}]),e}();function hc(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=rc.comparator(e.documentKey,t.documentKey))?n:Qs(e.largestBatchId,t.largestBatchId)}var dc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vc=function(){function e(){d(this,e),this.onCommittedListeners=[]}return m(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function pc(e){return yc.apply(this,arguments)}function yc(){return yc=T(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ls.FAILED_PRECONDITION&&t.message===dc){e.next=2;break}throw t;case 2:Cs("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}var mc=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return m(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Rs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=A(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),gc=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Fs,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new wc(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Tc(e.target.error);r.P.reject(new wc(t,n))}}return m(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Cs("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new xc(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new wc(n,t)}}}]),e}(),kc=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Sn())&&Ds("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return m(e,[{key:"F",value:function(){var e=T(E().mark((function e(t){var n=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Cs("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new wc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ms(Ls.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Ms(Ls.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new wc(t,n))},i.onupgradeneeded=function(e){Cs("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){Cs("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=T(E().mark((function e(t,n,r,i){var a,o,u,s,c=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=E().mark((function e(){var n,u,s,l;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.F(t);case 4:return c.db=e.sent,n=gc.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),mc.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Cs("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Cs("SimpleDb","Removing database:",e),Ec(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!In())return!1;if(e.N())return!0;var t=Sn(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),bc=function(){function e(t){d(this,e),this.q=t,this.U=!1,this.K=null}return m(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Ec(this.q.delete())}}]),e}(),wc=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,Ls.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return m(n)}(Ms);function _c(e){return"IndexedDbTransactionError"===e.name}var xc=function(){function e(t){d(this,e),this.store=t}return m(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Cs("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Cs("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ec(n)}},{key:"add",value:function(e){return Cs("SimpleDb","ADD",this.store.name,e,e),Ec(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ec(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Cs("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Cs("SimpleDb","DELETE",this.store.name,e),Ec(this.store.delete(e))}},{key:"count",value:function(){return Cs("SimpleDb","COUNT",this.store.name),Ec(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new mc((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new mc((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Cs("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new mc((function(n,r){t.onerror=function(e){var t=Tc(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new mc((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new bc(i),o=t(i.primaryKey,i.value,a);if(o instanceof mc){var u=o.catch((function(e){return a.done(),mc.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return mc.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ec(e){return new mc((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Tc(e.target.error);n(t)}}))}var Sc=!1;function Tc(e){var t=kc.D(Sn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Ms("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Sc||(Sc=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ic=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.et=n,this.task=null}return m(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Cs("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Cs,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!_c(e.t4)){e.next=17;break}Cs("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,pc(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Cc=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return m(e,[{key:"st",value:function(){var e=T(E().mark((function e(){var t,n=this,r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return mc.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Cs("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Cs("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=lc(t);hc(r,n)>0&&(n=r)})),new fc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Dc=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return m(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();Dc.at=-1;var Ac=m((function e(t,n,r,i,a,o,u,s){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Nc=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return m(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Rc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Oc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Pc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Lc(e){return null==e}function Mc(e){return 0===e&&1/e==-1/0}function Fc(e){return"number"==typeof e&&Number.isInteger(e)&&!Mc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Uc=function(e){function t(e){d(this,t),this.binaryString=e}return m(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Qs(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Uc.EMPTY_BYTE_STRING=new Uc("");var Vc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bc(e){if(Os(!!e),"string"==typeof e){var t=0,n=Vc.exec(e);if(Os(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:jc(e.seconds),nanos:jc(e.nanos)}}function jc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function qc(e){return"string"==typeof e?Uc.fromBase64String(e):Uc.fromUint8Array(e)}function zc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kc(e){var t=e.mapValue.fields.__previous_value__;return zc(t)?Kc(t):t}function Gc(e){var t=Bc(e.mapValue.fields.__local_write_time__.timestampValue);return new Xs(t.seconds,t.nanos)}var Hc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wc={nullValue:"NULL_VALUE"};function Qc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zc(e)?4:sl(e)?9007199254740991:10:Rs()}function $c(e,t){if(e===t)return!0;var n=Qc(e);if(n!==Qc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gc(e).isEqual(Gc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Bc(e.timestampValue),r=Bc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return qc(e.bytesValue).isEqual(qc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return jc(e.geoPointValue.latitude)===jc(t.geoPointValue.latitude)&&jc(e.geoPointValue.longitude)===jc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return jc(e.integerValue)===jc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=jc(e.doubleValue),r=jc(t.doubleValue);return n===r?Mc(n)===Mc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $s(e.arrayValue.values||[],t.arrayValue.values||[],$c);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Rc(n)!==Rc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!$c(n[i],r[i])))return!1;return!0}(e,t);default:return Rs()}}function Yc(e,t){return void 0!==(e.values||[]).find((function(e){return $c(e,t)}))}function Xc(e,t){if(e===t)return 0;var n=Qc(e),r=Qc(t);if(n!==r)return Qs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qs(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=jc(e.integerValue||e.doubleValue),r=jc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jc(e.timestampValue,t.timestampValue);case 4:return Jc(Gc(e),Gc(t));case 5:return Qs(e.stringValue,t.stringValue);case 6:return function(e,t){var n=qc(e),r=qc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Qs(n[i],r[i]);if(0!==a)return a}return Qs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Qs(jc(e.latitude),jc(t.latitude));return 0!==n?n:Qs(jc(e.longitude),jc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Xc(n[i],r[i]);if(a)return a}return Qs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Hc.mapValue&&t===Hc.mapValue)return 0;if(e===Hc.mapValue)return 1;if(t===Hc.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Qs(r[o],a[o]);if(0!==u)return u;var s=Xc(n[r[o]],i[a[o]]);if(0!==s)return s}return Qs(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Rs()}}function Jc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qs(e,t);var n=Bc(e),r=Bc(t),i=Qs(n.seconds,r.seconds);return 0!==i?i:Qs(n.nanos,r.nanos)}function Zc(e){return el(e)}function el(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Bc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?qc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,rc.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=A(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=el(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=A(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(el(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Rs();var t,n}function tl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function nl(e){return!!e&&"integerValue"in e}function rl(e){return!!e&&"arrayValue"in e}function il(e){return!!e&&"nullValue"in e}function al(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ol(e){return!!e&&"mapValue"in e}function ul(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Oc(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ul(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ul(e.arrayValue.values[r]);return n}return Object.assign({},e)}function sl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function cl(e){return"nullValue"in e?Wc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?tl(Nc.empty(),rc.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Rs()}function ll(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?tl(Nc.empty(),rc.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Hc:Rs()}function fl(e,t){var n=Xc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function hl(e,t){var n=Xc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var dl=m((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function vl(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?rc.comparator(rc.fromName(o.referenceValue),n.key):Xc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function pl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!$c(e.position[n],t.position[n]))return!1;return!0}var yl=m((function e(){d(this,e)})),ml=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Xc(t,this.value)):null!==t&&Qc(this.value)===Qc(t)&&this.matchesComparison(Xc(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Rs()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Il(e,t,r):"array-contains"===t?new Nl(e,r):"in"===t?new Rl(e,r):"not-in"===t?new Ol(e,r):"array-contains-any"===t?new Pl(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Cl(e,n):new Dl(e,n)}}]),n}(yl),gl=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return m(n,[{key:"matches",value:function(e){return kl(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=A(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(yl);function kl(e){return"and"===e.op}function bl(e){return"or"===e.op}function wl(e){return _l(e)&&kl(e)}function _l(e){var t,n=A(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof gl)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function xl(e){if(e instanceof ml)return e.field.canonicalString()+e.op.toString()+Zc(e.value);if(wl(e))return e.filters.map((function(e){return xl(e)})).join(",");var t=e.filters.map((function(e){return xl(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function El(e,t){return e instanceof ml?function(e,t){return t instanceof ml&&e.op===t.op&&e.field.isEqual(t.field)&&$c(e.value,t.value)}(e,t):e instanceof gl?function(e,t){return t instanceof gl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&El(n,t.filters[r])}),!0)}(e,t):void Rs()}function Sl(e,t){var n=e.filters.concat(t);return gl.create(n,e.op)}function Tl(e){return e instanceof ml?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Zc(e.value))}(e):e instanceof gl?function(e){return e.op.toString()+" {"+e.getFilters().map(Tl).join(" ,")+"}"}(e):"Filter"}var Il=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=rc.fromName(i.referenceValue),a}return m(n,[{key:"matches",value:function(e){var t=rc.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(ml),Cl=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=Al("in",r),i}return m(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ml),Dl=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=Al("not-in",r),i}return m(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ml);function Al(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return rc.fromName(e.referenceValue)}))}var Nl=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return rl(t)&&Yc(t.arrayValue,this.value)}}]),n}(ml),Rl=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Yc(this.value.arrayValue,t)}}]),n}(ml),Ol=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return m(n,[{key:"matches",value:function(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Yc(this.value.arrayValue,t)}}]),n}(ml),Pl=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return m(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!rl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Yc(t.value.arrayValue,e)}))}}]),n}(ml),Ll=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function Ml(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Fl=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Vl.EMPTY}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Vl.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vl.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ul(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ul(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ul(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ul(this.root,e,this.comparator,!0)}}]),e}(),Ul=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return m(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Vl=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Rs();if(this.right.isRed())throw Rs();var e=this.left.check();if(e!==this.right.check())throw Rs();return e+(this.isRed()?0:1)}}]),e}();Vl.EMPTY=null,Vl.RED=!0,Vl.BLACK=!1,Vl.EMPTY=new(function(){function e(){d(this,e),this.size=0}return m(e,[{key:"key",get:function(){throw Rs()}},{key:"value",get:function(){throw Rs()}},{key:"color",get:function(){throw Rs()}},{key:"left",get:function(){throw Rs()}},{key:"right",get:function(){throw Rs()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Vl(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Bl=function(){function e(t){d(this,e),this.comparator=t,this.data=new Fl(this.comparator)}return m(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new jl(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new jl(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),jl=function(){function e(t){d(this,e),this.iter=t}return m(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ql(e){return e.hasNext()?e.getNext():void 0}var zl=function(){function e(t){d(this,e),this.fields=t,t.sort(nc.comparator)}return m(e,[{key:"unionWith",value:function(t){var n,r=new Bl(nc.comparator),i=A(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=A(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=A(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return $s(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Kl=function(){function e(t){d(this,e),this.value=t}return m(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ol(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(t)}},{key:"setAll",value:function(e){var t=this,n=nc.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ul(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ol(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return $c(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ol(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Oc(t,(function(t,n){return e[t]=n}));var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ul(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Gl(e){var t=[];return Oc(e.fields,(function(e,n){var r=new nc([e]);if(ol(n)){var i=Gl(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=A(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new zl(t)}var Hl=function(){function e(t,n,r,i,a,o,u){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return m(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Js.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Kl.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Kl.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Js.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Js.min(),Js.min(),Js.min(),Kl.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Js.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Js.min(),Js.min(),Kl.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Js.min(),Js.min(),Kl.empty(),2)}}]),e}(),Wl=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function Ql(e){return new Wl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function $l(e){var t=Ps(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return xl(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Lc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Zc(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Zc(e)})).join(",")),t.ft=n}return t.ft}function Yl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ml(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!El(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pl(e.startAt,t.startAt)&&pl(e.endAt,t.endAt)}function Xl(e){return rc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Jl(e,t){return e.filters.filter((function(e){return e instanceof ml&&e.field.isEqual(t)}))}function Zl(e,t,n){var r,i=Wc,a=!0,o=A(Jl(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Wc,c=!0;switch(u.op){case"<":case"<=":s=cl(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Wc}fl({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];fl({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ef(e,t,n){var r,i=Hc,a=!0,o=A(Jl(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Hc,c=!0;switch(u.op){case">=":case">":s=ll(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Hc}hl({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];hl({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var tf=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function nf(e,t,n,r,i,a,o,u){return new tf(e,t,n,r,i,a,o,u)}function rf(e){return new tf(e)}function af(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function of(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function uf(e){var t,n=A(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function sf(e){return null!==e.collectionGroup}function cf(e){var t=Ps(e);if(null===t.dt){t.dt=[];var n=uf(t),r=of(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Ll(n)),t.dt.push(new Ll(nc.keyField(),"asc"));else{var i,a=!1,o=A(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Ll(nc.keyField(),s))}}}return t.dt}function lf(e){var t=Ps(e);if(!t._t)if("F"===t.limitType)t._t=Ql(t.path,t.collectionGroup,cf(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=A(cf(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ll(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new dl(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new dl(t.startAt.position,t.startAt.inclusive):null;t._t=Ql(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function ff(e,t){t.getFirstInequalityField(),uf(e);var n=e.filters.concat([t]);return new tf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function hf(e,t,n){return new tf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function df(e,t){return Yl(lf(e),lf(t))&&e.limitType===t.limitType}function vf(e){return"".concat($l(lf(e)),"|lt:").concat(e.limitType)}function pf(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Tl(e)})).join(", "),"]")),Lc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Zc(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Zc(e)})).join(",")),"Target(".concat(t,")")}(lf(e)),"; limitType=").concat(e.limitType,")")}function yf(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):rc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=A(cf(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=A(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=vl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cf(e),t))&&!(e.endAt&&!function(e,t,n){var r=vl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cf(e),t))}(e,t)}function mf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gf(e){return function(t,n){var r,i=!1,a=A(cf(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=kf(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function kf(e,t,n){var r=e.field.isKeyField()?rc.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xc(r,i):Rs()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Rs()}}function bf(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(t)?"-0":t}}function wf(e){return{integerValue:""+e}}function _f(e,t){return Fc(t)?wf(t):bf(e,t)}var xf=m((function e(){d(this,e),this._=void 0}));function Ef(e,t,n){return e instanceof If?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Cf?Df(e,t):e instanceof Af?Nf(e,t):function(e,t){var n=Tf(e,t),r=Of(n)+Of(e.gt);return nl(n)&&nl(e.gt)?wf(r):bf(e.yt,r)}(e,t)}function Sf(e,t,n){return e instanceof Cf?Df(e,t):e instanceof Af?Nf(e,t):n}function Tf(e,t){return e instanceof Rf?nl(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var If=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n)}(xf),Cf=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return m(n)}(xf);function Df(e,t){var n,r=Pf(t),i=A(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return $c(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Af=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return m(n)}(xf);function Nf(e,t){var n,r=Pf(t),i=A(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!$c(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Rf=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return m(n)}(xf);function Of(e){return jc(e.integerValue||e.doubleValue)}function Pf(e){return rl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Lf=m((function e(t,n){d(this,e),this.field=t,this.transform=n}));var Mf=m((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),Ff=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return m(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Uf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Vf=m((function e(){d(this,e)}));function Bf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Jf(e.key,Ff.none()):new Gf(e.key,e.data,Ff.none());var n,r=e.data,i=Kl.empty(),a=new Bl(nc.comparator),o=A(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Hf(e.key,i,new zl(a.toArray()),Ff.none())}function jf(e,t,n){e instanceof Gf?function(e,t,n){var r=e.value.clone(),i=Qf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hf?function(e,t,n){if(Uf(e.precondition,t)){var r=Qf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Wf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function qf(e,t,n,r){return e instanceof Gf?function(e,t,n,r){if(!Uf(e.precondition,t))return n;var i=e.value.clone(),a=$f(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hf?function(e,t,n,r){if(!Uf(e.precondition,t))return n;var i=$f(e.fieldTransforms,r,t),a=t.data;return a.setAll(Wf(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Uf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zf(e,t){var n,r=null,i=A(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Tf(a.transform,o||null);null!=u&&(null===r&&(r=Kl.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Kf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&$s(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cf&&t instanceof Cf||e instanceof Af&&t instanceof Af?$s(e.elements,t.elements,$c):e instanceof Rf&&t instanceof Rf?$c(e.gt,t.gt):e instanceof If&&t instanceof If}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Gf=function(e){k(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Vf),Hf=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return m(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Vf);function Wf(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Qf(e,t,n){var r=new Map;Os(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Sf(o,u,n[i]))}return r}function $f(e,t,n){var r,i=new Map,a=A(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ef(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Yf,Xf,Jf=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Vf),Zf=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Vf),eh=m((function e(t){d(this,e),this.count=t}));function th(e){switch(e){default:return Rs();case Ls.CANCELLED:case Ls.UNKNOWN:case Ls.DEADLINE_EXCEEDED:case Ls.RESOURCE_EXHAUSTED:case Ls.INTERNAL:case Ls.UNAVAILABLE:case Ls.UNAUTHENTICATED:return!1;case Ls.INVALID_ARGUMENT:case Ls.NOT_FOUND:case Ls.ALREADY_EXISTS:case Ls.PERMISSION_DENIED:case Ls.FAILED_PRECONDITION:case Ls.ABORTED:case Ls.OUT_OF_RANGE:case Ls.UNIMPLEMENTED:case Ls.DATA_LOSS:return!0}}function nh(e){if(void 0===e)return Ds("GRPC error has no .code"),Ls.UNKNOWN;switch(e){case Yf.OK:return Ls.OK;case Yf.CANCELLED:return Ls.CANCELLED;case Yf.UNKNOWN:return Ls.UNKNOWN;case Yf.DEADLINE_EXCEEDED:return Ls.DEADLINE_EXCEEDED;case Yf.RESOURCE_EXHAUSTED:return Ls.RESOURCE_EXHAUSTED;case Yf.INTERNAL:return Ls.INTERNAL;case Yf.UNAVAILABLE:return Ls.UNAVAILABLE;case Yf.UNAUTHENTICATED:return Ls.UNAUTHENTICATED;case Yf.INVALID_ARGUMENT:return Ls.INVALID_ARGUMENT;case Yf.NOT_FOUND:return Ls.NOT_FOUND;case Yf.ALREADY_EXISTS:return Ls.ALREADY_EXISTS;case Yf.PERMISSION_DENIED:return Ls.PERMISSION_DENIED;case Yf.FAILED_PRECONDITION:return Ls.FAILED_PRECONDITION;case Yf.ABORTED:return Ls.ABORTED;case Yf.OUT_OF_RANGE:return Ls.OUT_OF_RANGE;case Yf.UNIMPLEMENTED:return Ls.UNIMPLEMENTED;case Yf.DATA_LOSS:return Ls.DATA_LOSS;default:return Rs()}}(Xf=Yf||(Yf={}))[Xf.OK=0]="OK",Xf[Xf.CANCELLED=1]="CANCELLED",Xf[Xf.UNKNOWN=2]="UNKNOWN",Xf[Xf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xf[Xf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xf[Xf.NOT_FOUND=5]="NOT_FOUND",Xf[Xf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xf[Xf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xf[Xf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xf[Xf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xf[Xf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xf[Xf.ABORTED=10]="ABORTED",Xf[Xf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xf[Xf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xf[Xf.INTERNAL=13]="INTERNAL",Xf[Xf.UNAVAILABLE=14]="UNAVAILABLE",Xf[Xf.DATA_LOSS=15]="DATA_LOSS";var rh=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return m(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Oc(this.inner,(function(t,n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Pc(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ih=new Fl(rc.comparator);function ah(){return ih}var oh=new Fl(rc.comparator);function uh(){for(var e=oh,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function sh(e){var t=oh;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function ch(){return fh()}function lh(){return fh()}function fh(){return new rh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var hh=new Fl(rc.comparator),dh=new Bl(rc.comparator);function vh(){for(var e=dh,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var ph=new Bl(Qs);function yh(){return ph}var mh=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return m(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,gh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Js.min(),i,yh(),ah(),vh())}}]),e}(),gh=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return m(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,vh(),vh(),vh())}}]),e}(),kh=m((function e(t,n,r,i){d(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),bh=m((function e(t,n){d(this,e),this.targetId=t,this.Et=n})),wh=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uc.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),_h=function(){function e(){d(this,e),this.At=0,this.Rt=Sh(),this.bt=Uc.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return m(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=vh(),t=vh(),n=vh();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Rs()}})),new gh(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=Sh()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),xh=function(){function e(t){d(this,e),this.$t=t,this.Bt=new Map,this.Lt=ah(),this.qt=Eh(),this.Ut=new Bl(Qs)}return m(e,[{key:"Kt",value:function(e){var t,n=A(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=A(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Rs()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(Xl(i))if(0===n){var a=new rc(i.path);this.Qt(t,a,Hl.newNoDocument(a,Js.min()))}else Os(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Xl(a.target)){var o=new rc(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Hl.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=vh();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new mh(e,n,this.Ut,this.Lt,r);return this.Lt=ah(),this.qt=Eh(),this.Ut=new Bl(Qs),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new _h,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Bl(Qs),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||Cs("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new _h),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function Eh(){return new Fl(rc.comparator)}function Sh(){return new Fl(rc.comparator)}var Th={asc:"ASCENDING",desc:"DESCENDING"},Ih={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ch={and:"AND",or:"OR"},Dh=m((function e(t,n){d(this,e),this.databaseId=t,this.wt=n}));function Ah(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Nh(e,t){return e.wt?t.toBase64():t.toUint8Array()}function Rh(e,t){return Ah(e,t.toTimestamp())}function Oh(e){return Os(!!e),Js.fromTimestamp(function(e){var t=Bc(e);return new Xs(t.seconds,t.nanos)}(e))}function Ph(e,t){return function(e){return new ec(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Lh(e){var t=ec.fromString(e);return Os(id(t)),t}function Mh(e,t){return Ph(e.databaseId,t.path)}function Fh(e,t){var n=Lh(t);if(n.get(1)!==e.databaseId.projectId)throw new Ms(Ls.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ms(Ls.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rc(jh(n))}function Uh(e,t){return Ph(e.databaseId,t)}function Vh(e){var t=Lh(e);return 4===t.length?ec.emptyPath():jh(t)}function Bh(e){return new ec(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jh(e){return Os(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function qh(e,t,n){return{name:Mh(e,t),fields:n.value.mapValue.fields}}function zh(e,t,n){var r=Fh(e,t.name),i=Oh(t.updateTime),a=t.createTime?Oh(t.createTime):Js.min(),o=new Kl({mapValue:{fields:t.fields}}),u=Hl.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Kh(e,t){return"found"in t?function(e,t){Os(!!t.found),t.found.name,t.found.updateTime;var n=Fh(e,t.found.name),r=Oh(t.found.updateTime),i=t.found.createTime?Oh(t.found.createTime):Js.min(),a=new Kl({mapValue:{fields:t.found.fields}});return Hl.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Os(!!t.missing),Os(!!t.readTime);var n=Fh(e,t.missing),r=Oh(t.readTime);return Hl.newNoDocument(n,r)}(e,t):Rs()}function Gh(e,t){var n;if(t instanceof Gf)n={update:qh(e,t.key,t.value)};else if(t instanceof Jf)n={delete:Mh(e,t.key)};else if(t instanceof Hf)n={update:qh(e,t.key,t.data),updateMask:rd(t.fieldMask)};else{if(!(t instanceof Zf))return Rs();n={verify:Mh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof If)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Af)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rf)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Rs()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Rh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Rs()}(e,t.precondition)),n}function Hh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ff.updateTime(Oh(e.updateTime)):void 0!==e.exists?Ff.exists(e.exists):Ff.none()}(t.currentDocument):Ff.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Os("REQUEST_TIME"===t.setToServerValue),n=new If;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Cf(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Af(i)}else"increment"in t?n=new Rf(e,t.increment):Rs();var a=nc.fromServerFormat(t.fieldPath);return new Lf(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Fh(e,t.update.name),a=new Kl({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new zl(t.map((function(e){return nc.fromServerFormat(e)})))}(t.updateMask);return new Hf(i,a,o,n,r)}return new Gf(i,a,n,r)}if(t.delete){var u=Fh(e,t.delete);return new Jf(u,n)}if(t.verify){var s=Fh(e,t.verify);return new Zf(s,n)}return Rs()}function Wh(e,t){return{documents:[Uh(e,t.path)]}}function Qh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Uh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Uh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return nd(gl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ed(e.field),direction:Xh(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||Lc(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function $h(e){var t=Vh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Os(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Yh(e);return t instanceof gl&&wl(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Ll(td(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Lc(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new dl(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new dl(n,t)}(n.endAt)),nf(t,i,u,o,s,"F",c,l)}function Yh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=td(e.unaryFilter.field);return ml.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=td(e.unaryFilter.field);return ml.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=td(e.unaryFilter.field);return ml.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=td(e.unaryFilter.field);return ml.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Rs()}}(e):void 0!==e.fieldFilter?function(e){return ml.create(td(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rs()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return gl.create(e.compositeFilter.filters.map((function(e){return Yh(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Rs()}}(e.compositeFilter.op))}(e):Rs()}function Xh(e){return Th[e]}function Jh(e){return Ih[e]}function Zh(e){return Ch[e]}function ed(e){return{fieldPath:e.canonicalString()}}function td(e){return nc.fromServerFormat(e.fieldPath)}function nd(e){return e instanceof ml?function(e){if("=="===e.op){if(al(e.value))return{unaryFilter:{field:ed(e.field),op:"IS_NAN"}};if(il(e.value))return{unaryFilter:{field:ed(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(al(e.value))return{unaryFilter:{field:ed(e.field),op:"IS_NOT_NAN"}};if(il(e.value))return{unaryFilter:{field:ed(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ed(e.field),op:Jh(e.op),value:e.value}}}(e):e instanceof gl?function(e){var t=e.getFilters().map((function(e){return nd(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Zh(e.op),filters:t}}}(e):Rs()}function rd(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function id(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ad(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ud(t)),t=od(e.get(n),t);return ud(t)}function od(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ud(e){return e+"\x01\x01"}function sd(e){var t=e.length;if(Os(t>=2),2===t)return Os("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ec.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Rs(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Rs()}a=o+2}return new ec(r)}var cd=["userId","batchId"];function ld(e,t){return[e,ad(t)]}function fd(e,t,n){return[e,ad(t),n]}var hd={},dd=["prefixPath","collectionGroup","readTime","documentId"],vd=["prefixPath","collectionGroup","documentId"],pd=["collectionGroup","readTime","prefixPath","documentId"],yd=["canonicalId","targetId"],md=["targetId","path"],gd=["path","targetId"],kd=["collectionId","parent"],bd=["indexId","uid"],wd=["uid","sequenceNumber"],_d=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xd=["indexId","uid","orderedDocumentKey"],Ed=["userId","collectionPath","documentId"],Sd=["userId","collectionPath","largestBatchId"],Td=["userId","collectionGroup","largestBatchId"],Id=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Cd=[].concat(h(Id),["documentOverlays"]),Dd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ad=Dd,Nd=[].concat(Ad,["indexConfiguration","indexState","indexEntries"]),Rd=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).se=e,i.currentSequenceNumber=r,i}return m(n)}(vc);function Od(e,t){var n=Ps(e);return kc.M(n.se,t)}var Pd=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return m(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&jf(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=A(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=qf(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=A(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=qf(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=lh();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Bf(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Js.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),vh())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,(function(e,t){return Kf(e,t)}))&&$s(this.baseMutations,e.baseMutations,(function(e,t){return Kf(e,t)}))}}]),e}(),Ld=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return m(e,null,[{key:"from",value:function(t,n,r){Os(t.mutations.length===r.length);for(var i=hh,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Md=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return m(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Fd=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Js.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Js.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Uc.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return m(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Ud=m((function e(t){d(this,e),this.ie=t}));function Vd(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Mh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ah(e,t.version.toTimestamp()),createTime:Ah(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:jd(t.version)};else{if(!t.isUnknownDocument())return Rs();r.unknownDocument={path:n.path.toArray(),version:jd(t.version)}}return r}function Bd(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function jd(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qd(e){var t=new Xs(e.seconds,e.nanoseconds);return Js.fromTimestamp(t)}function zd(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Hh(e.ie,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Hh(e.ie,t)})),u=Xs.fromMillis(t.localWriteTimeMs);return new Pd(t.batchId,u,n,o)}function Kd(e){var t,n,r=qd(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?qd(e.lastLimboFreeSnapshotVersion):Js.min();return void 0!==e.query.documents?(Os(1===(n=e.query).documents.length),t=lf(rf(Vh(n.documents[0])))):t=function(e){return lf($h(e))}(e.query),new Fd(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Uc.fromBase64String(e.resumeToken))}function Gd(e,t){var n,r=jd(t.snapshotVersion),i=jd(t.lastLimboFreeSnapshotVersion);n=Xl(t.target)?Wh(e.ie,t.target):Qh(e.ie,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:$l(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Hd(e){var t=$h({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?hf(t,t.limit,"L"):t}function Wd(e,t){return new Md(t.largestBatchId,Hh(e.ie,t.overlayMutation))}function Qd(e,t){var n=t.path.lastSegment();return[e,ad(t.path.popLast()),n]}function $d(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:jd(r.readTime),documentKey:ad(r.documentKey.path),largestBatchId:r.largestBatchId}}var Yd=function(){function e(){d(this,e)}return m(e,[{key:"getBundleMetadata",value:function(e,t){return Xd(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:qd(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Xd(e).put({bundleId:(n=t).id,createTime:jd(Oh(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Jd(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Hd(t.bundledQuery),readTime:qd(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Jd(e).put(function(e){return{name:e.name,readTime:jd(Oh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Xd(e){return Od(e,"bundles")}function Jd(e){return Od(e,"namedQueries")}var Zd=function(){function e(t,n){d(this,e),this.yt=t,this.userId=n}return m(e,[{key:"getOverlay",value:function(e,t){var n=this;return ev(e).get(Qd(this.userId,t)).next((function(e){return e?Wd(n.yt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=ch();return mc.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Md(t,a);i.push(r.oe(e,o))})),mc.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(ad(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(ev(e).Y("collectionPathOverlayIndex",i))})),mc.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=ch(),a=ad(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ev(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Wd(r.yt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=ch(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ev(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Wd(a.yt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"oe",value:function(e,t){return ev(e).put(function(e,t,n){var r=l(Qd(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Gh(e.ie,n.mutation)}}(this.yt,this.userId,t))}}],[{key:"re",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function ev(e){return Od(e,"documentOverlays")}var tv=function(){function e(){d(this,e)}return m(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(jc(e.integerValue));else if("doubleValue"in e){var n=jc(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),Mc(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(qc(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?sl(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Rs()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),rc.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();function nv(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function rv(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=nv(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}tv.Ie=new tv;var iv=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return m(e,[{key:"Te",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ee(n.value),n=t.next();this.Ae()}},{key:"Re",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{var a=r.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ae()}},{key:"Ve",value:function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"Se",value:function(e){var t=this.De(e),n=rv(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"xe",value:function(e){var t=this.De(e),n=rv(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"Oe",value:function(){this.Me(255),this.Me(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Fe",value:function(){return this.buffer.slice(0,this.position)}},{key:"De",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ee",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}},{key:"Ae",value:function(){this.ke(0),this.ke(1)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"ke",value:function(e){this.Ce(1),this.buffer[this.position++]=e}},{key:"Me",value:function(e){this.Ce(1),this.buffer[this.position++]=~e}},{key:"Ce",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),av=function(){function e(t){d(this,e),this.$e=t}return m(e,[{key:"we",value:function(e){this.$e.Te(e)}},{key:"fe",value:function(e){this.$e.ve(e)}},{key:"le",value:function(e){this.$e.Se(e)}},{key:"ae",value:function(){this.$e.Ne()}}]),e}(),ov=function(){function e(t){d(this,e),this.$e=t}return m(e,[{key:"we",value:function(e){this.$e.Re(e)}},{key:"fe",value:function(e){this.$e.Ve(e)}},{key:"le",value:function(e){this.$e.xe(e)}},{key:"ae",value:function(){this.$e.Oe()}}]),e}(),uv=function(){function e(){d(this,e),this.$e=new iv,this.Be=new av(this.$e),this.Le=new ov(this.$e)}return m(e,[{key:"seed",value:function(e){this.$e.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Be:this.Le}},{key:"Fe",value:function(){return this.$e.Fe()}},{key:"reset",value:function(){this.$e.reset()}}]),e}(),sv=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return m(e,[{key:"Ue",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function cv(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=lv(e.arrayValue,t.arrayValue))?n:0!==(n=lv(e.directionalValue,t.directionalValue))?n:rc.comparator(e.documentKey,t.documentKey)}function lv(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var fv=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];var n,r=A(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Qe=i:this.Ge.push(i)}}catch(a){r.e(a)}finally{r.f()}}return m(e,[{key:"je",value:function(e){Os(e.collectionGroup===this.collectionId);var t=ac(e);if(void 0!==t&&!this.We(t))return!1;for(var n=oc(e),r=0,i=0;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){var a=n[r];if(!this.ze(this.Qe,a)||!this.He(this.Ke[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],o))return!1}return!0}},{key:"We",value:function(e){var t,n=A(this.Ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.ze(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"ze",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"He",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function hv(e){var t,n;if(Os(e instanceof ml||e instanceof gl),e instanceof ml){if(e instanceof Rl){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return ml.create(e.field,"==",t)})))||[];return gl.create(r,"or")}return e}var i=e.filters.map((function(e){return hv(e)}));return gl.create(i,e.op)}function dv(e){if(0===e.getFilters().length)return[];var t=mv(hv(e));return Os(yv(t)),vv(t)||pv(t)?[t]:t.getFilters()}function vv(e){return e instanceof ml}function pv(e){return e instanceof gl&&wl(e)}function yv(e){return vv(e)||pv(e)||function(e){if(e instanceof gl&&bl(e)){var t,n=A(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!vv(r)&&!pv(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function mv(e){if(Os(e instanceof ml||e instanceof gl),e instanceof ml)return e;if(1===e.filters.length)return mv(e.filters[0]);var t=e.filters.map((function(e){return mv(e)})),n=gl.create(t,e.op);return yv(n=bv(n))?n:(Os(n instanceof gl),Os(kl(n)),Os(n.filters.length>1),n.filters.reduce((function(e,t){return gv(e,t)})))}function gv(e,t){var n;return Os(e instanceof ml||e instanceof gl),Os(t instanceof ml||t instanceof gl),n=e instanceof ml?t instanceof ml?function(e,t){return gl.create([e,t],"and")}(e,t):kv(e,t):t instanceof ml?kv(t,e):function(e,t){if(Os(e.filters.length>0&&t.filters.length>0),kl(e)&&kl(t))return Sl(e,t.getFilters());var n=bl(e)?e:t,r=bl(e)?t:e,i=n.filters.map((function(e){return gv(e,r)}));return gl.create(i,"or")}(e,t),bv(n)}function kv(e,t){if(kl(t))return Sl(t,e.getFilters());var n=t.filters.map((function(t){return gv(e,t)}));return gl.create(n,"or")}function bv(e){if(Os(e instanceof ml||e instanceof gl),e instanceof ml)return e;var t=e.getFilters();if(1===t.length)return bv(t[0]);if(_l(e))return e;var n=t.map((function(e){return bv(e)})),r=[];return n.forEach((function(t){t instanceof ml?r.push(t):t instanceof gl&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:gl.create(r,e.op)}var wv=function(){function e(){d(this,e),this.Je=new _v}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),mc.resolve()}},{key:"getCollectionParents",value:function(e,t){return mc.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return mc.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return mc.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return mc.resolve(null)}},{key:"getIndexType",value:function(e,t){return mc.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return mc.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return mc.resolve(null)}},{key:"getMinOffset",value:function(e,t){return mc.resolve(fc.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return mc.resolve(fc.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return mc.resolve()}},{key:"updateIndexEntries",value:function(e,t){return mc.resolve()}}]),e}(),_v=function(){function e(){d(this,e),this.index={}}return m(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Bl(ec.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Bl(ec.comparator)).toArray()}}]),e}(),xv=new Uint8Array(0),Ev=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.Ye=new _v,this.Xe=new rh((function(e){return $l(e)}),(function(e,t){return Yl(e,t)})),this.uid=t.uid||""}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ye.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ye.add(t)}));var a={collectionId:r,parent:ad(i)};return Sv(e).put(a)}return mc.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ys(t),""],!1,!0);return Sv(e).W(r).next((function(e){var r,i=A(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(sd(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Iv(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Cv(e);return a.next((function(e){o.put($d(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Iv(e),r=Cv(e),i=Tv(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Tv(e),i=!0,a=new Map;return mc.forEach(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=vh(),o=[];return mc.forEach(a,(function(i,a){var u;Cs("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat($l(t)));var s=function(e,t){var n=ac(t);if(void 0===n)return null;var r,i=A(Jl(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=A(oc(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=A(Jl(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=A(oc(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Zl(e,o.fieldPath,e.startAt):ef(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new dl(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=A(oc(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ef(e,o.fieldPath,e.endAt):Zl(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new dl(r,i)}(a,i),h=n.en(i,a,l),d=n.en(i,a,f),v=n.nn(i,a,c),p=n.sn(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return mc.forEach(p,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=rc.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return mc.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:dv(gl.create(e.filters,"and")).map((function(t){return Ql(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Xe.set(e,t),t)}},{key:"sn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.rn(t[d/c]):xv,f=u.on(e,s,n[d%c],r),v=u.un(e,s,i[d%c],a),p=o.map((function(t){return u.on(e,s,t,!0)}));l.push.apply(l,h(u.createRange(f,v,p)))},d=0;d<s;++d)f();return l}},{key:"on",value:function(e,t,n,r){var i=new sv(e,rc.empty(),t,n);return r?i:i.Ue()}},{key:"un",value:function(e,t,n,r){var i=new sv(e,rc.empty(),t,n);return r?i.Ue():i}},{key:"tn",value:function(e,t){var n=new fv(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=A(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.je(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return mc.forEach(i,(function(t){return n.tn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Bl(nc.comparator),r=!1,i=A(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=A(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=A(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"cn",value:function(e,t){var n,r=new uv,i=A(oc(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);tv.Ie.ue(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Fe()}},{key:"rn",value:function(e){var t=new uv;return tv.Ie.ue(e,t.qe(0)),t.Fe()}},{key:"an",value:function(e,t){var n=new uv;return tv.Ie.ue(tl(this.databaseId,t),n.qe(function(e){var t=oc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}},{key:"nn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new uv);var i,a=0,o=A(oc(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=A(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.hn(t,s.fieldPath)&&rl(c))r=this.ln(r,s,c);else{var h=f.qe(s.kind);tv.Ie.ue(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"en",value:function(e,t,n){return this.nn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Fe();return t}},{key:"ln",value:function(e,t,n){var r,i=h(e),a=[],o=A(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=A(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new uv;f.seed(l.Fe()),tv.Ie.ue(s,f.qe(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"hn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof ml&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Iv(e),i=Cv(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return mc.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new sc(t.sequenceNumber,new fc(qd(t.readTime),new rc(sd(t.documentKey)),t.largestBatchId)):sc.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new uc(nc.fromServerFormat(n),r)}));return new ic(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Qs(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Iv(e),a=Cv(e);return this.dn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return mc.forEach(t,(function(t){return a.put($d(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return mc.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?mc.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),mc.forEach(a,(function(r){return n._n(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?mc.resolve():n.mn(e,i,r,t,a)}))}))}))}))}},{key:"gn",value:function(e,t,n,r){return Tv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}},{key:"yn",value:function(e,t,n,r){return Tv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}},{key:"_n",value:function(e,t,n){var r=Tv(e),i=new Bl(cv);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},(function(e,r){i=i.add(new sv(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Bl(cv),r=this.cn(t,e);if(null==r)return n;var i=ac(t);if(null!=i){var a=e.data.field(i.fieldPath);if(rl(a)){var o,u=A(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new sv(t.indexId,e.key,this.rn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new sv(t.indexId,e.key,xv,r));return n}},{key:"mn",value:function(e,t,n,r,i){var a=this;Cs("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ql(a),s=ql(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ql(o)):l?(i(u),u=ql(a)):(u=ql(a),s=ql(o))}}(r,i,cv,(function(r){o.push(a.gn(e,t,n,r))}),(function(r){o.push(a.yn(e,t,n,r))})),mc.waitFor(o)}},{key:"dn",value:function(e){var t=1;return Cv(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return cv(e,t)})).filter((function(e,t,n){return!t||0!==cv(e,n[t-1])}));var r=[];r.push(e);var i,a=A(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=cv(o,e),s=cv(o,t);if(0===u)r[0]=e.Ue();else if(u>0&&s<0)r.push(o),r.push(o.Ue());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,xv,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,xv,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"pn",value:function(e,t){return cv(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Dv)}},{key:"getMinOffset",value:function(e,t){var n=this;return mc.mapArray(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){return e||Rs()}))})).next(Dv)}}]),e}();function Sv(e){return Od(e,"collectionParents")}function Tv(e){return Od(e,"indexEntries")}function Iv(e){return Od(e,"indexConfiguration")}function Cv(e){return Od(e,"indexState")}function Dv(e){Os(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;hc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fc(t.readTime,t.documentKey,n)}var Av={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nv=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return m(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Rv(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Os(1===u)})));var c,l=[],f=A(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=fd(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return mc.waitFor(a).next((function(){return l}))}function Ov(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Rs();t=e.noDocument}return JSON.stringify(t).length}Nv.DEFAULT_COLLECTION_PERCENTILE=10,Nv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nv.DEFAULT=new Nv(41943040,Nv.DEFAULT_COLLECTION_PERCENTILE,Nv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nv.DISABLED=new Nv(-1,0,0);var Pv=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return m(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mv(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Fv(e),o=Mv(e);return o.add({}).next((function(u){Os("number"==typeof u);var s,c=new Pd(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Gh(e.ie,t)})),i=n.mutations.map((function(t){return Gh(e.ie,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.yt,i.userId,c),f=[],h=new Bl((function(e,t){return Qs(e.canonicalString(),t.canonicalString())})),d=A(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=fd(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(p,hd))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),mc.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Mv(e).get(t).next((function(e){return e?(Os(e.userId===n.userId),zd(n.yt,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?mc.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Mv(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Os(t.batchId>=r),a=zd(n.yt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Mv(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mv(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return zd(t.yt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=ld(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Fv(e).Z({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],f=u[2],h=sd(c);if(s===n.userId&&t.path.isEqual(h))return Mv(e).get(f).next((function(e){if(!e)throw Rs();Os(e.userId===n.userId),a.push(zd(n.yt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Bl(Qs),i=[];return t.forEach((function(t){var a=ld(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Fv(e).Z({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],f=sd(s);u===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(u)})),mc.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=ld(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Bl(Qs);return Fv(e).Z({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],f=o[2],h=sd(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Mv(e).get(t).next((function(e){if(null===e)throw Rs();Os(e.userId===n.userId),r.push(zd(n.yt,e))})))})),mc.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Rv(e.se,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),mc.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return mc.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Fv(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=sd(e[1]);i.push(a)}else r.done()})).next((function(){Os(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Lv(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return Uv(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"re",value:function(t,n,r,i){return Os(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Lv(e,t,n){var r=ld(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Fv(e).Z({range:a,X:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Mv(e){return Od(e,"mutations")}function Fv(e){return Od(e,"documentMutations")}function Uv(e){return Od(e,"mutationQueues")}var Vv=function(){function e(t){d(this,e),this.bn=t}return m(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),Bv=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.yt=n}return m(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new Vv(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return Js.fromTimestamp(new Xs(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return jv(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Os(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return jv(e).Z((function(o,u){var s=Kd(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return mc.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return jv(e).Z((function(e,n){var r=Kd(n);t(r)}))}},{key:"Vn",value:function(e){return qv(e).get("targetGlobalKey").next((function(e){return Os(null!==e),e}))}},{key:"Sn",value:function(e,t){return qv(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return jv(e).put(Gd(this.yt,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=$l(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return jv(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Kd(n);Yl(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=zv(e);return t.forEach((function(t){var o=ad(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),mc.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=zv(e);return mc.forEach(t,(function(t){var a=ad(t.path);return mc.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=zv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=zv(e),i=vh();return r.Z({range:n,X:!0},(function(e,t,n){var r=sd(e[1]),a=new rc(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=ad(t.path),r=IDBKeyRange.bound([n],[Ys(n)],!1,!0),i=0;return zv(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return jv(e).get(t).next((function(e){return e?Kd(e):null}))}}]),e}();function jv(e){return Od(e,"targets")}function qv(e){return Od(e,"targetGlobal")}function zv(e){return Od(e,"targetDocuments")}function Kv(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=Qs(r,o);return 0===s?Qs(i,u):s}var Gv=function(){function e(t){d(this,e),this.xn=t,this.buffer=new Bl(Kv),this.Nn=0}return m(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Kv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Hv=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return m(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;Cs("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!_c(e.t0)){e.next=12;break}Cs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,pc(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Wv=function(){function e(t,n){d(this,e),this.$n=t,this.params=n}return m(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return mc.resolve(Dc.at);var r=new Gv(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Cs("LruGarbageCollector","Garbage collection skipped; disabled"),mc.resolve(Av)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Cs("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Av):n.qn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"qn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Cs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Is()<=zn.DEBUG&&Cs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),mc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Qv=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new Wv(e,t)}(this,n)}return m(e,[{key:"Bn",value:function(e){var t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Un",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return $v(e,n)}},{key:"removeReference",value:function(e,t,n){return $v(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return $v(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return Uv(e).tt((function(r){return Lv(e,r,t).next((function(e){return e&&(n=!0),mc.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Js.min()),zv(e).delete([0,ad(o.path)])}))}));i.push(s)}})).next((function(){return mc.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return $v(e,t)}},{key:"Kn",value:function(e,t){var n,r=zv(e),i=Dc.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Dc.at&&t(new rc(sd(n)),i),i=s,n=u):i=Dc.at})).next((function(){i!==Dc.at&&t(new rc(sd(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function $v(e,t){return zv(e).put(function(e,t){return{targetId:0,path:ad(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Yv=function(){function e(){d(this,e),this.changes=new rh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return m(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Hl.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?mc.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Xv=function(){function e(t){d(this,e),this.yt=t}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return tp(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return tp(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Bd(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Hl.newInvalidDocument(t);return tp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(np(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:Hl.newInvalidDocument(t)};return tp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(np(t))},(function(e,i){r={document:n.jn(t,i),size:Ov(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ah();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=ah(),i=new Fl(rc.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,Ov(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return mc.resolve();var r=new Bl(ip);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(np(r.first()),np(r.last())),a=r.getIterator(),o=a.getNext();return tp(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=rc.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&ip(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(np(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Bd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tp(e).W(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=ah(),o=A(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.jn(rc.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(yf(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ah(),o=rp(t,n),u=rp(t,fc.max());return tp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(rc.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Zv(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return ep(e).get("remoteDocumentGlobalKey").next((function(e){return Os(!!e),e}))}},{key:"Qn",value:function(e,t){return ep(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=zh(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=rc.fromSegments(t.noDocument.path),i=qd(t.noDocument.readTime);n=Hl.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Rs();var a=rc.fromSegments(t.unknownDocument.path),o=qd(t.unknownDocument.version);n=Hl.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Xs(e[0],e[1]);return Js.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!n.isNoDocument()||!n.version.isEqual(Js.min()))return n}return Hl.newInvalidDocument(e)}}]),e}();function Jv(e){return new Xv(e)}var Zv=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new rh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Bl((function(e,t){return Qs(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Vd(t.Yn.yt,o);i=i.add(a.path.popLast());var c=Ov(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Vd(t.Yn.yt,o.convertToNoDocument(Js.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),mc.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Yv);function ep(e){return Od(e,"remoteDocumentGlobal")}function tp(e){return Od(e,"remoteDocumentsV14")}function np(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function rp(e,t){var n=t.documentKey.path.toArray();return[e,Bd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ip(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Qs(n[a],r[a]))return i;return(i=Qs(n.length,r.length))||((i=Qs(n[n.length-2],r[r.length-2]))||Qs(n[n.length-1],r[r.length-1]))}var ap=m((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),op=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return m(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&qf(r.mutation,e,zl.empty(),Xs.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,vh()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vh(),i=ch();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=uh();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=ch();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,vh())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ah(),a=fh(),o=fh();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Hf)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),qf(o.mutation,t,o.mutation.getFieldMask(),Xs.now())):a.set(t.key,zl.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new ap(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=fh(),i=new Fl((function(e,t){return e-t})),a=vh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=A(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||zl.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||vh()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=lh();c.forEach((function(e){if(!a.has(e)){var n=Bf(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return mc.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return rc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):mc.resolve(ch()),u=-1,s=a;return o.next((function(t){return mc.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?mc.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,vh())})).next((function(e){return{batchId:u,changes:sh(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new rc(t)).next((function(e){var t=uh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=uh();return this.indexManager.getCollectionParents(e,i).next((function(o){return mc.forEach(o,(function(o){var u=function(e,t){return new tf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Hl.newInvalidDocument(r)))}));var n=uh();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&qf(a.mutation,i,zl.empty(),Xs.now()),yf(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),up=function(){function e(t){d(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return m(e,[{key:"getBundleMetadata",value:function(e,t){return mc.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Oh(n.createTime)}),mc.resolve()}},{key:"getNamedQuery",value:function(e,t){return mc.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Hd(e.bundledQuery),readTime:Oh(e.readTime)}}(t)),mc.resolve()}}]),e}(),sp=function(){function e(){d(this,e),this.overlays=new Fl(rc.comparator),this.es=new Map}return m(e,[{key:"getOverlay",value:function(e,t){return mc.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=ch();return mc.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),mc.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),mc.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=ch(),i=t.length+1,a=new rc(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return mc.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Fl((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=ch(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=ch(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return mc.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Md(t,n));var a=this.es.get(t);void 0===a&&(a=vh(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),cp=function(){function e(){d(this,e),this.ns=new Bl(lp.ss),this.rs=new Bl(lp.os)}return m(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new lp(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new lp(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new rc(new ec([])),r=new lp(n,e),i=new lp(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new rc(new ec([])),n=new lp(t,e),r=new lp(t,e+1),i=vh();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new lp(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),lp=function(){function e(t,n){d(this,e),this.key=t,this._s=n}return m(e,null,[{key:"ss",value:function(e,t){return rc.comparator(e.key,t.key)||Qs(e._s,t._s)}},{key:"os",value:function(e,t){return Qs(e._s,t._s)||rc.comparator(e.key,t.key)}}]),e}(),fp=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Bl(lp.ss)}return m(e,[{key:"checkEmpty",value:function(e){return mc.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Pd(i,t,n,r);this.mutationQueue.push(a);var o,u=A(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new lp(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return mc.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return mc.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return mc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return mc.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return mc.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new lp(t,0),i=new lp(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),mc.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Bl(Qs);return t.forEach((function(e){var t=new lp(e,0),i=new lp(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),mc.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;rc.isDocumentKey(i)||(i=i.child(""));var a=new lp(new rc(i),0),o=new Bl(Qs);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),mc.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Os(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return mc.forEach(t.mutations,(function(i){var a=new lp(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new lp(t,0),r=this.gs.firstAfterOrEqual(n);return mc.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,mc.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),hp=function(){function e(t){d(this,e),this.Es=t,this.docs=new Fl(rc.comparator),this.size=0}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return mc.resolve(n?n.document.mutableCopy():Hl.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ah();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Hl.newInvalidDocument(e))})),mc.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=ah(),a=t.path,o=new rc(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||hc(lc(l),n)<=0||(r.has(l.key)||yf(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return mc.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Rs()}},{key:"As",value:function(e,t){return mc.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new dp(this)}},{key:"getSize",value:function(e){return mc.resolve(this.size)}}]),e}(),dp=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).Yn=e,r}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),mc.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(Yv),vp=function(){function e(t){d(this,e),this.persistence=t,this.Rs=new rh((function(e){return $l(e)}),Yl),this.lastRemoteSnapshotVersion=Js.min(),this.highestTargetId=0,this.bs=0,this.Ps=new cp,this.targetCount=0,this.vs=Vv.Pn()}return m(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),mc.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return mc.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return mc.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),mc.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),mc.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new Vv(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,mc.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),mc.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,mc.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),mc.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return mc.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return mc.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),mc.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),mc.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),mc.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return mc.resolve(n)}},{key:"containsKey",value:function(e,t){return mc.resolve(this.Ps.containsKey(t))}}]),e}(),pp=function(){function e(t,n){var r=this;d(this,e),this.Vs={},this.overlays={},this.Ss=new Dc(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new vp(this),this.indexManager=new wv,this.remoteDocumentCache=new hp((function(e){return r.referenceDelegate.xs(e)})),this.yt=new Ud(n),this.Ns=new up(this.yt)}return m(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new sp,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new fp(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Cs("MemoryPersistence","Starting transaction:",e);var i=new yp(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return mc.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),yp=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return m(n)}(vc),mp=function(){function e(t){d(this,e),this.persistence=t,this.Fs=new cp,this.$s=null}return m(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Rs()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),mc.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),mc.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),mc.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mc.forEach(this.Ls,(function(r){var i=rc.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,Js.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return mc.or([function(){return mc.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),gp=function(){function e(t){d(this,e),this.yt=t}return m(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new gc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cd,{unique:!0}),e.createObjectStore("documentMutations")}(e),kp(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=mc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),kp(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Js.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cd,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return mc.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Us(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ed});t.createIndex("collectionPathOverlayIndex",Sd,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Td,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:dd});t.createIndex("documentKeyIndex",vd),t.createIndex("collectionGroupIndex",pd)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:bd}).createIndex("sequenceNumberIndex",wd,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:_d}).createIndex("documentKeyIndex",xd,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Ov(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Us",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return mc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return mc.forEach(r,(function(r){Os(r.userId===n.userId);var i=zd(t.yt,r);return Rv(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new ec(n),o=function(e){return[0,ad(e)]}(a);r.push(t.get(o).next((function(n){return n?mc.resolve():function(n){return t.put({targetId:0,path:ad(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return mc.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:kd});var n=t.store("collectionParents"),r=new _v,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ad(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new ec(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],sd(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Kd(r),a=Gd(t.yt,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new rc(ec.fromString(i.document.name).popFirst(5)):i.noDocument?rc.fromSegments(i.noDocument.path):i.unknownDocument?rc.fromSegments(i.unknownDocument.path):Rs()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return mc.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=Jv(this.yt),a=new pp(mp.Bs,this.yt.ie);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:vh();zd(n.yt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),mc.forEach(r,(function(e,r){var o=new Es(r),u=Zd.re(n.yt,o),s=a.getIndexManager(o),c=Pv.re(o,n.yt,s,a.referenceDelegate);return new op(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Rd(t,Dc.at),e).next()}))}))}}]),e}();function kp(e){e.createObjectStore("targetDocuments",{keyPath:md}).createIndex("documentTargetsIndex",gd,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yd,{unique:!0}),e.createObjectStore("targetGlobal")}var bp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wp=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Ms(Ls.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qv(this,i),this.ii=n+"main",this.yt=new Ud(s),this.ri=new kc(this.ii,this.Xs,new gp(this.yt)),this.Cs=new Bv(this.referenceDelegate,this.yt),this.remoteDocumentCache=Jv(this.yt),this.Ns=new Yd,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Ds("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return m(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ms(Ls.FAILED_PRECONDITION,bp);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Dc(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=T(E().mark((function n(r){return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=T(E().mark((function t(n){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return xp(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(_c(t))return Cs("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Cs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return _p(e).get("owner").next((function(e){return mc.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return xp(e).delete(this.clientId)}},{key:"yi",value:function(){var e=T(E().mark((function e(){var t,n,r,i,a=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Od(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return mc.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=A(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?mc.resolve(!0):_p(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Ms(Ls.FAILED_PRECONDITION,bp);return!1}}return!(!t.networkEnabled||!t.inForeground)||xp(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Cs("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=T(E().mark((function e(){var t=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Rd(e,Dc.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return xp(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return Pv.re(e,this.yt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Ev(e,this.yt.ie.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Zd.re(this.yt,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Cs("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?Nd:14===i?Ad:13===i?Dd:12===i?Cd:11===i?Id:void Rs();return this.ri.runTransaction(e,o,u,(function(i){return a=new Rd(i,r.Ss?r.Ss.next():Dc.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw Ds("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Ms(Ls.FAILED_PRECONDITION,dc);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return _p(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Ms(Ls.FAILED_PRECONDITION,bp)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _p(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=_p(e);return n.get("owner").next((function(e){return t.mi(e)?(Cs("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):mc.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ds("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!Tn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Cs("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ds("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(Ri){Ds("Failed to set zombie client id.",Ri)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(Ri){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return kc.C()}}]),e}();function _p(e){return Od(e,"owner")}function xp(e){return Od(e,"clientMetadata")}function Ep(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Sp=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return m(e,null,[{key:"Ci",value:function(t,n){var r,i=vh(),a=vh(),o=A(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Tp=function(){function e(){d(this,e),this.xi=!1}return m(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(af(t))return mc.resolve(null);var r=lf(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=hf(t,null,"F"),r=lf(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=vh.apply(void 0,h(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,hf(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return af(t)||r.isEqual(Js.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(Is()<=zn.DEBUG&&Cs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pf(t)),i.Bi(e,o,t,cc(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Bl(gf(e));return t.forEach((function(t,r){yf(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return Is()<=zn.DEBUG&&Cs("QueryEngine","Using full collection scan to execute query:",pf(t)),this.Ni.getDocumentsMatchingQuery(e,t,fc.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ip=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new Fl(Qs),this.Ui=new rh((function(e){return $l(e)}),Yl),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return m(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new op(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function Cp(e,t,n,r){return new Ip(e,t,n,r)}function Dp(e,t){return Ap.apply(this,arguments)}function Ap(){return Ap=T(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ps(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=vh(),s=A(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=A(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,v=A(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var y,m=A(p.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Ap.apply(this,arguments)}function Np(e,t){var n=Ps(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=mc.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Os(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=vh(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Rp(e){var t=Ps(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function Op(e,t){var n=Ps(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Uc.EMPTY_BYTE_STRING,Js.min()).withLastLimboFreeSnapshotVersion(Js.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=ah(),s=vh();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Pp(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(Js.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return mc.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.qi=i,e}))}function Pp(e,t,n){var r=vh(),i=vh();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ah();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Js.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Cs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Lp(e,t){var n=Ps(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Mp(e,t){var n=Ps(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,mc.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new Fd(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function Fp(e,t,n){return Up.apply(this,arguments)}function Up(){return Up=T(E().mark((function e(t,n,r){var i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ps(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),_c(e.t1)){e.next=12;break}throw e.t1;case 12:Cs("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Up.apply(this,arguments)}function Vp(e,t,n){var r=Ps(e),i=Js.min(),a=vh();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Ps(e),i=r.Ui.get(n);return void 0!==i?mc.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,lf(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Js.min(),n?a:vh())})).next((function(e){return qp(r,mf(t),e),{documents:e,Hi:a}}))}))}function Bp(e,t){var n=Ps(e),r=Ps(n.Cs),i=n.qi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function jp(e,t){var n=Ps(e),r=n.Ki.get(t)||Js.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,cc(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return qp(n,t,e),e}))}function qp(e,t,n){var r=e.Ki.get(t)||Js.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function zp(e,t,n,r){return Kp.apply(this,arguments)}function Kp(){return Kp=T(E().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,v;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Ps(t),o=vh(),u=ah(),s=A(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(p){s.e(p)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,Mp(a,function(e){return lf(rf(ec.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Pp(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Kp.apply(this,arguments)}function Gp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=T(E().mark((function e(t,n){var r,i,a,o=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:vh(),e.next=3,Mp(t,lf(Hd(n.bundledQuery)));case 3:return i=e.sent,a=Ps(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Oh(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(Uc.EMPTY_BYTE_STRING,t);return a.qi=a.qi.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Hp.apply(this,arguments)}function Wp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Qp(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function $p(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Yp=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return m(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Ms(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ds("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Xp=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return m(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ms(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ds("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Jp=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return m(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=yh(),o=0;i&&o<r.activeTargetIds.length;++o)i=Fc(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ds("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Zp=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return m(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ds("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ey=function(){function e(){d(this,e),this.activeTargetIds=yh()}return m(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ty=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Fl(Qs),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Wp(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new ey),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return m(e,[{key:"start",value:function(){var e=T(E().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=A(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Wp(this.persistenceKey,i)))&&(o=Jp.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=A(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem($p(this.persistenceKey,e));if(n){var r=Xp.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem($p(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Cs("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Cs("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Cs("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Cs("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Ds("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(T(E().mark((function e(){var r,i,a,o,u,s,c;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=Dc.at;if(null!=e)try{var n=JSON.parse(e);Os("number"==typeof n),t=n}catch(e){Ds("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Dc.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new Yp(this.currentUser,e,t,n),i=Qp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=Qp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=$p(this.persistenceKey,e),i=new Xp(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return Jp.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Yp.Zi(new Es(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return Xp.Zi(r,t)}},{key:"yr",value:function(e){return Zp.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=T(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:Cs("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=yh();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ny=function(){function e(){d(this,e),this.Lr=new ey,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return m(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new ey,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),ry=function(){function e(){d(this,e)}return m(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),iy=function(){function e(){var t=this;d(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return m(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Cs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=A(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Cs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=A(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),ay={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},oy=function(){function e(t){d(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return m(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),uy=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return m(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new _s;o.setWithCredentials(!0),o.listenOnce(ms.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ys.NO_ERROR:var t=o.getResponseJson();Cs("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ys.TIMEOUT:Cs("Connection",'RPC "'+e+'" timed out'),a(new Ms(Ls.DEADLINE_EXCEEDED,"Request time out"));break;case ys.HTTP_ERROR:var n=o.getStatus();if(Cs("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ls).indexOf(t)>=0?t:Ls.UNKNOWN}(u.status);a(new Ms(s,u.message))}else a(new Ms(Ls.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ms(Ls.UNAVAILABLE,"Connection failed."));break;default:Rs()}}finally{Cs("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=vs(),a=ps(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new bs({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");Cs("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new oy({Hr:function(e){l?Cs("Connection","Not sending because WebChannel is closed:",e):(c||(Cs("Connection","Opening WebChannel transport."),s.open(),c=!0),Cs("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,ws.EventType.OPEN,(function(){l||Cs("Connection","WebChannel transport opened.")})),h(s,ws.EventType.CLOSE,(function(){l||(l=!0,Cs("Connection","WebChannel transport closed"),f.io())})),h(s,ws.EventType.ERROR,(function(e){l||(l=!0,As("Connection","WebChannel transport errored:",e),f.io(new Ms(Ls.UNAVAILABLE,"The operation could not be completed")))})),h(s,ws.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Os(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Cs("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Yf[e];if(void 0!==t)return nh(t)}(a),u=i.message;void 0===o&&(o=Ls.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new Ms(o,u)),s.close()}else Cs("Connection","WebChannel received:",n),f.ro(n)}})),h(a,gs.STAT_EVENT,(function(e){e.stat===ks.PROXY?Cs("Connection","Detected buffering proxy"):e.stat===ks.NOPROXY&&Cs("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return m(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);Cs("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Cs("RestConnection","Received: ",e),e}),(function(t){throw As("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ss,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=ay[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function sy(){return"undefined"!=typeof window?window:null}function cy(){return"undefined"!=typeof document?document:null}function ly(e){return new Dh(e,!0)}var fy=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return m(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Cs("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),hy=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new fy(t,n)}return m(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=T(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Ls.RESOURCE_EXHAUSTED?(Ds(n.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===Ls.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Ms(Ls.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(T(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Cs("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Cs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),dy=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s}return m(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Rs()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(Os(void 0===t||"string"==typeof t),Uc.fromBase64String(t||"")):(Os(void 0===t||t instanceof Uint8Array),Uc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ls.UNKNOWN:nh(e.code);return new Ms(t,e.message||"")}(o);n=new wh(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Fh(e,s.document.name),l=Oh(s.document.updateTime),f=s.document.createTime?Oh(s.document.createTime):Js.min(),h=new Kl({mapValue:{fields:s.document.fields}}),d=Hl.newFoundDocument(c,l,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new kh(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Fh(e,y.document),g=y.readTime?Oh(y.readTime):Js.min(),k=Hl.newNoDocument(m,g),b=y.removedTargetIds||[];n=new kh([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Fh(e,w.document),x=w.removedTargetIds||[];n=new kh([],x,_,null)}else{if(!("filter"in t))return Rs();t.filter;var E=t.filter;E.targetId;var S=E.count||0,T=new eh(S),I=E.targetId;n=new bh(I,T)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return Js.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Js.min():t.readTime?Oh(t.readTime):Js.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Bh(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=Xl(r)?{documents:Wh(e,r)}:{query:Qh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Nh(e,t.resumeToken):t.snapshotVersion.compareTo(Js.min())>0&&(n.readTime=Ah(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Rs()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Bh(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(hy),vy=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s.Jo=!1,s}return m(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,mi(b(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Os(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Os(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Oh(e.updateTime):Oh(t);return n.isEqual(Js.min())&&(n=Oh(t)),new Mf(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Oh(e.commitTime);return this.listener.Zo(n,t)}return Os(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Bh(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Gh(t.yt,e)}))};this.Bo(n)}}]),n}(hy),py=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return m(n,[{key:"su",value:function(){if(this.nu)throw new Ms(Ls.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ls.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ms(Ls.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),u=o[0],s=o[1];return i.connection._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ls.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Ms(Ls.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return m((function e(){d(this,e)}))}());var yy=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return m(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Ds(t),this.ou=!1):Cs("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),my=m((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Cy(o),!e.t0){e.next=5;break}return Cs("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=T(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ps(t))._u.add(4),e.next=4,by(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,gy(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new yy(r,i)}));function gy(e){return ky.apply(this,arguments)}function ky(){return ky=T(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Cy(t)){e.next=18;break}n=A(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),ky.apply(this,arguments)}function by(e){return wy.apply(this,arguments)}function wy(){return wy=T(E().mark((function e(t){var n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=A(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),wy.apply(this,arguments)}function _y(e,t){var n=Ps(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),Iy(n)?Ty(n):rm(n).ko()&&Ey(n,t))}function xy(e,t){var n=Ps(e),r=rm(n);n.du.delete(t),r.ko()&&Sy(n,t),0===n.du.size&&(r.ko()?r.Fo():Cy(n)&&n.gu.set("Unknown"))}function Ey(e,t){e.yu.Ot(t.targetId),rm(e).zo(t)}function Sy(e,t){e.yu.Ot(t),rm(e).Ho(t)}function Ty(e){e.yu=new xh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),rm(e).start(),e.gu.uu()}function Iy(e){return Cy(e)&&!rm(e).No()&&e.du.size>0}function Cy(e){return 0===Ps(e)._u.size}function Dy(e){e.yu=void 0}function Ay(e){return Ny.apply(this,arguments)}function Ny(){return Ny=T(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){Ey(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Ny.apply(this,arguments)}function Ry(e,t){return Oy.apply(this,arguments)}function Oy(){return Oy=T(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dy(t),Iy(t)?(t.gu.hu(n),Ty(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Oy.apply(this,arguments)}function Py(e,t,n){return Ly.apply(this,arguments)}function Ly(){return Ly=T(E().mark((function e(t,n,r){var i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof wh&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=T(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=A(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Cs("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,My(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof kh?t.yu.Kt(n):n instanceof bh?t.yu.Jt(n):t.yu.jt(n),r.isEqual(Js.min())){e.next=29;break}return e.prev=14,e.next=17,Rp(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Uc.EMPTY_BYTE_STRING,n.snapshotVersion)),Sy(e,t);var r=new Fd(n.target,t,1,n.sequenceNumber);Ey(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Cs("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,My(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ly.apply(this,arguments)}function My(e,t,n){return Fy.apply(this,arguments)}function Fy(){return Fy=T(E().mark((function e(t,n,r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_c(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,by(t);case 5:t.gu.set("Offline"),r||(r=function(){return Rp(t.localStore)}),t.asyncQueue.enqueueRetryable(T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,gy(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Fy.apply(this,arguments)}function Uy(e,t){return t().catch((function(n){return My(e,n,t)}))}function Vy(e){return By.apply(this,arguments)}function By(){return By=T(E().mark((function e(t){var n,r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ps(t),r=im(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!jy(n)){e.next=19;break}return e.prev=3,e.next=6,Lp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,qy(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,My(n,e.t0);case 17:e.next=2;break;case 19:zy(n)&&Ky(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),By.apply(this,arguments)}function jy(e){return Cy(e)&&e.fu.length<10}function qy(e,t){e.fu.push(t);var n=im(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function zy(e){return Cy(e)&&!im(e).No()&&e.fu.length>0}function Ky(e){im(e).start()}function Gy(e){return Hy.apply(this,arguments)}function Hy(){return Hy=T(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:im(t).eu();case 1:case"end":return e.stop()}}),e)}))),Hy.apply(this,arguments)}function Wy(e){return Qy.apply(this,arguments)}function Qy(){return Qy=T(E().mark((function e(t){var n,r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=im(t),r=A(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Qy.apply(this,arguments)}function $y(e,t,n){return Yy.apply(this,arguments)}function Yy(){return Yy=T(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=Ld.from(i,n,r),e.next=3,Uy(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Vy(t);case 5:case"end":return e.stop()}}),e)}))),Yy.apply(this,arguments)}function Xy(e,t){return Jy.apply(this,arguments)}function Jy(){return Jy=T(E().mark((function e(t,n){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&im(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=T(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!th(i=n.code)||i===Ls.ABORTED){e.next=7;break}return r=t.fu.shift(),im(t).Mo(),e.next=5,Uy(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Vy(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:zy(t)&&Ky(t);case 5:case"end":return e.stop()}}),e)}))),Jy.apply(this,arguments)}function Zy(e,t){return em.apply(this,arguments)}function em(){return em=T(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Ps(t)).asyncQueue.verifyOperationInProgress(),Cs("RemoteStore","RemoteStore received new credentials"),i=Cy(r),r._u.add(3),e.next=6,by(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,gy(r);case 12:case"end":return e.stop()}}),e)}))),em.apply(this,arguments)}function tm(e,t){return nm.apply(this,arguments)}function nm(){return nm=T(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ps(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,gy(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,by(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),nm.apply(this,arguments)}function rm(e){return e.pu||(e.pu=function(e,t,n){var r=Ps(e);return r.su(),new dy(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Ay.bind(null,e),Zr:Ry.bind(null,e),Wo:Py.bind(null,e)}),e.wu.push(function(){var t=T(E().mark((function t(n){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),Iy(e)?Ty(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:Dy(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function im(e){return e.Iu||(e.Iu=function(e,t,n){var r=Ps(e);return r.su(),new vy(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Gy.bind(null,e),Zr:Xy.bind(null,e),tu:Wy.bind(null,e),Zo:$y.bind(null,e)}),e.wu.push(function(){var t=T(E().mark((function t(n){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,Vy(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Cs("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var am=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return m(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ms(Ls.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function om(e,t){if(Ds("AsyncQueue","".concat(t,": ").concat(e)),_c(e))return new Ms(Ls.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var um=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||rc.comparator(e.key,n.key)}:function(e,t){return rc.comparator(e.key,t.key)},this.keyedMap=uh(),this.sortedSet=new Fl(this.comparator)}return m(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),sm=function(){function e(){d(this,e),this.Tu=new Fl(rc.comparator)}return m(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Rs():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),cm=function(){function e(t,n,r,i,a,o,u,s,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return m(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,um.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),lm=m((function e(){d(this,e),this.Au=void 0,this.listeners=[]})),fm=m((function e(){d(this,e),this.queries=new rh((function(e){return vf(e)}),df),this.onlineState="Unknown",this.Ru=new Set}));function hm(e,t){return dm.apply(this,arguments)}function dm(){return dm=T(E().mark((function e(t,n){var r,i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ps(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new lm),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=om(e.t0,"Initialization of query '".concat(pf(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&gm(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),dm.apply(this,arguments)}function vm(e,t){return pm.apply(this,arguments)}function pm(){return pm=T(E().mark((function e(t,n){var r,i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ps(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),pm.apply(this,arguments)}function ym(e,t){var n,r=Ps(e),i=!1,a=A(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=A(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&gm(r)}function mm(e,t,n){var r=Ps(e),i=r.queries.get(t);if(i){var a,o=A(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function gm(e){e.Ru.forEach((function(e){e.next()}))}var km=function(){function e(t,n,r){d(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return m(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=A(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new cm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=cm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),bm=function(){function e(t,n){d(this,e),this.ku=t,this.byteLength=n}return m(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),wm=function(){function e(t){d(this,e),this.yt=t}return m(e,[{key:"Ji",value:function(e){return Fh(this.yt,e)}},{key:"Yi",value:function(e){return e.metadata.exists?zh(this.yt,e.document,!1):Hl.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Oh(e)}}]),e}(),_m=function(){function e(t,n,r){d(this,e),this.Mu=t,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xm(t)}return m(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=ec.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new wm(this.yt),i=A(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=A(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||vh()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=T(E().mark((function e(){var t,n,r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zp(this.localStore,new wm(this.yt),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=A(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Gp(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function xm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Em=m((function e(t){d(this,e),this.key=t})),Sm=m((function e(t){d(this,e),this.key=t})),Tm=function(){function e(t,n){d(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=vh(),this.mutatedKeys=vh(),this.Gu=gf(t),this.Qu=new um(this.Gu)}return m(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new sm,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=yf(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rs()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new cm(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new sm,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=vh(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Sm(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Em(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=vh();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return cm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),Im=m((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),Cm=m((function e(t){d(this,e),this.key=t,this.nc=!1})),Dm=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new rh((function(e){return vf(e)}),df),this.rc=new Map,this.oc=new Set,this.uc=new Fl(rc.comparator),this.cc=new Map,this.ac=new cp,this.hc={},this.lc=new Map,this.fc=Vv.vn(),this.onlineState="Unknown",this.dc=void 0}return m(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function Am(e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=T(E().mark((function e(t,n){var r,i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=xg(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,Mp(r.localStore,lf(n));case 8:return u=e.sent,r.isPrimaryClient&&_y(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Rm(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Nm.apply(this,arguments)}function Rm(e,t,n,r,i){return Om.apply(this,arguments)}function Om(){return Om=T(E().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=T(E().mark((function e(t,n,r,i){var a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,Vp(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Zm(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Vp(t.localStore,n,!0);case 3:return o=e.sent,u=new Tm(n,o.Hi),s=u.Wu(o.documents),c=gh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Zm(t,r,l.Xu),f=new Im(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Om.apply(this,arguments)}function Pm(e,t){return Lm.apply(this,arguments)}function Lm(){return Lm=T(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ps(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!df(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Fp(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),xy(r.remoteStore,i.targetId),Xm(r,i.targetId)})).catch(pc);case 9:e.next=14;break;case 11:return Xm(r,i.targetId),e.next=14,Fp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Lm.apply(this,arguments)}function Mm(e,t,n){return Fm.apply(this,arguments)}function Fm(){return Fm=T(E().mark((function e(t,n,r){var i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Eg(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Ps(e),a=Xs.now(),o=t.reduce((function(e,t){return e.add(t.key)}),vh());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=ah(),s=vh();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=A(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=zf(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Hf(c.key,l,Gl(l.value.mapValue),Ff.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:sh(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Fl(Qs)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,ng(i,a.changes);case 9:return e.next=11,Vy(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=om(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Fm.apply(this,arguments)}function Um(e,t){return Vm.apply(this,arguments)}function Vm(){return Vm=T(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ps(t),e.prev=1,e.next=4,Op(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Os(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Os(n.nc):e.removedDocuments.size>0&&(Os(n.nc),n.nc=!1))})),e.next=8,ng(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,pc(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Vm.apply(this,arguments)}function Bm(e,t,n){var r=Ps(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Ps(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=A(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&gm(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function jm(e,t,n){return qm.apply(this,arguments)}function qm(){return qm=T(E().mark((function e(t,n,r){var i,a,o,u,s,c;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Ps(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Fl(rc.comparator)).insert(o,Hl.newNoDocument(o,Js.min())),s=vh().add(o),c=new mh(Js.min(),new Map,new Bl(Qs),u,s),e.next=9,Um(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),tg(i),e.next=16;break;case 14:return e.next=16,Fp(i.localStore,n,!1).then((function(){return Xm(i,n,r)})).catch(pc);case 16:case"end":return e.stop()}}),e)}))),qm.apply(this,arguments)}function zm(e,t){return Km.apply(this,arguments)}function Km(){return Km=T(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ps(t),i=n.batch.batchId,e.prev=1,e.next=4,Np(r.localStore,n);case 4:return a=e.sent,Ym(r,i,null),$m(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,ng(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,pc(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Km.apply(this,arguments)}function Gm(e,t,n){return Hm.apply(this,arguments)}function Hm(){return Hm=T(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ps(t),e.prev=1,e.next=4,function(e,t){var n=Ps(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Os(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Ym(i,n,r),$m(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,ng(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,pc(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Hm.apply(this,arguments)}function Wm(e,t){return Qm.apply(this,arguments)}function Qm(){return Qm=T(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cy((r=Ps(t)).remoteStore)||Cs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Ps(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=om(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Qm.apply(this,arguments)}function $m(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function Ym(e,t,n){var r=Ps(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function Xm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=A(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||Jm(e,t)}))}function Jm(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(xy(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),tg(e))}function Zm(e,t,n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Em?(e.ac.addReference(a.key,t),eg(e,a)):a instanceof Sm?(Cs("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||Jm(e,a.key)):Rs()}}catch(o){i.e(o)}finally{i.f()}}function eg(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Cs("SyncEngine","New document in limbo: "+n),e.oc.add(r),tg(e))}function tg(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new rc(ec.fromString(t)),r=e.fc.next();e.cc.set(r,new Cm(n)),e.uc=e.uc.insert(n,r),_y(e.remoteStore,new Fd(lf(rf(n.path)),r,2,Dc.at))}}function ng(e,t,n){return rg.apply(this,arguments)}function rg(){return rg=T(E().mark((function e(t,n,r){var i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ps(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Sp.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=T(E().mark((function e(t,n){var r,i,a,o,u,s,c,l;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ps(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return mc.forEach(n,(function(t){return mc.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return mc.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),_c(e.t0)){e.next=10;break}throw e.t0;case 10:Cs("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=A(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qi=r.qi.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),rg.apply(this,arguments)}function ig(e,t){return ag.apply(this,arguments)}function ag(){return ag=T(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Ps(t)).currentUser.isEqual(n)){e.next=11;break}return Cs("SyncEngine","User change. New user:",n.toKey()),e.next=5,Dp(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new Ms(Ls.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,ng(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),ag.apply(this,arguments)}function og(e,t){var n=Ps(e),r=n.cc.get(t);if(r&&r.nc)return vh().add(r.key);var i=vh(),a=n.rc.get(t);if(!a)return i;var o,u=A(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function ug(e,t){return sg.apply(this,arguments)}function sg(){return sg=T(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ps(t),e.next=3,Vp(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&Zm(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),sg.apply(this,arguments)}function cg(e,t){return lg.apply(this,arguments)}function lg(){return lg=T(E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ps(t),e.abrupt("return",jp(r.localStore,n).then((function(e){return ng(r,e)})));case 2:case"end":return e.stop()}}),e)}))),lg.apply(this,arguments)}function fg(e,t,n,r){return hg.apply(this,arguments)}function hg(){return hg=T(E().mark((function e(t,n,r,i){var a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ps(t),e.next=3,function(e,t){var n=Ps(e),r=Ps(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):mc.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Vy(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Ym(a,n,i||null),$m(a,n),function(e,t){Ps(Ps(e).mutationQueue).An(t)}(a.localStore,n)):Rs();case 11:return e.next=13,ng(a,o);case 13:e.next=16;break;case 15:Cs("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),hg.apply(this,arguments)}function dg(e,t){return vg.apply(this,arguments)}function vg(){return vg=T(E().mark((function e(t,n){var r,i,a,o,u,s,c,l;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xg(r=Ps(t)),Eg(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,pg(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,tm(r.remoteStore,!0);case 9:o=A(a);try{for(o.s();!(u=o.n()).done;)s=u.value,_y(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Xm(r,t),Fp(r.localStore,t,!0)})),xy(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,pg(r,c);case 21:return function(e){var t=Ps(e);t.cc.forEach((function(e,n){xy(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new Fl(rc.comparator)}(r),r.dc=!1,e.next=25,tm(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),vg.apply(this,arguments)}function pg(e,t,n){return yg.apply(this,arguments)}function yg(){return yg=T(E().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,v,p,y,m;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Ps(t),a=[],o=[],u=A(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,Mp(i.localStore,lf(f[0]));case 11:l=e.sent,h=A(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return v=d.value,p=i.ic.get(v),e.next=20,ug(i,p);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Bp(i.localStore,c);case 36:return m=e.sent,e.next=39,Mp(i.localStore,m);case 39:return l=e.sent,e.next=42,Rm(i,mg(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),yg.apply(this,arguments)}function mg(e){return nf(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function gg(e){var t=Ps(e);return Ps(Ps(t.localStore).persistence).vi()}function kg(e,t,n,r){return bg.apply(this,arguments)}function bg(){return bg=T(E().mark((function e(t,n,r,i){var a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Ps(t)).dc){e.next=3;break}return e.abrupt("return",void Cs("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,jp(a.localStore,mf(o[0]));case 10:return u=e.sent,s=mh.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Uc.EMPTY_BYTE_STRING),e.next=14,ng(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Fp(a.localStore,n,!0);case 17:return Xm(a,n,i),e.abrupt("break",20);case 19:Rs();case 20:case"end":return e.stop()}}),e)}))),bg.apply(this,arguments)}function wg(e,t,n){return _g.apply(this,arguments)}function _g(){return _g=T(E().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=xg(t)).dc){e.next=45;break}a=A(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return Cs("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Bp(i.localStore,u);case 12:return s=e.sent,e.next=15,Mp(i.localStore,s);case 15:return c=e.sent,e.next=18,Rm(i,mg(s),c.targetId,!1,c.resumeToken);case 18:_y(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=A(r),e.prev=30,h=E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,Fp(i.localStore,t,!1).then((function(){xy(i.remoteStore,t),Xm(i,t)})).catch(pc);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),_g.apply(this,arguments)}function xg(e){var t=Ps(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Um.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=og.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jm.bind(null,t),t.sc.Wo=ym.bind(null,t.eventManager),t.sc.wc=mm.bind(null,t.eventManager),t}function Eg(e){var t=Ps(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Gm.bind(null,t),t}function Sg(e,t,n){var r=Ps(e);(function(){var e=T(E().mark((function e(t,n,r){var i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Ps(e),r=Oh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(xm(i)),a=new _m(i,t.localStore,n.yt),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,ng(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=Ps(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(As("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Tg=function(){function e(){d(this,e),this.synchronizeTabs=!1}return m(e,[{key:"initialize",value:function(){var e=T(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=ly(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return Cp(this.persistence,new Tp,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new pp(mp.Bs,this.yt)}},{key:"gc",value:function(e){return new ny}},{key:"terminate",value:function(){var e=T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ig=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return m(n,[{key:"initialize",value:function(){var e=T(E().mark((function e(t){var r=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mi(b(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,Eg(this.Ac.syncEngine);case 6:return e.next=8,Vy(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return Cp(this.persistence,new Tp,e.initialUser,this.yt)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Hv(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new Cc(t,this.persistence);return new Ic(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=Ep(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Nv.withCacheSize(this.cacheSizeBytes):Nv.DEFAULT;return new wp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,sy(),cy(),this.yt,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new ny}}]),n}(Tg),Cg=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return m(n,[{key:"initialize",value:function(){var e=T(E().mark((function e(t){var r,i=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mi(b(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof ty,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:fg.bind(null,r),$r:kg.bind(null,r),Br:wg.bind(null,r),vi:gg.bind(null,r),Mr:cg.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=T(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dg(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=sy();if(!ty.C(t))throw new Ms(Ls.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ep(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ty(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Ig),Dg=function(){function e(){d(this,e)}return m(e,[{key:"initialize",value:function(){var e=T(E().mark((function e(t,n){var r=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Bm(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ig.bind(null,this.syncEngine),e.next=12,tm(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new fm}},{key:"createDatastore",value:function(e){var t,n=ly(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new uy(t));return function(e,t,n,r){return new py(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Bm(o.syncEngine,e,0)},a=iy.C()?new iy:new ry,new my(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Dm(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=T(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ps(t),Cs("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,by(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Ag(e,t,n){if(!n)throw new Ms(Ls.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ng(e,t,n,r){if(!0===t&&!0===r)throw new Ms(Ls.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Rg(e){if(!rc.isDocumentKey(e))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Og(e){if(rc.isDocumentKey(e))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Pg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Rs()}function Lg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ms(Ls.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Pg(e);throw new Ms(Ls.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Mg(e,t){if(t<=0)throw new Ms(Ls.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Fg=new Map,Ug=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Ms(Ls.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ms(Ls.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ng("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return m(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Vg=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ug({}),this._settingsFrozen=!1}return m(e,[{key:"app",get:function(){if(!this._app)throw new Ms(Ls.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Ms(Ls.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ug(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Vs;switch(e.type){case"gapi":var t=e.client;return new zs(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ms(Ls.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Fg.get(e);t&&(Cs("ComponentProvider","Removing Datastore"),Fg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Bg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Lg(e,Vg))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&As("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Es.MOCK_USER;else{o=En(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Ms(Ls.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Es(s)}e._authCredentials=new Bs(new Us(o,u))}}var jg=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return m(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new zg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),qg=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return m(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),zg=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,rf(i)))._path=i,a.type="collection",a}return m(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new jg(this.firestore,null,new rc(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(qg);function Kg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Un(e),Ag("collection","path",t),e instanceof Vg){var a=ec.fromString.apply(ec,[t].concat(r));return Og(a),new zg(e,null,a)}if(!(e instanceof jg||e instanceof zg))throw new Ms(Ls.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ec.fromString.apply(ec,[t].concat(r)));return Og(o),new zg(e.firestore,null,o)}function Gg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Un(e),1===arguments.length&&(t=Ws.R()),Ag("doc","path",t),e instanceof Vg){var a=ec.fromString.apply(ec,[t].concat(r));return Rg(a),new jg(e,null,new rc(a))}if(!(e instanceof jg||e instanceof zg))throw new Ms(Ls.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ec.fromString.apply(ec,[t].concat(r)));return Rg(o),new jg(e.firestore,e instanceof zg?e.converter:null,new rc(o))}function Hg(e,t){return e=Un(e),t=Un(t),(e instanceof jg||e instanceof zg)&&(t instanceof jg||t instanceof zg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Wg(e,t){return e=Un(e),t=Un(t),e instanceof qg&&t instanceof qg&&e.firestore===t.firestore&&df(e._query,t._query)&&e.converter===t.converter}function Qg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return T(E().mark((function r(){var i;return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var $g=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return m(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Yg=function(){function e(t,n){var r=this;d(this,e),this.Pc=t,this.yt=n,this.metadata=new Fs,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return m(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=T(E().mark((function e(){var t,n,r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new bm(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=T(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=T(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=T(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Xg=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return m(e,[{key:"lookup",value:function(){var e=T(E().mark((function e(t){var n,r=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Ms(Ls.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=T(E().mark((function e(t,n){var r,i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ps(t),i=Bh(r.yt)+"/documents",a={documents:n.map((function(e){return Mh(r.yt,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Kh(r.yt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Os(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Jf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=T(E().mark((function e(){var t,n=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=rc.fromPath(t);n.mutations.push(new Zf(r,n.precondition(r)))})),e.next=7,function(){var e=T(E().mark((function e(t,n){var r,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ps(t),i=Bh(r.yt)+"/documents",a={writes:n.map((function(e){return Gh(r.yt,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Rs();t=Js.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ms(Ls.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Js.min())?Ff.exists(!1):Ff.updateTime(t):Ff.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Js.min()))throw new Ms(Ls.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ff.updateTime(t)}return Ff.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Jg=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new fy(this.asyncQueue,"transaction_retry")}return m(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(T(E().mark((function t(){var n,r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Xg(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Lc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!th(t)}return!1}}]),e}(),Zg=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Es.UNAUTHENTICATED,this.clientId=Ws.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=T(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Cs("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return m(e,[{key:"getConfiguration",value:function(){var e=T(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Ms(Ls.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(T(E().mark((function n(){var r;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=om(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function ek(e,t){return tk.apply(this,arguments)}function tk(){return tk=T(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Cs("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=T(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Dp(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),tk.apply(this,arguments)}function nk(e,t){return rk.apply(this,arguments)}function rk(){return rk=T(E().mark((function e(t,n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,ik(t);case 3:return r=e.sent,Cs("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Zy(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Zy(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),rk.apply(this,arguments)}function ik(e){return ak.apply(this,arguments)}function ak(){return ak=T(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Cs("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,ek(t,new Tg);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),ak.apply(this,arguments)}function ok(e){return uk.apply(this,arguments)}function uk(){return uk=T(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Cs("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,nk(t,new Dg);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),uk.apply(this,arguments)}function sk(e){return ik(e).then((function(e){return e.persistence}))}function ck(e){return ik(e).then((function(e){return e.localStore}))}function lk(e){return ok(e).then((function(e){return e.remoteStore}))}function fk(e){return ok(e).then((function(e){return e.syncEngine}))}function hk(e){return ok(e).then((function(e){return e.datastore}))}function dk(e){return vk.apply(this,arguments)}function vk(){return vk=T(E().mark((function e(t){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ok(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Am.bind(null,n.syncEngine),r.onUnlisten=Pm.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),vk.apply(this,arguments)}function pk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Fs;return e.asyncQueue.enqueueAndForget(T(E().mark((function i(){return E().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $g({next:function(a){t.enqueueAndForget((function(){return vm(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Ms(Ls.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Ms(Ls.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new km(rf(n.path),a,{includeMetadataChanges:!0,Nu:!0});return hm(e,o)},i.next=3,dk(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function yk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Fs;return e.asyncQueue.enqueueAndForget(T(E().mark((function i(){return E().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $g({next:function(n){t.enqueueAndForget((function(){return vm(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Ms(Ls.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new km(n,a,{includeMetadataChanges:!0,Nu:!0});return hm(e,o)},i.next=3,dk(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var mk=function(){function e(){var t=this;d(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new fy(this,"async_queue_retry"),this.Wc=function(){var e=cy();e&&Cs("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=cy();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return m(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=cy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new Fs;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=T(E().mark((function e(){var t=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),_c(e.t0)){e.next=12;break}throw e.t0;case 12:Cs("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ds("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=am.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&Rs()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=T(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=A(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=A(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function gk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=A(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var kk=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new Fs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return m(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),bk=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new mk,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return m(n,[{key:"_terminate",value:function(){return this._firestoreClient||_k(this),this._firestoreClient.terminate()}}]),n}(Vg);function wk(e){return e._firestoreClient||_k(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function _k(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ac(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Zg(e._authCredentials,e._appCheckCredentials,e._queue,r)}function xk(e,t,n){var r=new Fs;return e.asyncQueue.enqueue(T(E().mark((function i(){var a;return E().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,ek(e,n);case 3:return i.next=5,nk(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ls.FAILED_PRECONDITION||e.code===Ls.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:As("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Ek(e){return function(e){return e.asyncQueue.enqueue(T(E().mark((function t(){var n,r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sk(e);case 2:return n=t.sent,t.next=5,lk(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Ps(e);return t._u.delete(0),gy(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(wk(e=Lg(e,bk)))}function Sk(e){return function(e){return e.asyncQueue.enqueue(T(E().mark((function t(){var n,r;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sk(e);case 2:return n=t.sent,t.next=5,lk(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=T(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ps(t))._u.add(0),e.next=4,by(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(wk(e=Lg(e,bk)))}function Tk(e,t){var n=wk(e=Lg(e,bk)),r=new kk;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Yg(e,t)}(function(e,t){if(e instanceof Uint8Array)return Qg(e,t);if(e instanceof ArrayBuffer)return Qg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,ly(t));e.asyncQueue.enqueueAndForget(T(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Sg,t.next=3,fk(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Ik(e,t){return function(e,t){return e.asyncQueue.enqueue(T(E().mark((function n(){return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Ps(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,ck(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(wk(e=Lg(e,bk)),t).then((function(t){return t?new qg(e,null,t.query):null}))}function Ck(e){if(e._initialized||e._terminated)throw new Ms(Ls.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Dk=function(){function e(t){d(this,e),this._byteString=t}return m(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Uc.fromBase64String(t))}catch(t){throw new Ms(Ls.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Uc.fromUint8Array(t))}}]),e}(),Ak=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nc(n)}return m(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Nk=m((function e(t){d(this,e),this._methodName=t})),Rk=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Ms(Ls.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ms(Ls.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return m(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Qs(this._lat,e._lat)||Qs(this._long,e._long)}}]),e}(),Ok=/^__.*__$/,Pk=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Hf(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gf(e,this.data,t,this.fieldTransforms)}}]),e}(),Lk=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return new Hf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Mk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rs()}}var Fk=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return m(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return rb(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Mk(this.sa)&&Ok.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),Uk=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||ly(t)}return m(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Fk({sa:e,methodName:t,fa:n,path:nc.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function Vk(e){var t=e._freezeSettings(),n=ly(e._databaseId);return new Uk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Bk(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);Zk("Data must be an object, but it was:",o,r);var u,s,c=Xk(r,o);if(a.merge)u=new zl(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=A(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=eb(t,l.value,n);if(!o.contains(d))throw new Ms(Ls.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));ib(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new zl(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Pk(new Kl(c),u,s)}var jk=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Nk);function qk(e,t,n){return new Fk({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var zk=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){return new Lf(e.path,new If)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Nk),Kk=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=qk(this,e,!0),n=this._a.map((function(e){return Yk(e,t)})),r=new Cf(n);return new Lf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Nk),Gk=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=qk(this,e,!0),n=this._a.map((function(e){return Yk(e,t)})),r=new Af(n);return new Lf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Nk),Hk=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).wa=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=new Rf(e.yt,_f(e.yt,this.wa));return new Lf(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Nk);function Wk(e,t,n,r){var i=e.da(1,t,n);Zk("Data must be an object, but it was:",i,r);var a=[],o=Kl.empty();Oc(r,(function(e,r){var u=nb(t,e,n);r=Un(r);var s=i.ca(u);if(r instanceof jk)a.push(u);else{var c=Yk(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new zl(a);return new Lk(o,u,i.fieldTransforms)}function Qk(e,t,n,r,i,a){var o=e.da(1,t,n),u=[eb(t,r,n)],s=[i];if(a.length%2!=0)throw new Ms(Ls.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(eb(t,a[c])),s.push(a[c+1]);for(var l=[],f=Kl.empty(),h=u.length-1;h>=0;--h)if(!ib(l,u[h])){var d=u[h],v=s[h];v=Un(v);var p=o.ca(d);if(v instanceof jk)l.push(d);else{var y=Yk(v,p);null!=y&&(l.push(d),f.set(d,y))}}var m=new zl(l);return new Lk(f,m,o.fieldTransforms)}function $k(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Yk(n,e.da(r?4:3,t))}function Yk(e,t){if(Jk(e=Un(e)))return Zk("Unsupported field value:",t,e),Xk(e,t);if(e instanceof Nk)return function(e,t){if(!Mk(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=A(e);try{for(a.s();!(n=a.n()).done;){var o=Yk(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Un(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _f(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Xs.fromDate(e);return{timestampValue:Ah(t.yt,n)}}if(e instanceof Xs){var r=new Xs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ah(t.yt,r)}}if(e instanceof Rk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dk)return{bytesValue:Nh(t.yt,e._byteString)};if(e instanceof jg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Ph(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(Pg(e)))}(e,t)}function Xk(e,t){var n={};return Pc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Oc(e,(function(e,r){var i=Yk(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Jk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xs||e instanceof Rk||e instanceof Dk||e instanceof jg||e instanceof Nk)}function Zk(e,t,n){if(!Jk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Pg(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function eb(e,t,n){if((t=Un(t))instanceof Ak)return t._internalPath;if("string"==typeof t)return nb(e,t);throw rb("Field path arguments must be of type string or ",e,!1,void 0,n)}var tb=new RegExp("[~\\*/\\[\\]]");function nb(e,t,n){if(t.search(tb)>=0)throw rb("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return C(Ak,h(t.split(".")))._internalPath}catch(r){throw rb("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function rb(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Ms(Ls.INVALID_ARGUMENT,u+e+s)}function ib(e,t){return e.some((function(e){return e.isEqual(t)}))}var ab=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return m(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new jg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ob(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ub("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ob=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){return mi(b(n.prototype),"data",this).call(this)}}]),n}(ab);function ub(e,t){return"string"==typeof t?nb(e,t):t instanceof Ak?t._internalPath:t._delegate._internalPath}function sb(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ms(Ls.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cb=m((function e(){d(this,e)})),lb=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n)}(cb);function fb(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof cb&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof db})).length,n=e.filter((function(e){return e instanceof hb})).length;if(t>1||t>0&&n>0)throw new Ms(Ls.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=A(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var hb=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return m(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Sb(e._query,t),new qg(e.firestore,e.converter,ff(e._query,t))}},{key:"_parse",value:function(e){var t=Vk(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Eb(o,a);var s,c=[],l=A(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(xb(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=xb(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Eb(o,a),u=$k(n,"where",o,"in"===a||"not-in"===a);return ml.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lb);var db=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return m(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:gl.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=A(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Sb(r,a),r=ff(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new qg(e.firestore,e.converter,ff(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(cb);var vb=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return m(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ll(t,n);return function(e,t){if(null===of(e)){var n=uf(e);null!==n&&Tb(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new qg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new tf(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(lb);var pb=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return m(n,[{key:"_apply",value:function(e){return new qg(e.firestore,e.converter,hf(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lb);var yb=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=_b(e,this.type,this._docOrFields,this._inclusive);return new qg(e.firestore,e.converter,function(e,t){return new tf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lb);function mb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return yb._create("startAt",t,!0)}function gb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return yb._create("startAfter",t,!1)}var kb=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=_b(e,this.type,this._docOrFields,this._inclusive);return new qg(e.firestore,e.converter,function(e,t){return new tf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lb);function bb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kb._create("endBefore",t,!1)}function wb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kb._create("endAt",t,!0)}function _b(e,t,n,r){if(n[0]=Un(n[0]),n[0]instanceof ab)return function(e,t,n,r,i){if(!r)throw new Ms(Ls.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=A(cf(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(tl(t,r.key));else{var c=r.data.field(s.field);if(zc(c))throw new Ms(Ls.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new dl(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Vk(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Ms(Ls.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!sf(e)&&-1!==c.indexOf("/"))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ec.fromString(c));if(!rc.isDocumentKey(l))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new rc(l);u.push(tl(t,f))}else{var h=$k(n,r,c);u.push(h)}}return new dl(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function xb(e,t,n){if("string"==typeof(n=Un(n))){if(""===n)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sf(t)&&-1!==n.indexOf("/"))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ec.fromString(n));if(!rc.isDocumentKey(r))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return tl(e,new rc(r))}if(n instanceof jg)return tl(e,n._key);throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Pg(n),"."))}function Eb(e,t){if(!Array.isArray(e)||0===e.length)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Sb(e,t){if(t.isInequality()){var n=uf(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=of(e);null!==i&&Tb(e,r,i)}var a=function(e,t){var n,r=A(e);try{for(r.s();!(n=r.n()).done;){var i,a=A(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Tb(e,t,n){if(!n.isEqual(t))throw new Ms(Ls.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Ib=function(){function e(){d(this,e)}return m(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Rs()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Oc(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Rk(jc(e.latitude),jc(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Kc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gc(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Bc(e);return new Xs(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ec.fromString(e);Os(id(n));var r=new Nc(n.get(1),n.get(3)),i=new rc(n.popFirst(5));return r.isEqual(t)||Ds("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Cb(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Db=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new Dk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new jg(this.firestore,null,t)}}]),n}(Ib),Ab=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return m(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Nb=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return m(n,[{key:"exists",value:function(){return mi(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Rb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ub("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(ab),Rb=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mi(b(n.prototype),"data",this).call(this,e)}}]),n}(Nb),Ob=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ab(i.hasPendingWrites,i.fromCache),this.query=r}return m(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Rb(n._firestore,n._userDataWriter,r.key,r,new Ab(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ms(Ls.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Rb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ab(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Rb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ab(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Pb(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Pb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rs()}}function Lb(e,t){return e instanceof Nb&&t instanceof Nb?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ob&&t instanceof Ob&&e._firestore===t._firestore&&Wg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Mb=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new Dk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new jg(this.firestore,null,t)}}]),n}(Ib);function Fb(e){e=Lg(e,jg);var t=Lg(e.firestore,bk),n=wk(t),r=new Mb(t);return function(e,t){var n=new Fs;return e.asyncQueue.enqueueAndForget(T(E().mark((function r(){return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=T(E().mark((function e(t,n,r){var i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Ps(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Ms(Ls.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=om(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ck(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Nb(t,r,e._key,n,new Ab(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Ub(e){e=Lg(e,qg);var t=Lg(e.firestore,bk),n=wk(t),r=new Mb(t);return function(e,t){var n=new Fs;return e.asyncQueue.enqueueAndForget(T(E().mark((function r(){return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=T(E().mark((function e(t,n,r){var i,a,o,u,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vp(t,n,!0);case 3:i=e.sent,a=new Tm(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=om(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ck(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Ob(t,r,e,n)}))}function Vb(e,t,n){e=Lg(e,jg);var r=Lg(e.firestore,bk),i=Cb(e.converter,t,n);return zb(r,[Bk(Vk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ff.none())])}function Bb(e,t,n){e=Lg(e,jg);for(var r=Lg(e.firestore,bk),i=Vk(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return zb(r,[("string"==typeof(t=Un(t))||t instanceof Ak?Qk(i,"updateDoc",e._key,t,n,o):Wk(i,"updateDoc",e._key,t)).toMutation(e._key,Ff.exists(!0))])}function jb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Un(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||gk(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(gk(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof jg)l=Lg(e.firestore,bk),f=rf(e._key.path),c={next:function(t){n[s]&&n[s](Kb(l,e,t))},error:n[s+1],complete:n[s+2]};else{var v=Lg(e,qg);l=Lg(v.firestore,bk),f=v._query;var p=new Mb(l);c={next:function(e){n[s]&&n[s](new Ob(l,p,v,e))},error:n[s+1],complete:n[s+2]},sb(e._query)}return function(e,t,n,r){var i=new $g(r),a=new km(t,i,n);return e.asyncQueue.enqueueAndForget(T(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hm,t.next=3,dk(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(T(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vm,t.next=3,dk(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(wk(l),f,h,c)}function qb(e,t){return function(e,t){var n=new $g(t);return e.asyncQueue.enqueueAndForget(T(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ps(e).Ru.add(t),t.next()},t.next=3,dk(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(T(E().mark((function t(){return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ps(e).Ru.delete(t)},t.next=3,dk(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(wk(e=Lg(e,bk)),gk(t)?t:{next:t})}function zb(e,t){return function(e,t){var n=new Fs;return e.asyncQueue.enqueueAndForget(T(E().mark((function r(){return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Mm,r.next=3,fk(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(wk(e),t)}function Kb(e,t,n){var r=n.docs.get(t._key),i=new Mb(e);return new Nb(e,i,t._key,r,new Ab(n.hasPendingWrites,n.fromCache),t.converter)}var Gb={maxAttempts:5},Hb=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vk(t)}return m(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Wb(e,this._firestore),i=Cb(r.converter,t,n),a=Bk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ff.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Wb(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Un(t))||t instanceof Ak?Qk(this._dataReader,"WriteBatch.update",i._key,t,n,o):Wk(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ff.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Wb(e,this._firestore);return this._mutations=this._mutations.concat(new Jf(t._key,Ff.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Ms(Ls.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Wb(e,t){if((e=Un(e)).firestore!==t)throw new Ms(Ls.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Qb=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return m(n,[{key:"get",value:function(e){var t=this,r=Wb(e,this._firestore),i=new Mb(this._firestore);return mi(b(n.prototype),"get",this).call(this,e).then((function(e){return new Nb(t._firestore,i,r._key,e._document,new Ab(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=Vk(t)}return m(e,[{key:"get",value:function(e){var t=this,n=Wb(e,this._firestore),r=new Db(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Rs();var i=e[0];if(i.isFoundDocument())return new ab(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ab(t._firestore,r,n._key,null,n.converter);throw Rs()}))}},{key:"set",value:function(e,t,n){var r=Wb(e,this._firestore),i=Cb(r.converter,t,n),a=Bk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Wb(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Un(t))||t instanceof Ak?Qk(this._dataReader,"Transaction.update",i._key,t,n,o):Wk(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Wb(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function $b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Kk("arrayUnion",t)}function Yb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gk("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ss=e}(Lr),Cr(new Vn("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new bk(new js(e.getProvider("auth-internal")),new Gs(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ms(Ls.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),jr(xs,"3.8.3",e),jr(xs,"3.8.3","esm2017")}();var Xb="@firebase/firestore-compat",Jb="0.3.3";function Zb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ms("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function ew(){if("undefined"===typeof Uint8Array)throw new Ms("unimplemented","Uint8Arrays are not available in this environment.")}function tw(){if("undefined"==typeof atob)throw new Ms("unimplemented","Blobs are unavailable in Firestore in this environment.")}var nw=function(){function e(t){d(this,e),this._delegate=t}return m(e,[{key:"toBase64",value:function(){return tw(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return ew(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return tw(),new e(Dk.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return ew(),new e(Dk.fromUint8Array(t))}}]),e}();function rw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=A(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var iw=function(){function e(){d(this,e)}return m(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Ck(e=Lg(e,bk));var n=wk(e),r=e._freezeSettings(),i=new Dg;return xk(n,i,new Ig(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Ck(e=Lg(e,bk));var t=wk(e),n=e._freezeSettings(),r=new Dg;return xk(t,r,new Cg(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Ms(Ls.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Fs;return e._queue.enqueueAndForgetEvenWhileRestricted(T(E().mark((function n(){return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=T(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kc.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,kc.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Ep(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),aw=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Nc||(this._appCompat=t)}return m(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||As("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Bg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Ek(this._delegate)}},{key:"disableNetwork",value:function(){return Sk(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Ng("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Fs;return e.asyncQueue.enqueueAndForget(T(E().mark((function n(){return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Wm,n.next=3,fk(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(wk(e=Lg(e,bk)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return qb(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Ms("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new kw(this,Kg(this._delegate,e))}catch(t){throw fw(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new lw(this,Gg(this._delegate,e))}catch(t){throw fw(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new yw(this,function(e,t){if(e=Lg(e,Vg),Ag("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ms(Ls.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new qg(e,null,function(e){return new tf(ec.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw fw(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Lg(e,bk);var r=Object.assign(Object.assign({},Gb),n);return function(e){if(e.maxAttempts<1)throw new Ms(Ls.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Fs;return e.asyncQueue.enqueueAndForget(T(E().mark((function i(){var a;return E().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,hk(e);case 2:a=i.sent,new Jg(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(wk(e),(function(n){return t(new Qb(e,n))}),r)}(this._delegate,(function(n){return e(new uw(t,n))}))}},{key:"batch",value:function(){var e=this;return wk(this._delegate),new sw(new Hb(this._delegate,(function(t){return zb(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Tk(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Ik(this._delegate,e).then((function(e){return e?new yw(t,e):null}))}}]),e}(),ow=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new nw(new Dk(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return lw.forKey(t,this.firestore,null)}}]),n}(Ib);var uw=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new ow(t)}return m(e,[{key:"get",value:function(e){var t=this,n=bw(e);return this._delegate.get(n).then((function(e){return new vw(t._firestore,new Nb(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=bw(e);return n?(Zb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=bw(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=bw(e);return this._delegate.delete(t),this}}]),e}(),sw=function(){function e(t){d(this,e),this._delegate=t}return m(e,[{key:"set",value:function(e,t,n){var r=bw(e);return n?(Zb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=bw(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=bw(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),cw=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return m(e,[{key:"fromFirestore",value:function(e,t){var n=new Rb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pw(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new ow(t),n),i.set(n,a)),a}}]),e}();cw.INSTANCES=new WeakMap;var lw=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ow(t)}return m(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new kw(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new kw(this.firestore,Kg(this._delegate,e))}catch(t){throw fw(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Un(e))instanceof jg&&Hg(this._delegate,e)}},{key:"set",value:function(e,t){t=Zb("DocumentReference.set",t);try{return t?Vb(this._delegate,e,t):Vb(this._delegate,e)}catch(n){throw fw(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Bb(this._delegate,e):Bb.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw fw(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return zb(Lg(e.firestore,bk),[new Jf(e._key,Ff.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=hw(n),a=dw(n,(function(t){return new vw(e.firestore,new Nb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return jb(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Fb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Lg(e,jg);var t=Lg(e.firestore,bk);return pk(wk(t),e._key,{source:"server"}).then((function(n){return Kb(t,e,n)}))}(this._delegate):function(e){e=Lg(e,jg);var t=Lg(e.firestore,bk);return pk(wk(t),e._key).then((function(n){return Kb(t,e,n)}))}(this._delegate),t.then((function(e){return new vw(n.firestore,new Nb(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(cw.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Ms("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new jg(n._delegate,r,new rc(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new jg(n._delegate,r,t))}}]),e}();function fw(e,t,n){return e.message=e.message.replace(t,n),e}function hw(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!rw(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function dw(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=rw(e[0])?e[0]:rw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var vw=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"ref",get:function(){return new lw(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Lb(this._delegate,e._delegate)}}]),e}(),pw=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Rs()}(void 0!==t),t}}]),n}(vw),yw=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ow(t)}return m(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,fb(this._delegate,function(e,t,n){var r=t,i=ub("where",e);return hb._create(i,r,n)}(t,n,r)))}catch(i){throw fw(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,fb(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ub("orderBy",e);return vb._create(n,t)}(t,n)))}catch(r){throw fw(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,fb(this._delegate,function(e){return Mg("limit",e),pb._create("limit",e,"F")}(t)))}catch(n){throw fw(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,fb(this._delegate,function(e){return Mg("limitToLast",e),pb._create("limitToLast",e,"L")}(t)))}catch(n){throw fw(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,fb(this._delegate,mb.apply(void 0,arguments)))}catch(t){throw fw(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,fb(this._delegate,gb.apply(void 0,arguments)))}catch(t){throw fw(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,fb(this._delegate,bb.apply(void 0,arguments)))}catch(t){throw fw(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,fb(this._delegate,wb.apply(void 0,arguments)))}catch(t){throw fw(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Wg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Ub(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Lg(e,qg);var t=Lg(e.firestore,bk),n=wk(t),r=new Mb(t);return yk(n,e._query,{source:"server"}).then((function(n){return new Ob(t,r,e,n)}))}(this._delegate):function(e){e=Lg(e,qg);var t=Lg(e.firestore,bk),n=wk(t),r=new Mb(t);return sb(e._query),yk(n,e._query).then((function(n){return new Ob(t,r,e,n)}))}(this._delegate),t.then((function(e){return new gw(n.firestore,new Ob(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=hw(n),a=dw(n,(function(t){return new gw(e.firestore,new Ob(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return jb(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(cw.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),mw=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new pw(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),gw=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"query",get:function(){return new yw(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new pw(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new mw(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new pw(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Lb(this._delegate,e._delegate)}}]),e}(),kw=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return m(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new lw(this.firestore,e):null}},{key:"doc",value:function(e){try{return new lw(this.firestore,void 0===e?Gg(this._delegate):Gg(this._delegate,e))}catch(t){throw fw(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Lg(e.firestore,bk),r=Gg(e),i=Cb(e.converter,t);return zb(n,[Bk(Vk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ff.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new lw(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Hg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(cw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(yw);function bw(e){return Lg(e,jg)}var ww,_w=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=C(Ak,n)}return m(e,[{key:"isEqual",value:function(e){return(e=Un(e))instanceof Ak&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(nc.keyField().canonicalString())}}]),e}(),xw=function(){function e(t){d(this,e),this._delegate=t}return m(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new zk("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new jk("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=$b.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Yb.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Hk("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Ew={Firestore:aw,GeoPoint:Rk,Timestamp:Xs,Blob:nw,Transaction:uw,WriteBatch:sw,DocumentReference:lw,DocumentSnapshot:vw,Query:yw,QueryDocumentSnapshot:pw,QuerySnapshot:gw,CollectionReference:kw,FieldPath:_w,FieldValue:xw,setLogLevel:function(e){!function(e){Ts.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Vn("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Ew)))})(ww=yi,(function(e,t){return new aw(e,t,new iw)})),ww.registerVersion(Xb,Jb);var Sw,Tw="firebasestorage.googleapis.com",Iw="storageBucket",Cw=12e4,Dw=6e5,Aw=1e3,Nw=function(e){k(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,Rw(e),"Firebase Storage: ".concat(r," (").concat(Rw(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(_(i),n.prototype),i}return m(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return Rw(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Dn);function Rw(e){return"storage/"+e}function Ow(){return new Nw(Sw.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Pw(){return new Nw(Sw.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lw(){return new Nw(Sw.CANCELED,"User canceled the upload/download.")}function Mw(){return new Nw(Sw.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Fw(e){return new Nw(Sw.INVALID_ARGUMENT,e)}function Uw(){return new Nw(Sw.APP_DELETED,"The Firebase app was deleted.")}function Vw(e){return new Nw(Sw.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bw(e,t){return new Nw(Sw.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function jw(e){throw new Nw(Sw.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Sw||(Sw={}));var qw,zw=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return m(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new Nw(Sw.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Tw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Nw(Sw.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Kw=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return m(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Gw(e){return"string"===typeof e||e instanceof String}function Hw(e){return Ww()&&e instanceof Blob}function Ww(){return"undefined"!==typeof Blob&&!Tn()}function Qw(e,t,n,r){if(r<t)throw Fw("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Fw("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function $w(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Yw(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function Xw(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(qw||(qw={}));var Jw=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,v=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return m(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=Ow();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?Uw():Lw());else i(Pw())}};this.canceled_?t(0,new Zw(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var v=!1;function p(e){v||(v=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new Zw(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===qw.NO_ERROR,a=r.getStatus();if(!n||Xw(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===qw.ABORT;t(!1,new Zw(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new Zw(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),Zw=m((function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function e_(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function t_(){for(var e=e_(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Ww())return new Blob(n);throw new Nw(Sw.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function n_(e){if("undefined"===typeof atob)throw t="base-64",new Nw(Sw.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var r_={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},i_=m((function e(t,n){d(this,e),this.data=t,this.contentType=n||null}));function a_(e,t){switch(e){case r_.RAW:return new i_(o_(t));case r_.BASE64:case r_.BASE64URL:return new i_(u_(e,t));case r_.DATA_URL:return new i_(function(e){var t=new s_(e);return t.base64?u_(r_.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Bw(r_.DATA_URL,"Malformed data URL.")}return o_(t)}(t.rest)}(t),new s_(t).contentType)}throw Ow()}function o_(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function u_(e,t){switch(e){case r_.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Bw(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case r_.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Bw(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=n_(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw Bw(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var s_=m((function e(t){d(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Bw(r_.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var c_=function(){function e(t,n){d(this,e);var r=0,i="";Hw(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return m(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Hw(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Ww()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(t_.apply(null,i))}var a=n.map((function(e){return Gw(e)?a_(r_.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function l_(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function f_(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function h_(e,t){return t}var d_=m((function e(t,n,r,i){d(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||h_})),v_=null;function p_(){if(v_)return v_;var e=[];e.push(new d_("bucket")),e.push(new d_("generation")),e.push(new d_("metageneration")),e.push(new d_("name","fullPath",!0));var t=new d_("name");t.xform=function(e,t){return function(e){return!Gw(e)||e.length<2?e:f_(e)}(t)},e.push(t);var n=new d_("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new d_("timeCreated")),e.push(new d_("updated")),e.push(new d_("md5Hash",null,!0)),e.push(new d_("cacheControl",null,!0)),e.push(new d_("contentDisposition",null,!0)),e.push(new d_("contentEncoding",null,!0)),e.push(new d_("contentLanguage",null,!0)),e.push(new d_("contentType",null,!0)),e.push(new d_("metadata","customMetadata",!0)),v_=e}function y_(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new zw(n,r);return t._makeStorageReference(i)}})}(r,e),r}function m_(e,t,n){var r=l_(t);return null===r?null:y_(e,r,n)}function g_(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var k_="prefixes",b_="items";function w_(e,t,n){var r=l_(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[k_]){var i,a=A(n[k_]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new zw(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[b_]){var s,c=A(n[b_]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new zw(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var __=m((function e(t,n,r,i){d(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function x_(e){if(!e)throw Ow()}function E_(e,t){return function(n,r){var i=m_(e,r,t);return x_(null!==i),i}}function S_(e,t){return function(n,r){var i=m_(e,r,t);return x_(null!==i),function(e,t,n,r){var i=l_(t);if(null===i)return null;if(!Gw(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return $w("/b/"+o(i)+"/o/"+o(a),n,r)+Yw({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function T_(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Nw(Sw.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Nw(Sw.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Nw(Sw.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Nw(Sw.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function I_(e){var t=T_(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Nw(Sw.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function C_(e,t,n){var r=$w(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new __(r,"GET",E_(e,n),i);return a.errorHandler=I_(t),a}function D_(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=$w(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new __(o,"GET",function(e,t){return function(n,r){var i=w_(e,t,r);return x_(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=T_(t),s}function A_(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function N_(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=A_(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+g_(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=c_.getBlob(c,r,l);if(null===f)throw Mw();var h={name:s.fullPath},d=$w(a,e.host,e._protocol),v=e.maxUploadRetryTime,p=new __(d,"POST",E_(e,n),v);return p.urlParams=h,p.headers=o,p.body=f.uploadData(),p.errorHandler=T_(t),p}var R_=m((function e(t,n,r,i){d(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function O_(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){x_(!1)}return x_(!!n&&-1!==(t||["active"]).indexOf(n)),n}var P_=262144;function L_(e,t,n,r,i,a,o,u){var s=new R_(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new Nw(Sw.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},v=r.slice(f,h);if(null===v)throw Mw();var p=t.maxUploadRetryTime,y=new __(n,"POST",(function(e,n){var i,o=O_(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?E_(t,a)(e,n):null,new R_(u,c,"final"===o,i)}),p);return y.headers=d,y.body=v.uploadData(),y.progressCallback=u||null,y.errorHandler=T_(e),y}var M_={STATE_CHANGED:"state_changed"},F_={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function U_(e){switch(e){case"running":case"pausing":case"canceling":return F_.RUNNING;case"paused":return F_.PAUSED;case"success":return F_.SUCCESS;case"canceled":return F_.CANCELED;default:return F_.ERROR}}var V_=m((function e(t,n,r){d(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function B_(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var j_=null,q_=function(){function e(){var t=this;d(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qw.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=qw.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=qw.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return m(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw jw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw jw("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw jw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw jw("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw jw("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),z_=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return m(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(q_);function K_(){return j_?j_():new z_}var G_=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=p_(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(Sw.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(Xw(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,Aw),r._needToFetchStatus=!0,void r.completeTransitions_();e=Pw()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(Sw.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return m(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=l(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=A_(t,r,i),u={name:o.fullPath},s=$w(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=g_(o,n),f=e.maxUploadRetryTime,h=new __(s,"POST",(function(e){var t;O_(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){x_(!1)}return x_(Gw(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=T_(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,K_,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new __(n,"POST",(function(e){var t=O_(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){x_(!1)}n||x_(!1);var i=Number(n);return x_(!isNaN(i)),new R_(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=T_(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,K_,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=P_*this._chunkMultiplier,n=new R_(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=L_(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,K_,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(P_*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=C_(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,K_,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=N_(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,K_,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Lw(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=U_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new V_(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(U_(this._state)){case F_.SUCCESS:B_(this._resolve.bind(null,this.snapshot))();break;case F_.CANCELED:case F_.ERROR:B_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(U_(this._state)){case F_.RUNNING:case F_.PAUSED:e.next&&B_(e.next.bind(e,this.snapshot))();break;case F_.SUCCESS:e.complete&&B_(e.complete.bind(e))();break;case F_.CANCELED:case F_.ERROR:default:e.error&&B_(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),H_=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof zw?n:zw.makeFromUrl(n,t.host)}return m(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new zw(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return f_(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new zw(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Vw(e)}}]),e}();function W_(e,t,n){return Q_.apply(this,arguments)}function Q_(){return(Q_=T(E().mark((function e(t,n,r){var i,a,o,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,$_(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,h(u.prefixes)),(a=n.items).push.apply(a,h(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,W_(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $_(e,t){null!=t&&"number"===typeof t.maxResults&&Qw("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=D_(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,K_)}function Y_(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=$w(t.fullServerUrl(),e.host,e._protocol),a=g_(n,r),o=e.maxOperationRetryTime,u=new __(i,"PATCH",E_(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=I_(t),u}(e.storage,e._location,t,p_());return e.storage.makeRequestWithTokens(n,K_)}function X_(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=$w(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new __(r,"GET",S_(e,n),i);return a.errorHandler=I_(t),a}(e.storage,e._location,p_());return e.storage.makeRequestWithTokens(t,K_).then((function(e){if(null===e)throw new Nw(Sw.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function J_(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=$w(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new __(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=I_(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,K_)}function Z_(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new zw(e._location.bucket,n);return new H_(e.storage,r)}function ex(e,t){if(e instanceof rx){var n=e;if(null==n._bucket)throw new Nw(Sw.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Iw+"' property when initializing the app?");var r=new H_(n,n._bucket);return null!=t?ex(r,t):r}return void 0!==t?Z_(e,t):e}function tx(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof rx)return new H_(e,t);throw Fw("To use ref(service, url), the first argument must be a Storage instance.")}return ex(e,t)}function nx(e,t){var n=null===t||void 0===t?void 0:t[Iw];return null==n?null:zw.makeFromBucketSpec(n,e)}var rx=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Tw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Cw,this._maxUploadRetryTime=Dw,this._requests=new Set,this._bucket=null!=i?zw.makeFromBucketSpec(i,this._host):nx(this._host,this.app.options)}return m(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=zw.makeFromBucketSpec(this._url,e):this._bucket=nx(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Qw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Qw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=T(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=T(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new H_(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Kw(Uw());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Yw(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Jw(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=T(E().mark((function e(t,n){var r,i,a,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ix="@firebase/storage",ax="0.11.1",ox="storage";function ux(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new G_(e,new c_(t),n)}(e=Un(e),t,n)}function sx(e){return function(e){e._throwIfRoot("getMetadata");var t=C_(e.storage,e._location,p_());return e.storage.makeRequestWithTokens(t,K_)}(e=Un(e))}function cx(e){return function(e){var t={prefixes:[],items:[]};return W_(e,t).then((function(){return t}))}(e=Un(e))}function lx(e,t){return tx(e=Un(e),t)}function fx(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:En(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function hx(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new rx(r,i,a,n,Lr)}Cr(new Vn(ox,hx,"PUBLIC").setMultipleInstances(!0)),jr(ix,ax,""),jr(ix,ax,"esm2017");var dx=function(){function e(t,n,r){d(this,e),this._delegate=t,this.task=n,this.ref=r}return m(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),vx=function(){function e(t,n){d(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return m(e,[{key:"snapshot",get:function(){return new dx(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new dx(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new dx(e,i,i._ref))}:{next:t.next?function(e){return t.next(new dx(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),px=function(){function e(t,n){d(this,e),this._delegate=t,this._service=n}return m(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new yx(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new yx(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),yx=function(){function e(t,n){d(this,e),this._delegate=t,this.storage=n}return m(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return Z_(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new vx(ux(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r_.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=a_(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new vx(new G_(this._delegate,new c_(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return cx(this._delegate).then((function(t){return new px(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return $_(e=Un(e),t)}(this._delegate,e||void 0).then((function(e){return new px(e,t.storage)}))}},{key:"getMetadata",value:function(){return sx(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Y_(e=Un(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return X_(Un(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),J_(Un(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Vw(e)}}]),e}(),mx=function(){function e(t,n){d(this,e),this.app=t,this._delegate=n}return m(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(gx(e))throw Fw("ref() expected a child path but got a URL, use refFromURL instead.");return new yx(lx(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!gx(e))throw Fw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{zw.makeFromUrl(e,this._delegate.host)}catch(t){throw Fw("refFromUrl() expected a valid full URL but got an invalid one.")}return new yx(lx(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fx(this._delegate,e,t,n)}}]),e}();function gx(e){return/^[A-Za-z]+:\/\//.test(e)}var kx="@firebase/storage-compat",bx="0.3.1",wx="storage-compat";function _x(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new mx(r,i)}!function(e){var t={TaskState:F_,TaskEvent:M_,StringFormat:r_,Storage:mx,Reference:yx};e.INTERNAL.registerComponent(new Vn(wx,_x,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(kx,bx)}(yi);yi.initializeApp({apiKey:"AIzaSyDGerOI7q0sWVnbAhXUM-s30nFg6B4KivM",authDomain:"image-gallery-489c0.firebaseapp.com",projectId:"image-gallery-489c0",storageBucket:"image-gallery-489c0.appspot.com",messagingSenderId:"556960202018",appId:"1:556960202018:web:408580276c6d2fa5f0f97b",measurementId:"G-MJ2EJ4RCVR"});var xx=yi.firestore(),Ex=yi.storage(),Sx={btn:"UploadPhoto_btn__4-Eya"},Tx=function(){var e=l((0,r.useState)(null),2),t=e[0],n=e[1],i=l((0,r.useState)(0),2),a=i[0],o=i[1],u=l((0,r.useState)(""),2),s=u[0],c=u[1],f=function(){var e=T(E().mark((function e(){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return c("Please select an image to upload."),e.abrupt("return");case 3:r=Ex.ref(),i=r.child(t.name),i.put(t).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);o(t)}),(function(e){c(e.message)}),T(E().mark((function e(){var t,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getDownloadURL();case 2:t=e.sent,r=(new Date).toISOString(),xx.collection("photos").add({downloadURL:t,createdAt:r}),n(null),o(0);case 7:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("input",{className:Sx.input,type:"file",onChange:function(e){var t=e.target.files[0];t&&n(t)}}),(0,Zt.jsx)("button",{className:Sx.btn,onClick:f,children:"Upload"}),s&&(0,Zt.jsx)("div",{children:s}),a>0&&(0,Zt.jsxs)("div",{children:[a,"% uploaded"]})]})},Ix="PhotoList_img__TfbKY",Cx=function(){var e=l((0,r.useState)([]),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=xx.collection("photos").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Jn({id:e.id},e.data())}));n(t)}));return function(){e()}}),[]),(0,Zt.jsx)("div",{children:t.map((function(e){return(0,Zt.jsx)("img",{className:Ix,src:e.downloadURL,alt:e.id},e.id)}))})};var Dx=function(){return(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)(Tx,{}),(0,Zt.jsx)(Cx,{})]})},Ax="Card_card__c8m2W",Nx=function(e){return(0,Zt.jsx)("div",{className:"".concat(Ax," ").concat(e.className),children:e.children})},Rx={login:"Login_login__5Zc7w",control:"Login_control__YOu69",invalid:"Login_invalid__7kH04",actions:"Login_actions__AmNlg"},Ox="Button_button__O+c4B",Px=function(e){return(0,Zt.jsx)("button",{type:e.type||"button",className:"".concat(Ox," ").concat(e.className),onClick:e.onClick,disabled:e.disabled,children:e.children})},Lx=function(e){var t=l((0,r.useState)(""),2),n=t[0],i=t[1],a=l((0,r.useState)(),2),o=a[0],u=a[1],s=l((0,r.useState)(""),2),c=s[0],f=s[1],h=l((0,r.useState)(),2),d=h[0],v=h[1],p=l((0,r.useState)(!1),2),y=p[0],m=p[1];return(0,Zt.jsx)(Nx,{className:Rx.login,children:(0,Zt.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onLogin(n,c)},children:[(0,Zt.jsxs)("div",{className:"".concat(Rx.control," ").concat(!1===o?Rx.invalid:""),children:[(0,Zt.jsx)("label",{htmlFor:"email",children:"E-Mail"}),(0,Zt.jsx)("input",{type:"email",id:"email",value:n,onChange:function(e){i(e.target.value),m(e.target.value.includes("@")&&c.trim().length>6)},onBlur:function(){u(n.includes("@"))}})]}),(0,Zt.jsxs)("div",{className:"".concat(Rx.control," ").concat(!1===d?Rx.invalid:""),children:[(0,Zt.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Zt.jsx)("input",{type:"password",id:"password",value:c,onChange:function(e){f(e.target.value),m(e.target.value.trim().length>6&&n.includes("@"))},onBlur:function(){v(c.trim().length>6)}})]}),(0,Zt.jsx)("div",{className:Rx.actions,children:(0,Zt.jsx)(Px,{type:"submit",className:Rx.btn,disabled:!y,children:"Login"})})]})})},Mx="Home_home__jix4K",Fx=function(e){return(0,Zt.jsx)(Nx,{className:Mx,children:(0,Zt.jsx)("h1",{children:"Welcome back!"})})};var Ux=function(){var e=l((0,r.useState)(!1),2),t=e[0],n=e[1];return(0,Zt.jsx)(r.Fragment,{children:(0,Zt.jsxs)("main",{children:[!t&&(0,Zt.jsx)(Lx,{onLogin:function(e,t){n(!0)}}),t&&(0,Zt.jsx)(Fx,{onLogout:function(){n(!1)}})]})})},Vx=function(e,t){return Te({basename:null==t?void 0:t.basename,history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),V((function(e,t){var n=e.location;return M("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:F(t)}),null,n)),hydrationData:(null==t?void 0:t.hydrationData)||Gt(),routes:Bt(e)}).initialize();var n}([{path:"/",element:(0,Zt.jsx)(vn,{}),errorElement:(0,Zt.jsx)(tn,{}),children:[{index:!0,element:(0,Zt.jsx)(dn,{})},{path:"/authscreen",element:(0,Zt.jsx)(Ux,{})},{path:"/photoscreen",element:(0,Zt.jsx)(Dx,{})},{path:"/textscreen",element:(0,Zt.jsx)(hn,{})}]}]);var Bx=function(){return(0,Zt.jsx)(Ot,{router:Vx})};a.createRoot(document.getElementById("root")).render((0,Zt.jsx)(r.StrictMode,{children:(0,Zt.jsx)(Bx,{})}))}()}();
//# sourceMappingURL=main.d653aa63.js.map